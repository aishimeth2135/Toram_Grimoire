!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=7)}([function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l});const n="data-langtext";function i(e){let t=e.querySelectorAll(`a[${n}], input[${n}]`);Array.from(t).forEach(e=>{e.innerHTML=function(e){let t=e.split("|,|");return t[1]||t[0]}(e.getAttribute(n))})}function l(e,t={}){if(null==e)return"";const a=document.createElement("a");return a.setAttribute(n,e),t.href&&(a.href=t.href),t.class&&(Array.isArray(t.class)?a.classList.add(...t.class):a.classList.add(t.class)),a.outerHTML}},function(e,t,a){"use strict";var n=a(6),i=a(0),l=a(3),s=a(2);const r=Symbol(),c=Symbol();function _(e){this.MAIN_NODE=null,this.skillRoot=e,this.currentData={mainWeapon:-1,subWeapon:-1,bodyArmor:-1,skillLevel:10,characterLevel:185,currentSkill:null,stackValues:{}}}_.prototype={initSkillQueryHTML(e){const t=this.skillRoot;this.MAIN_NODE=e;const a=[m.TYPE,h.TYPE,E.TYPE,r,c,b.CATEGORY_EQUIPMENT,b.TYPE],n=document.createDocumentFragment();a.forEach(function(e){const a=this.getSkillElementScope(e);switch(n.appendChild(a),e){case m.TYPE:a.appendChild(this.createSkillQueryScopeHTML(t,Object(l.a)().menu));break;case h.TYPE:t.skillTreeCategorys.forEach(function(e){a.appendChild(this.createSkillQueryScopeHTML(e,Object(l.a)().menu))},this);break;case r:case c:a.appendChild(this.createSkillQueryScopeHTML(null,e))}},this),e.appendChild(n)},getSkillElementScope(e){const t={[m.TYPE]:"SkillRoot_scope",[h.TYPE]:"SkillTreeCategory_scope",[E.TYPE]:"SkillTree_scope",[b.TYPE]:"Skill_scope",[r]:"SkillLevel_scope",[c]:"CharacterLevel_scope",[b.CATEGORY_EQUIPMENT]:"SkillEquipment_scope"};let a=this.MAIN_NODE.getElementsByClassName(t[e])[0];return a||(a=document.createElement("div")).classList.add(t[e]),a},getSkillElementNoStr(e){let t="";for(;e.parent;)t=e.findLocation()+(""!=t?"-":"")+t,e=e.parent;return t},selectSkillElement(e){const t=e.split("-");let a=null;return t.forEach(function(e,t){switch(e=parseInt(e,10),t){case 0:a=this.skillRoot.skillTreeCategorys[e];break;case 1:a=a.skillTrees[e];break;case 2:a=a.skills[e];break;case 3:a=a.branchs[e]}},this),a},updateSkillHTML(){const e=this.currentData.currentSkill;if(!e)return;const t=this.getSkillElementScope(b.TYPE);s.a.element.removeAllChild(t),t.appendChild(this.createSkillQueryScopeHTML(e,b.CATEGORY_MAIN)),Object(i.a)(t)},createSkillQueryScopeHTML(e,t){switch(null!==e?e.TYPE:t){case m.TYPE:switch(t){case Object(l.a)().menu:{const a=this,n=function(e){const t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");a.getSkillElementScope(h.TYPE);let n=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),i=a.getSkillElementScope(h.TYPE).querySelectorAll("div._menu");const l=Array.from(i).find(e=>!e.classList.contains("hidden"));l&&l.classList.add("hidden"),i[n].classList.remove("hidden"),s.a.element.removeAllChild(a.getSkillElementScope(E.TYPE)),s.a.element.removeAllChild(a.getSkillElementScope(b.TYPE)),s.a.element.removeAllChild(a.getSkillElementScope(b.CATEGORY_EQUIPMENT));const r=i[n].querySelector("li.cur");r&&r.click()},r=document.createElement("div");r.className="_"+t;const c=document.createDocumentFragment();e.skillTreeCategorys.forEach(e=>{const t=document.createElement("li");t.innerHTML=Object(i.b)(e.name),t.setAttribute(Object(l.a)().data_skillElementNo,a.getSkillElementNoStr(e)),t.addEventListener("click",n),c.appendChild(t)});const _=document.createElement("ul");return _.appendChild(c),r.appendChild(_),r}}case h.TYPE:switch(t){case Object(l.a)().menu:{const a=this,n=function(e){const t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");const n=a.getSkillElementScope(E.TYPE);n.innerHTML="";const r=a.selectSkillElement(this.getAttribute(Object(l.a)().data_skillElementNo));n.appendChild(a.createSkillQueryScopeHTML(r,E.CATEGORY_TABLE)),Object(i.a)(n),s.a.element.removeAllChild(a.getSkillElementScope(b.TYPE)),s.a.element.removeAllChild(a.getSkillElementScope(b.CATEGORY_EQUIPMENT))},r=document.createElement("div");r.className="_"+t,r.classList.add("hidden");const c=document.createDocumentFragment();e.skillTrees.forEach(function(e){const t=document.createElement("li");t.innerHTML=Object(i.b)(e.name),t.setAttribute(Object(l.a)().data_skillElementNo,a.getSkillElementNoStr(e)),t.addEventListener("click",n),c.appendChild(t)});const _=document.createElement("ul");return _.appendChild(c),r.appendChild(_),r}}case E.TYPE:switch(t){case E.CATEGORY_TABLE:{const t=e,a=t.parent.findLocation(),n=t.findLocation(),r=this,c=function(e){const t=r.selectSkillElement(this.getAttribute(Object(l.a)().data_skillElementNo));if(r.currentData.currentSkill===t)return;const a=this.parentNode.parentNode.getElementsByClassName("cur")[0];if(a&&a.classList.remove("cur"),this.classList.add("cur"),r.currentData.currentSkill=t,t.checkData()){s.a.object.empty(r.currentData.stackValues),r.currentData.stackValues=null;const{mainWeapon:e,subWeapon:a,bodyArmor:n}=t.defaultEffect;Object.assign(r.currentData,{mainWeapon:e,subWeapon:a,bodyArmor:n})}const n=r.createSkillQueryScopeHTML(t,b.CATEGORY_EQUIPMENT),c=r.getSkillElementScope(b.CATEGORY_EQUIPMENT);s.a.element.removeAllChild(c),null!==n&&(c.appendChild(n),Object(i.a)(c)),r.updateSkillHTML()},_=function(e){let t=document.createElement("table");return e.ary.forEach(function(e){let a=document.createDocumentFragment();e.forEach(function(e){let t=document.createElement("td");if(e>1&&t.setAttribute("rowspan",e),a.appendChild(t),e<-1)for(++e;0!=e;){++e;const t=document.createElement("td");t.setAttribute("data-empty","1"),a.appendChild(t)}});let n=document.createElement("tr");n.appendChild(a),t.appendChild(n)}),t}(function(e,t){let a=null;switch(e){case 0:switch(t){case 0:a=[[4,2,2,1],[1],[2,2,1],[1],[2,2,-2],[1,1]];break;case 1:a=[[3,2,-3],[1,-2],[1,1,1,1],[2,-4],[1,1,-2]];break;case 2:a=[[2,1,1,1,1],[1,1,1,1],[-5],[1,1,1,-2]];break;case 3:a=[[2,1,1,1,1],[1,1,1,1],[1,1,-3],[1,-4]];break;case 4:a=[[4,1,1,-2],[1,1,1,1],[1,1,-2],[1,1,-2]];break;case 5:a=[[4,2,2,1],[1],[2,1,1],[-2],[1,-3],[1,1,-2]];break;case 6:a=[[2,2,2,2,1],[1],[1,1,-3],[2,-4],[1,1,-2]]}break;case 1:switch(t){case 0:a=[[2,1,1],[-2],[2,1,1],[-2]];break;case 1:case 2:a=[[2,1,1,1],[1,-2],[1,1,-2]];break;case 3:case 4:case 5:a=[[1,1,1,1],[1,1,1,1]]}break;case 2:switch(t){case 0:a=[[-2],[-2],[-2],[2,1],[1],[2,1],[1]];break;case 1:a=[[-4],[1,1,1,1],[1,1,1,1],[1,1,1,1]];break;case 2:a=[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]}break;case 3:switch(t){case 0:a=[[4,1,1,1,1],[1,1,-2],[2,1,-2],[1,1,1],[-5]];break;case 1:a=[[3,1,1,1,1],[1,1,-2],[1,1,-2],[1]];break;case 2:a=[[3,1,1],[1,1],[1,1]]}break;case 4:switch(t){case 0:case 1:a=[[1,1,1],[1,1,1]]}}return null===a&&(a=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]]),{ary:a}}(a,n));let o=-1;return Array.from(_.getElementsByTagName("td")).forEach(function(e){if("1"==e.getAttribute("data-empty"))return;++o;const a=t.skills[o];void 0!==a?"@lock"!=a.name?(e.innerHTML=Object(i.b)(a.name),e.setAttribute(Object(l.a)().data_skillElementNo,r.getSkillElementNoStr(a)),e.addEventListener("click",c)):e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path opacity=".87" d="M0 0h24v24H0V0z"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>':e.innerHTML="-"}),_}}case b.TYPE:switch(t){case b.CATEGORY_MAIN:{if(e.checkData())return Object(n.a)(this.currentData);const t=document.createElement("div");return t.classList.add("no_data"),t.innerHTML="此技能資料尚未更新。",t}case b.CATEGORY_EQUIPMENT:{const t=this,a=function(e){const a=["mainWeapon","subWeapon","bodyArmor"],n=[this.getAttribute(Object(l.a)().data_mainWeapon),this.getAttribute(Object(l.a)().data_subWeapon),this.getAttribute(Object(l.a)().data_bodyArmor)];for(let e=0;e<n.length;++e){const i=n[e];if(null!==i&&""!==i)return t.currentData[a[e]]=parseInt(i,10),this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),void t.updateSkillHTML()}},n=[],s=[],r=[];e.effects.forEach(e=>{const t=e.mainWeapon,a=e.subWeapon,i=e.bodyArmor;-1==n.indexOf(t)&&n.push(t),-1==s.indexOf(a)&&s.push(a),-1==r.indexOf(i)&&r.push(i)});const c=document.createDocumentFragment(),_=[this.currentData.mainWeapon,this.currentData.subWeapon,this.currentData.bodyArmor];return[n,s,r].forEach((e,t)=>{if(1!=e.length||-1!=e[0]){let o,u,d,p;switch(e){case n:p=Object(l.a)().data_mainWeapon,d="Main Weapon|,|主手武器",o=["","","","","","","","","",""],u=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"];break;case s:p=Object(l.a)().data_subWeapon,d="Sub Weapon|,|副手武器",o=["","","","","",""],u=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"];break;case r:p=Object(l.a)().data_bodyArmor,d="Body Armor|,|身體裝備",o=["","",""],u=["輕量化","重量化","一般"]}let m=null;const h=document.createElement("ul");if(e.forEach(e=>{const n=document.createElement("li");_[t]==e&&n.classList.add("cur"),n.setAttribute(p,e),n.addEventListener("click",a),-1!=e?(n.innerHTML=`<span class="icon">${o[e]}</span><span class="value">${Object(i.b)(u[e])}</span>`,h.appendChild(n)):(n.innerHTML=`<span class="icon"></span><span class="value">${Object(i.b)("None|,|無限制")}</span>`,m=n)}),e===n&&-1!==n.indexOf(0)&&-1===n.indexOf(9)){const e=document.createElement("li");e.innerHTML=`<span class="icon">${o[9]}</span><span class="value">${Object(i.b)(u[9])}</span>`,e.setAttribute(p,0),h.appendChild(e),e.addEventListener("click",a)}null!==m&&h.appendChild(m);const E=document.createElement("div"),b=document.createElement("div");b.innerHTML=Object(i.b)(d),E.appendChild(b),E.appendChild(h),c.appendChild(E)}}),0!=c.childElementCount?c:null}}case c:{const e=this,t=s.a.element.simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),a=s.a.element.simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),n=s.a.element.simpleCreateHTML("input","mid");n.value=this.currentData.characterLevel;const l=function(t){let a=parseInt(n.value,10);switch(this.getAttribute("data-ctr")){case"-":a-=10;break;case"+":a+=10}a>185?a=185:a<0&&(a=0),n.value=a,e.currentData.characterLevel=a,e.updateSkillHTML()};t.setAttribute("data-ctr","-"),t.addEventListener("click",l),a.setAttribute("data-ctr","+"),a.addEventListener("click",l),n.type="number",n.addEventListener("change",l),n.addEventListener("focus",function(e){this.select()});const r=document.createDocumentFragment();return r.appendChild(s.a.element.simpleCreateHTML("div","title",Object(i.b)("Character Level|,|角色等級"))),r.appendChild(t),r.appendChild(n),r.appendChild(a),r}case r:{const e=this,t=function(t){const a=e.currentData.currentSkill;this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),e.currentData.skillLevel=parseInt(this.getAttribute(Object(l.a)().data_skillLevel),10),null!=a&&e.updateSkillHTML()},a=1,n=10,i=document.createElement("ul");for(let e=a;e<=n;++e){const a=document.createElement("li");a.innerHTML="Lv. "+e,a.setAttribute(Object(l.a)().data_skillLevel,e),a.addEventListener("click",t),e==this.currentData.skillLevel&&a.classList.add("cur"),i.appendChild(a)}return i}}}};var o=_,u=a(4),d=a(5);function p(){Array.from(arguments).forEach(function(e,t){null==e&&(console.log(`argument[${t}] of Constructor is null`),console.log(arguments))})}function m(){this.skillTreeCategorys=[],this.controller=new o(this)}function h(e,t,a){this.parent=e,this.no=t,this.name=a,this.skillTrees=[]}function E(e,t,a){this.parent=e,this.no=t,this.name=a,this.skills=[]}function b(e,t,a){this.parent=e,this.name=a,this.effects=[],this.defaultEffect=null,this.caption=""}function T(e,t,a,n){this.parent=e,this.branchs=[],this.mainWeapon=t,this.subWeapon=a,this.bodyArmor=n,this.attributes={}}function f(e,t,a){this.parent=e,this.no=t,this.name=a,this.branchAttributes={},this.stats=[]}a.d(t,"d",function(){return m}),a.d(t,"f",function(){return h}),a.d(t,"e",function(){return E}),a.d(t,"a",function(){return b}),a.d(t,"c",function(){return T}),a.d(t,"b",function(){return f}),m.TYPE=Symbol("SkillRoot"),m.prototype={TYPE:m.TYPE,newElement(e,t){if(e==h.TYPE){const{name:e,no:a}=t;p(a,e);let n=new h(this,a,e);return this.skillTreeCategorys.push(n),n}return null}},h.TYPE=Symbol("SkillTreeCategory"),h.prototype={TYPE:h.TYPE,newElement(e,t){if(e==E.TYPE){const{name:e,no:a}=t;p(a,e);let n=new E(this,a,e);return this.skillTrees.push(n),n}return null},findLocation(){return this.parent.skillTreeCategorys.indexOf(this)}},E.TYPE=Symbol("SkillTree"),E.prototype={TYPE:E.TYPE,newElement(e,t){if(e==b.TYPE){const{name:e,no:a}=t;p(a,e);let n=new b(this,a,e);return this.skills.push(n),n}return null},findLocation(){return this.parent.skillTrees.indexOf(this)}},E.CATEGORY_TABLE=Symbol(),b.TYPE=Symbol("Skill"),b.prototype={TYPE:b.TYPE,newElement(e,t){if(e==T.TYPE){const{mainWeapon:e,subWeapon:a,bodyArmor:n}=t;p(e,a,n);let i=new T(this,e,a,n);return this.effects.push(i),i}return null},findLocation(){return this.parent.skills.indexOf(this)},setDefaultEffect(e){return this.defaultEffect=e,this},checkData(){return void 0!==this.defaultEffect&&null!==this.defaultEffect}},b.CATEGORY_MAIN=Symbol(),b.CATEGORY_EQUIPMENT=Symbol(),T.TYPE=Symbol("SkillEffect"),T.prototype={TYPE:T.TYPE,newElement(e,t){if(e==f.TYPE){const e=t.no,a=t.name;p(e,a);let n=new f(this,e,a);return this.branchs.push(n),n}return null},findLocation(){return this.parent.effects.indexOf(this)},appendAttribute(e,t){return null!==t&&(this.attributes[e]=t),this}},T.MP_COST=Symbol("mp_cost"),T.RANGE=Symbol("range"),T.SKILL_TYPE=Symbol("skill_type"),T.IN_COMBO=Symbol("in_combo"),T.ACTION_TIME=Symbol("action_type"),T.CASTING_TIME=Symbol("casting_time"),f.TYPE=Symbol("SkillBranch"),f.prototype={TYPE:f.TYPE,appendBranchAttribute(e,t){return this.branchAttributes[e]=t,this},findLocation(){return this.parent.branchs.indexOf(this)},appendStat(e,t,a){let n;switch(a){case"":n=d.a.TYPE_CONSTANT;break;case"%":n=d.a.TYPE_MULTIPLIER;break;case"~":n=d.a.TYPE_TOTAL}const i=u.a.CharacterSystem.findStatBase(e).createSimpleStat(n,t);return this.stats.push(i),i}}},function(e,t,a){"use strict";let n={element:{remove:function(){Array.from(arguments);Array.from(arguments).forEach(function(e){e&&e.parentNode.removeChild(e)})},removeAllChild:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}},setAttributes:function(e,t){Object.keys(t).forEach(a=>{null!==t[a]&&e.setAttribute(a,t[a])})},simpleCreateHTML(e,t,a){const n=document.createElement(e);return null!==n&&(Array.isArray(t)?n.classList.add(...t):n.classList.add(t)),null!=a&&(n.innerHTML=a),n}},class:{extends:function(e){let t=Array.from(arguments);e.prototype=Object.create(t[1].prototype),t.forEach(function(t,a){a<=1||Object.assign(e.prototype,t.prototype)}),e.constructor=e}},object:{empty(e){null!==e&&"object"==typeof e&&Object.keys(e).forEach(function(t){delete e[t]})},isEmpty:e=>"object"!=typeof e||0==Object.keys(e).length},svg:{create(e,t,a={}){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");return a=Object.assign({xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:`0 0 ${e} ${t}`},a),n.element.setAttributes(i,a),i},drawCircle(e,t,a,i={}){const l=document.createElementNS("http://www.w3.org/2000/svg","circle");return i=Object.assign({cx:e,cy:t,r:a},i),n.element.setAttributes(l,i),l},drawPath(e,t={}){const a=document.createElementNS("http://www.w3.org/2000/svg","path");return t=Object.assign({d:e},t),n.element.setAttributes(a,t),a},drawSector(e,t,a,i,l,s,r,c={}){const _=document.createElementNS("http://www.w3.org/2000/svg","path");return c=Object.assign({d:n.svg.getSectorD(e,t,a,i,l,s,r),fill:"none"},c),n.element.setAttributes(_,c),_},getSectorD:(e,t,a,n,i,l,s)=>`M${a*Math.cos(l*Math.PI/180)+e} ${-a*Math.sin(l*Math.PI/180)+t} A${a} ${a} 0 0 ${1==s?0:1} ${a*Math.cos(i*Math.PI/180)+e} ${-a*Math.sin(i*Math.PI/180)+t} L${n*Math.cos(i*Math.PI/180)+e} ${-n*Math.sin(i*Math.PI/180)+t} A${n} ${n} 0 0 ${s} ${n*Math.cos(l*Math.PI/180)+e} ${-n*Math.sin(l*Math.PI/180)+t} Z`,createAnimate(e,t={}){t=Object.assign({attributeName:e,repeatCount:"indefinite"},t);const a=document.createElementNS("http://www.w3.org/2000/svg","animate");return n.element.setAttributes(a,t),a}}};t.a=n},function(e,t,a){"use strict";const n={menu:"menu",from:Symbol(),data_skillElementNo:"data-seno",data_mainWeapon:"data-mainw",data_subWeapon:"data-subw",data_bodyArmor:"data-armor",data_branchIndex:"data-bi"};t.a=function(){return n}},function(e,t,a){"use strict";t.a={}},function(e,t,a){"use strict";var n=a(0);function i(e,t,a){this.baseName=e,this.caption=t,this.hasMultiplier=a,this.attributes=[]}function l(e,t,a=0){this.base=e,this.type=t,this.value=a}i.TYPE_CONSTANT=Symbol(),i.TYPE_MULTIPLIER=Symbol(),i.TYPE_TOTAL=Symbol(),i.prototype={appendAttribute(e,t){return e&&void 0===this[e]&&(this[e]=t),this},show(e,t){switch("number"!=typeof t&&(t=parseInt(t)),e){case i.TYPE_CONSTANT:{let e=Object(n.b)(this.caption);return e+=t<0?"":"+",e+=t,this.hasMultiplier||(e+="%"),e}case i.TYPE_MULTIPLIER:{let e=Object(n.b)(this.caption);return e+=t<0?"":"+",e+=t,e+="%"}case i.TYPE_TOTAL:{let e=Object(n.b)("Total |,|總")+Object(n.b)(this.caption);return e+=t<0?"":"+",e+=t,e+="%"}}},getShowData(e,t){let a="",l="";switch(e){case i.TYPE_CONSTANT:a=Object(n.b)(this.caption),this.hasMultiplier||(l="%");break;case i.TYPE_MULTIPLIER:a=Object(n.b)(this.caption),l="%";break;case i.TYPE_TOTAL:a=Object(n.b)("Total |,|總")+Object(n.b)(this.caption),l="%"}return{title:a,value:t,tail:l}},createSimpleStat(e,t){return new l(this,e,t)}},l.prototype={show(){return this.base.show(this.type,this.value)},getShowData(){return this.base.getShowData(this.type,this.value)},statValue(e){return void 0!==e&&(this.value=e),this.value}},t.a=i},function(module,__webpack_exports__,__webpack_require__){"use strict";var _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),_strings_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3);const GLOBAL_EXTRA_ATTRIBUTE_VALUE={none:"@none"};function getStackBranchIdKey(e){return"id"+e.branchAttributes.id}function TempSkillEffect(){this.branchs=[],this.attributes={}}function TempSkillBranch(e){this.parent=e,this.branchAttributes={},this.stats=[],this.finish=!1}TempSkillEffect.prototype={from(e){return Object.getOwnPropertySymbols(e.attributes).forEach(function(t){this.appendAttribute(t,e.attributes[t])},this),e.branchs.forEach(function(e){this.newBranch().from(e)},this),this},newBranch(){const e=new TempSkillBranch(this);return this.branchs.push(e),e},overWrite:function(e){Object.getOwnPropertySymbols(e.attributes).forEach(function(t){const a=e.attributes[t];a==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.attributes[t]?delete this.attributes[t]:this.appendAttribute(t,a)},this);e.branchs.map(e=>e.no);e.branchs.forEach(function(e,t){const a=this.branchs.findIndex(t=>t.no==e.no);-1==a?this.newBranch().from(e):this.branchs[a].overWrite(e)},this)},appendAttribute(e,t){return this.attributes[e]=t,this},checkData(){return 0!=this.branchs.length}},TempSkillBranch.prototype={from:function(e){return this.no=e.no,this.name=e.name,this.branchAttributes={},Object.keys(e.branchAttributes).forEach(function(t){this.appendBranchAttribute(t,e.branchAttributes[t])},this),e.stats.forEach(function(e){this.appendStat(e.base.baseName,e.value,"").type=e.type},this),this},appendBranchAttribute(e,t){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.appendBranchAttribute.call(this,...arguments)},findLocation(){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.findLocation.call(this)},appendStat(e,t,a){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.appendStat.call(this,...arguments)},overWrite:function(e){if(""!=e.name)this.name!=e.name&&(this.name=e.name,_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.object.empty(this.branchAttributes)),Object.keys(e.branchAttributes).forEach(function(t,a){const n=e.branchAttributes[t];n==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.branchAttributes[t]?delete this.branchAttributes[t]:this.appendBranchAttribute(t,n)},this),e.stats.forEach(function(e){let t=this.stats.find(t=>e.base===t.base&&e.type===t.type);void 0===t?this.appendStat(e.base.baseName,e.value,"").type=e.type:t.statValue(e.value)},this);else{const e=this.parent.branchs;e.splice(e.indexOf(this),1)}}};const GLOBAL_ICON_DATA={Sword:"",Staff:""},MAIN_WEAPON_TEXT_LIST=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],SUB_WEAPON_TEXT_LIST=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],BODY_ARMOR_TEXT_LIST=["輕量化","重量化","一般"];function getEffectHTML(sef,attr_name,data){const safeEval=str=>{try{return eval(str)}catch(e){return console.warn(e),"?"}},ICON_DATA={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST]:"",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE]:"",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:["","","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:["",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:["",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:["","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:["","","","","","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME]:""},TITLE_DATA={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST]:"MP消耗",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE]:"射程",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:"類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:"傷害類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:"慣性類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:"連擊",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:"動作時間",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME]:["","詠唱時間","蓄力時間"]},TEXT_LIST={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:["瞬發","須詠唱","須蓄力","被動"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:["物理","魔法"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:["物理","魔法","普通攻擊"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:["極慢","慢","稍慢","一般","稍快","快","極快"]},{SLv:SLv,CLv:CLv}=data;let title=TITLE_DATA[attr_name],v=sef.attributes[attr_name],tail=null;const icon=Array.isArray(ICON_DATA[attr_name])?ICON_DATA[attr_name][v]:ICON_DATA[attr_name];switch(attr_name){case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME:title=TITLE_DATA[attr_name][sef.attributes[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]],tail="sec|,|秒";case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST:v=safeEval(v);break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE:v="-"!=v?safeEval(v)+"m":Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("無限制");break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME:v=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(TEXT_LIST[attr_name][v])}const he=document.createElement("div");he.className="skill_attribute";let res=`<span class="_icon">${icon}</span><span class="_title">${Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(title)}</span><span class="_value">${v}</span>`;return null!==tail&&(res+=`<span class="_tail">${Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(tail)}</span>`),he.innerHTML=res,he}const SUFFIX_LIST=["extra","poration"],EXTRA_FIX_LIST=["stack"];function getBranchHTML(branch,data){if(branch.finish)return null;function safeEval(str,dftv){try{return eval(str)}catch(e){return console.warn(e),void 0===dftv?"?":dftv}}function replaceExtraFromulaValue(e){const t={STR:"角色STR",DEX:"角色DEX",INT:"角色INT",AGI:"角色AGI",VIT:"角色VIT",BSTR:"角色基礎STR",BDEX:"角色基礎DEX",BINT:"角色基礎INT",BAGI:"角色基礎AGI",BVIT:"角色基礎VIT",shield_refining:"盾精煉值",dagger_atk:"小刀ATK"};return Object.keys(t).forEach(a=>{e=e.replace(new RegExp(a,"g"),t[a])}),e=(e=e.replace(/\*/g,"×")).replace(/(\d+\.\d+)/,()=>100*Number(RegExp.$1)+"%")}function processText(e,t){const a=e.branchAttributes;let n=a[void 0===t?"text":t];return n=safeEval("`"+(n=n.replace(/(\$\{[^\}]+\})([%]?)/g,()=>"%"!==RegExp.$2?processValue(RegExp.$1,{calc:!1,light:!0}):processValue(RegExp.$1,{calc:!1,tail:"%",light:!0})))+"`"),void 0!==a.mark&&a.mark.split(/\s*,\s*/).forEach(e=>{n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.branch&&a.branch.split(/\s*,\s*/).forEach(e=>{n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.skill&&a.skill.split(/\s*,\s*/).forEach(e=>{n=n.replace(new RegExp(e,"g"),lightText(e))}),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(n)}function processValue(e,t){let a;e=e.split(",,"),t=Object.assign({calc:!0,tail:"",toPercentage:!1,checkHasStack:e[0],light:!1},t),e.forEach((e,n)=>{if(0===n){if(t.calc){let t=safeEval(e);Number.isInteger(t)||(t=t.toFixed(2)),a=t}else a=e;t.toPercentage&&(a=100*a+"%"),a+=t.tail}else e=replaceExtraFromulaValue(e),a+="-"!==e.charAt(0)?"+"+e:e});const n=document.createElement("span");return t.checkHasStack.includes("stack")?n.classList.add("effect_by_stack"):t.light&&n.classList.add("light"),n.innerHTML=a,n.outerHTML}function processStat(e){const t=e.getShowData(),a=processValue(t.value),n=createSkillAttributeScope(null,t.title,a,""!==t.tail?t.tail:void 0);return n.classList.add("stat_scope"),n}const simpleCreateHTML=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.simpleCreateHTML;function createSkillAttributeScope(e,t,a,n){const i=simpleCreateHTML("div","skill_attribute");return null!==e&&i.appendChild(simpleCreateHTML("span","_icon",e)),null!==t&&i.appendChild(simpleCreateHTML("span","_title",t)),null!=a&&i.appendChild(simpleCreateHTML("span","_value",a)),null!=n&&i.appendChild(simpleCreateHTML("span","_tail",n)),i}function lightText(e){return'<span class="light">'+e+"</span>"}function darkText(e){return'<span class="dark">'+e+"</span>"}function markText(e){return lightText(e)}function getPorationHTML(e){const t=e.branchAttributes,a={physical:"物理",magic:"魔法",normal_attack:"一般攻擊",none:"不受慣性影響"},n=Object.assign({},a,{auto:a[t.damage],none:"不影響慣性"});return{one:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("傷害慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a[t.damage])),two:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("造成慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(n[t.poration]))}}function getDamageElementHTML(e){const t=simpleCreateHTML("div","skill_attribute");return"arrow"!=e&&t.appendChild(simpleCreateHTML("span",["_icon","element_"+e,"element_ball"])),t.appendChild(simpleCreateHTML("span",["_value","element_value"],Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)({neutral:"Neutral|,|無屬性",fire:"Fire|,|火屬性",water:"Water|,|水屬性",earth:"Earth|,|地屬性",wind:"Wind|,|風屬性",light:"Light|,|光屬性",dark:"Dark|,|暗屬性",arrow:"套用箭矢屬性",one_hand_sword:"套用單手劍屬性"}[e]))),t}function createContentLine(e,t,a){const n=simpleCreateHTML("div",["content","content_line"]),i=simpleCreateHTML("div","scope1"),l=simpleCreateHTML("div","scope2");return i.appendChild(e),l.appendChild(t),n.appendChild(i),n.appendChild(l),null!=a&&(Array.isArray(a)?[...a].forEach(e=>n.appendChild(e)):n.appendChild(a)),n}function getTargetText(e,t){const a={self:"Self|,|自身",party:t?"Team Members in Area|,|區域內的隊伍成員":"Party|,|全隊伍",aura:"Team Members in Aura|,|光環內的隊伍成員",target:"Target|,|目標",none:null}[e];return null!==a?Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a):a}function getEffectiveAreaHTML(e){const t=e.branchAttributes,a="self"===t.end_position,n=simpleCreateHTML("div","scope1");{const e=simpleCreateHTML("div","skill_attribute");if(e.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_character"])),e.appendChild(simpleCreateHTML("span","_value",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Character Position|,|角色位置"))),n.appendChild(e),!a){const e=simpleCreateHTML("div","skill_attribute");e.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_target"])),e.appendChild(simpleCreateHTML("span","_value",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Target Position|,|目標位置"))),n.appendChild(e)}}let i,l,s;["radius","angle","effective_area","move_distance"].forEach(e=>{if(t[e]){let a,r=t[e];switch(e){case"radius":a="Radius|,|半徑",i=safeEval(r),r=processValue(r,{tail:"m"});break;case"angle":a="Angle|,|夾角",l=safeEval(r),r=processValue(r,{tail:"°"});break;case"effective_area":s=t[e],a="Type|,|類別",r=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)({circle:"Circle|,|圓形",line:"Line|,|直線型",sector:"Sector|,|扇型"}[r]);break;case"move_distance":a="Move Distance|,|移動距離",r=processValue(r,{tail:"m"})}n.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a),r))}});const r=document.createDocumentFragment(),c=e=>void 0!==e?10*e:10;let _,o,u,d,p,m;const h="#ff5fb7",E=void 0===t.move_distance?8:12;switch(s){case"line":case"circle":switch(o=c(a?2*i+2:2*i+E+2),_=c(2*i+2),u=c(i+1),d=_/2,p=a?u:u+c(8),m=d,s){case"circle":{const e=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(p,m,c(i),{fill:"#feeaf5"});r.appendChild(e);const t=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(p,m,c(i),{stroke:"#FFD1EA",fill:"none"});t.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{values:"#FFD1EA;#ff5fb7;#ff5fb7",keyTimes:"0;0.2;1",dur:"2.5s"})),r.appendChild(t)}break;case"line":{const e=u+c(E),t=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawPath(`M${u} ${d-c(i)} A${c(i)} ${c(i)} 0 0 0 ${u} ${d+c(i)} L${e} ${d+c(i)} A${c(i)} ${c(i)} 0 0 0 ${e} ${m-c(i)} Z`,{fill:"#feeaf5"});r.appendChild(t);const a=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(u,d,c(i),{stroke:"#FFD1EA",fill:"none"});a.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{id:"a1",values:"#FFD1EA;#ff5fb7;#ff5fb7",keyTimes:"0;0.2;1",dur:"1s",repeatCount:"1",begin:"0s;a2.end",fill:"freeze"})),a.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("cx",{id:"a2",values:`${u};${e};${e}`,keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),r.appendChild(a)}}break;case"sector":{o=c(E+6),d=(_=c(E)*Math.sin(l*Math.PI/180)+c(2))/2,p=(u=c(4))+c(8),m=d;const e=0,t=2;i=2;const a=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawSector(u,d,c(e),c(E),l/2,360-l/2,1,{fill:"#feeaf5"});r.appendChild(a);const n=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawSector(u,d,c(e),c(e+1),l/2,360-l/2,1,{stroke:h});n.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("d",{id:"a1",to:_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.getSectorD(u,d,c(E-t),c(E),l/2,360-l/2,1),dur:"0.4s",repeatCount:1,begin:"0s;a2.end",fill:"freeze"})),n.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{id:"a2",to:h,dur:"2s",repeatCount:1,begin:"a1.end"})),r.appendChild(n)}}const b=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(u,d,c(i<=.5&&a?.25:.5),{fill:h});if("1"===t.is_sprint&&b.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("cx",{values:`${u};${u+c(E)};${u+c(E)}`,keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),r.appendChild(b),!a){const e=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(p,m,c(i>.5?.5:.25),{fill:"#2196f3"});r.appendChild(e)}const T=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.create(o,_);T.appendChild(r);const f=simpleCreateHTML("div",["effective_area","content","hidden"]),C=document.createElement("div");return C.appendChild(T),f.appendChild(C),f.appendChild(n),f}const{SLv:SLv,CLv:CLv}=data,btype=branch.name,suffix=[];let attr=branch.branchAttributes,p=branch.findLocation()+1,c=branch.parent.branchs[p];for(;void 0!==c&&-1!=SUFFIX_LIST.indexOf(c.name);)suffix.push(c),c=branch.parent.branchs[++p];const extra_fix=branch.parent.branchs.filter(e=>-1!=EXTRA_FIX_LIST.indexOf(e.name)),stack_value_list=extra_fix.filter(e=>"stack"==e.name&&-1!=(attr.stack_id||"").split(",").indexOf(e.branchAttributes.id)).map(e=>safeEval(data.stackValues[getStackBranchIdKey(e)])),stack=stack_value_list.length>1?stack_value_list:stack_value_list[0];switch(btype){case"stack":{const e=simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),t=simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),a=simpleCreateHTML("input","mid");a.value=data.stackValues[getStackBranchIdKey(branch)];const n=branch,i=parseInt(safeEval(n.branchAttributes.max),10),l=parseInt(safeEval(n.branchAttributes.min),10),s=function(e){const t=parseInt(a.getAttribute("data-maxv"),10),i=parseInt(a.getAttribute("data-minv"),10);let l=parseInt(a.value,10);switch(this.getAttribute("data-ctr")){case"-":--l;break;case"+":++l}l>t?l=t:l<i&&(l=i),a.value=l,data.stackValues[getStackBranchIdKey(n)]=l,_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_1__.a.SkillSystem.skillRoot.controller.updateSkillHTML()};e.setAttribute("data-ctr","-"),e.addEventListener("click",s),t.setAttribute("data-ctr","+"),t.addEventListener("click",s),a.type="number",a.setAttribute("data-maxv",i),a.setAttribute("data-minv",l),a.addEventListener("change",s),a.addEventListener("focus",function(e){this.select()});const r=document.createDocumentFragment();void 0!==attr.name&&r.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name))),r.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Min|,|最小值"),processValue(attr.min))),void 0!==attr.max&&r.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Max|,|最大值"),processValue(attr.max)));const c=document.createDocumentFragment();c.appendChild(e),c.appendChild(a),c.appendChild(t);const _=createContentLine(r,c),o=simpleCreateHTML("div",["branch","branch_"+btype]);return o.appendChild(_),branch.finish=!0,o}case"poration":{const e=simpleCreateHTML("div",["branch","branch_"+btype]),t=simpleCreateHTML("div","content"),{one:a,two:n}=getPorationHTML(branch);return t.appendChild(a),t.appendChild(n),e.appendChild(t),branch.finish=!0,e}case"damage":{let e=null;void 0!==attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));let t="";switch(attr.title){case"normal":t="1"==attr.frequency?"單下傷害":"總傷害";break;case"each":t="每下傷害";break;case"normal_attack":t="一般攻擊傷害提升"}const a=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t)),n=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("physical"==attr.damage_type?"Valid ATK|,|有效ATK":"Valid MATK|,|有效MATK")),i=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)({physical:"Physical|,|物理",magic:"Magic|,|魔法"}[attr.damage_type])),l=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Constant|,|技能常數"),processValue(attr.constant)),s=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Multiplier|,|技能倍率"),processValue(attr.multiplier),"%");let r=null;if(void 0!==attr.aliment_name){const e=document.createDocumentFragment();e.appendChild(createSkillAttributeScope(null,null,attr.aliment_name)),e.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Chance|,|機率"),processValue(attr.aliment_chance||"0")+"%")),r=createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Aliment|,|異常狀態")),e)}let c=null,_=null;"single"==attr.type?_=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Single|,|單體")):(_=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("AOE|,|範圍")),c=getEffectiveAreaHTML(branch),_.addEventListener("click",()=>{c.classList.toggle("hidden")}),_.classList.add("show_area"));let o=null;void 0!==attr.element&&(o=getDamageElementHTML(attr.element));let u=null;"1"==attr.is_place&&(u=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Is Place|,|設置型")));let d=null,p=null,m=null;(parseInt(attr.frequency)>1||"each"==attr.title)&&(d=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Frequency|,|傷害次數"),processValue(attr.frequency)),t="common"==attr.judgment?"common|,|共用判定":"separate|,|分開判定",p=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t)),"1"==attr.is_place&&void 0!==attr.cycle&&(m=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("per |,|每")+processValue(attr.cycle,{tail:Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(" sec|,|秒")}))));const h=suffix.find(e=>"poration"==e.name);let E=null,b=null;if(void 0!==h){const{one:e,two:t}=getPorationHTML(h);E=e,b=t,h.finish=!0}const T=suffix.filter(e=>"extra"==e.name),f=document.createDocumentFragment();T.forEach(e=>{const t=e.branchAttributes;void 0===t.condition&&(t.condition="額外效果");const a=document.createDocumentFragment();if(t.aliment_name&&a.appendChild(createSkillAttributeScope(null,null,t.aliment_name)),t.aliment_chance&&a.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Chance|,|機率"),processValue(t.aliment_chance)+"%")),t.constant){let e=safeEval(t.constant);const n=e>=0?"+":"";let i=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Constant |,|技能常數")+n+e;e<0&&(i=darkText(i)),i=processValue(i,{calc:!1,checkHasStack:t.constant}),a.appendChild(createSkillAttributeScope(null,null,i))}t.element&&a.appendChild(getDamageElementHTML(t.element)),t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(e=>a.appendChild(processStat(e))),f.appendChild(createContentLine(simpleCreateHTML("span","_main_title",processText(e,"condition")),a)),e.finish=!0});const C=simpleCreateHTML("div","top");null!==e&&C.appendChild(e);const M=simpleCreateHTML("div","scope1");M.appendChild(a),M.appendChild(i),M.appendChild(_),null!==u&&M.appendChild(u),null!==o&&M.appendChild(o),null!==p&&M.appendChild(p),null!==d&&M.appendChild(d),null!==m&&M.appendChild(m),null!==E&&M.appendChild(E),null!=b&&M.appendChild(b);const L=simpleCreateHTML("div","scope2");L.appendChild(n),L.appendChild(l),L.appendChild(s);const O=simpleCreateHTML("div","content");O.appendChild(M),O.appendChild(L);const A=simpleCreateHTML("div",["branch","branch_"+btype]);return 0!=C.childElementCount&&A.appendChild(C),A.appendChild(O),null!==r&&A.appendChild(r),f.childElementCount>0&&A.appendChild(f),null!==c&&A.appendChild(c),branch.finish=!0,A}case"effect":case"next":case"passive":{let e=null;attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));let t=attr.condition;"auto"==t&&(t="施放成功後"),"hit"==t&&(t="命中成功後"),"next"==btype&&(t="1"==attr.frequency?"下一招技能":`之後的${attr.frequency}招技能`),"passive"==btype&&(t="Passive|,|被動效果"),attr.condition=t;const a="none"!=t?simpleCreateHTML("span","_main_title",processText(branch,"condition")):null;let n=null;attr.end_condition&&(n=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.end_condition)));let i=null;if(attr.duration){let e=processValue(attr.duration);i="1"===attr.is_place?createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Duration|,|持續時間"),processValue(attr.duration),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("sec|,|秒")):simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(`in ${e} secs|,|${e}秒內`))}let l=null;"1"===attr.is_place&&(l=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Is Place|,|設置型")));let s=void 0!==attr.type?getTargetText(attr.type,"1"===attr.is_place):null,r=null,c=null;void 0===attr.radius?r=null!==s?createSkillAttributeScope(null,null,s):null:(r=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,s),attr.end_position="self",attr.effective_area="circle",c=getEffectiveAreaHTML(branch),r.addEventListener("click",()=>{c.classList.toggle("hidden")}),r.classList.add("show_area"));const _=suffix.filter(e=>"extra"==e.name),o=document.createDocumentFragment();_.forEach(e=>{const t=e.branchAttributes;void 0===t.condition&&(t.condition="額外效果");const a=document.createDocumentFragment();t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(e=>a.appendChild(processStat(e)));const n=document.createDocumentFragment();n.appendChild(simpleCreateHTML("span","_main_title",processText(e,"condition"))),void 0!==t.target&&n.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t.target))),o.appendChild(createContentLine(n,a)),e.finish=!0});const u=document.createDocumentFragment();null!==a&&u.appendChild(a),null!==l&&u.appendChild(l),null!==n&&u.appendChild(n),null!==i&&u.appendChild(i),null!=r&&u.appendChild(r);const d=document.createDocumentFragment();attr.caption?d.appendChild(simpleCreateHTML("div","text_scope",processText(branch,"caption"))):branch.stats.forEach(e=>d.appendChild(processStat(e)));const p=simpleCreateHTML("div","top");null!==e&&p.appendChild(e);const m=simpleCreateHTML("div",["branch","branch_"+btype]);0!=p.childElementCount&&m.appendChild(p);const h=createContentLine(u,d);return null!==l&&h.classList.remove("content_line"),m.appendChild(h),0!==o.childElementCount&&m.appendChild(o),null!==c&&m.appendChild(c),branch.finish=!0,m}case"heal":{let e={hp:"Restore HP|,|恢復HP",mp:"Restore MP|,|恢復MP"}[attr.type];const t=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(e));e=getTargetText(attr.target);const a=null!=e?createSkillAttributeScope(null,null,e):null,n=createSkillAttributeScope(null,"0"!=attr.constant?Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Restore|,|恢復量"):Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Base Restore|,|基本恢復量"),processValue(attr.constant));let i=null;if(void 0!==attr.duration){let e=processValue(attr.duration);i=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Duration|,|持續時間"),processValue(attr.duration),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("sec|,|秒"))}let l=null;void 0!==attr.frequency&&(l=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Frequency|,|作用次數"),processValue(attr.frequency)));let s=null;void 0!==attr.cycle&&(s=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("per |,|每")+processValue(attr.cycle,{tail:Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(" sec|,|秒")})));const r=document.createDocumentFragment();if(void 0!==attr.extra_text){const e=attr.extra_text.split(","),t=attr.extra_value.split(",").map(e=>processValue(e,{toPercentage:!0})),a=document.createDocumentFragment();e.forEach((e,n)=>{a.appendChild(createSkillAttributeScope(null,e,t[n]))}),r.appendChild(createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("extra|,|恢復量加成")),a))}const c=simpleCreateHTML("div",["branch","branch_"+btype]),_=simpleCreateHTML("div","content"),o=simpleCreateHTML("div","scope1");o.appendChild(t),o.appendChild(a),null!==i&&o.appendChild(i),null!==l&&o.appendChild(l),null!==s&&o.appendChild(s);const u=simpleCreateHTML("div","scope2");return u.appendChild(n),_.appendChild(o),_.appendChild(u),c.appendChild(_),0!==r.childElementCount&&c.appendChild(r),branch.finish=!0,c}case"text":case"tips":{let e=null;attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));const t=simpleCreateHTML("div","text_scope",processText(branch)),a=simpleCreateHTML("div",["branch","branch_"+btype]),n=simpleCreateHTML("div","top");null!==e&&n.appendChild(e);const i=simpleCreateHTML("div","content");return i.appendChild(t),0!=n.childElementCount&&a.appendChild(n),a.appendChild(i),branch.finish=!0,a}case"list":{const e=[];e.push(branch);let t=branch.findLocation()+1,a=branch.parent.branchs[t];for(;void 0!==a&&a.name==btype;)e.push(a),a=branch.parent.branchs[++t];const n=simpleCreateHTML("ul","_lists");e.forEach(e=>{n.appendChild(simpleCreateHTML("li",null,processText(e))),e.finish=!0});const i=simpleCreateHTML("div",["branch","branch_"+btype]),l=simpleCreateHTML("div","content");return l.appendChild(n),i.appendChild(l),branch.finish=!0,i}case"reference":{let e=null;attr.text&&(e=simpleCreateHTML("div","text_scope",processText(branch)));let t=null;if(attr.url){t=document.createDocumentFragment();let e=attr.url.split(","),a=attr.url_text.split(",");e.forEach((e,n)=>{t.appendChild(createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a[n],{href:e,class:"url_text"})))})}const a=simpleCreateHTML("div",["branch","branch_"+btype]);return null!==e&&a.appendChild(e),null!==t&&a.appendChild(createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Reference url|,|資料參考連結")),t)),branch.finish=!0,a}}return null}__webpack_exports__.a=function(e){const t=e.currentSkill,a=e,n=e.skillLevel,i=e.characterLevel;let l=(new TempSkillEffect).from(t.defaultEffect);let s=!1;if(t.effects.forEach(function(e){if(s)return;let{mainWeapon:n,subWeapon:i,bodyArmor:r}=e;return-1==(c={mainWeapon:n,subWeapon:i,bodyArmor:r}).mainWeapon&&-1==c.subWeapon&&-1==c.bodyArmor||-1!=a.mainWeapon&&a.mainWeapon==c.mainWeapon||-1!=a.subWeapon&&a.subWeapon==c.subWeapon||-1!=a.bodyArmor&&a.bodyArmor==c.bodyArmor?(e!=t.defaultEffect&&l.overWrite(e),void(s=!0)):void 0;var c}),s){const t=document.createDocumentFragment(),a=[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME],s=document.createElement("div");s.className="skill_attributes",a.forEach(function(e){if(void 0===l.attributes[e])return;const t=getEffectHTML(l,e,{SLv:n,CLv:i});t&&s.appendChild(t)}),t.appendChild(s);const r=document.createElement("div");if(r.className="skill_branchs",l.checkData()){null===e.stackValues&&(e.stackValues={},l.branchs.forEach(t=>{if("stack"==t.name){const a=t.branchAttributes,n="auto"==a.default?a.min:a.default;e.stackValues[getStackBranchIdKey(t)]=n}}));const t=e.stackValues;l.branchs.forEach(e=>{const a=getBranchHTML(e,{SLv:n,CLv:i,stackValues:t});null!==a&&r.appendChild(a)})}else{const e=document.createElement("div");e.classList.add("no_data"),e.innerHTML="此技能資料尚未齊全。",r.appendChild(e)}return t.appendChild(r),t}{const e=document.createElement("div");return e.classList.add("no_data"),e.innerHTML="所選取的裝備無法使用此技能。",e}}},function(e,t,a){e.exports=a(8)},function(e,t,a){"use strict";a.r(t);var n=a(4),i=a(1);const l=0,s=1,r=1,c=2,_="預設",o=3,u=4,d=5,p=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],m=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],h=["輕量化","重量化","一般"],E=6,b=7,T=8,f=9,C=10,M=11,L=12,O=13,A=14,P=15,g=16,S=["瞬發","須詠唱","須蓄力","被動"],k=["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],v=["極慢","慢","稍慢","一般","稍快","快","極快"],D="Skill Tree Category",y=2,I="Skill Tree",j=2;var B=function(e){e.skillTreeCategorys.forEach(e=>{e.skillTrees.forEach(e=>{e.skills.forEach(e=>{const t=e.defaultEffect;t&&t.branchs.forEach(e=>{!function(e){const t=function(e,t){Object.keys(t).forEach(a=>{void 0===e.branchAttributes[a]&&e.appendBranchAttribute(a,t[a])})};switch(e.name){case"damage":t(e,{constant:"0",multiplier:"0",type:"single",base:"auto",frequency:"1",end_position:"target",effective_area:"circle",title:"normal",judgment:"common",damage_type:"physical"});break;case"stack":t(e,{min:"1",default:"auto"});break;case"effect":case"hit":t(e,{type:"self",condition:"auto"});break;case"heal":t(e,{target:"self",frequency:"1",constant:"0"});break;case"next":t(e,{type:"none",frequency:"1"});break;case"poration":t(e,{poration:"auto"});break;case"passive":case"text":case"tips":case"list":case"head":case"extra":case"reference":case"":break;default:console.warn("Unknow Skill Branch Name."),console.log(e)}}(e)})})})})};function w(){this.skillRoot=new i.d(this)}w.prototype={init(){const e=this;return new Promise((t,a)=>{Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=170573319&single=true&output=csv",{download:!0,complete(a){!function(e,t){let a=null;const B=[i.f.TYPE,i.e.TYPE,i.a.TYPE,i.c.TYPE,i.b.TYPE],w=function(e,t){if(B.indexOf(e.TYPE)<=B.indexOf(t))return e;for(;e.TYPE!=t;)e=e.parent;return e},x=function(e,t){return e===t?null:e};t.forEach(function(t,R){try{if(0==R)return;const W=t[l];if(""!=W){const n=t[s];switch(n){case D:{const n=t[y];a=e.newElement(i.f.TYPE,{no:W,name:n})}break;case I:{a=w(a,i.f.TYPE);const e=t[j];a=a.newElement(i.e.TYPE,{no:W,name:e})}break;default:if(""!=n){a=w(a,i.e.TYPE);const e=t[r];a=a.newElement(i.a.TYPE,{no:W,name:e})}case"":{const e=p.indexOf(t[o]),n=m.indexOf(t[u]),l=h.indexOf(t[d]),s=t[c];if(""==s)return;const r=(a=w(a,i.a.TYPE)).newElement(i.c.TYPE,{mainWeapon:e,subWeapon:n,bodyArmor:l});s==_&&a.setDefaultEffect(r),a=r.appendAttribute(i.c.MP_COST,x(t[M],"")).appendAttribute(i.c.RANGE,x(t[L],"")).appendAttribute(i.c.SKILL_TYPE,x(S.indexOf(t[O]),-1)).appendAttribute(i.c.IN_COMBO,x(k.indexOf(t[A]),-1)).appendAttribute(i.c.ACTION_TIME,x(v.indexOf(t[P]),-1)).appendAttribute(i.c.CASTING_TIME,x(t[g],""))}}}if(B.indexOf(a.TYPE)<B.indexOf(i.c.TYPE))return;const H=t[E];if(""!=H){a=w(a,i.c.TYPE);const e=t[b];a=a.newElement(i.b.TYPE,{no:H,name:e})}const U=t[T],K=t[f];""!=U&&(n.a.CharacterSystem.findStatBase(U)?a.appendStat(U,K,t[C]):a.appendBranchAttribute(U,K))}catch(e){console.warn("[Error] When Load Skill Data"),console.log(t)}})}(e.skillRoot,a.data),B(e.skillRoot),t()},error(e){console.warn("讀取技能資料時發生錯誤"),console.log(e),a()}})})},init_SkillQuery(e){this.skillRoot.controller.initSkillQueryHTML(e)}};var x=w;var R=a(5);function W(){this.statList=[]}W.prototype={init(){},init_statList(){const e=this;return new Promise((t,a)=>{Papa.parse("./src/CharacterSystem/module/other/BaseStatData.csv",{download:!0,complete(a){var n;n=e,a.data.forEach(function(e,t){0!=t&&n.appendStatBase(e[0],e[1],"無"!=e[2])}),t()},error(e){console.warn("讀取角色能力資料時發生錯誤"),console.log(e),a()}})})},appendStatBase(e,t,a,n){const i=new R.a(e,t,a);return this.statList.push(i),i},StatList(){return this.statList},findStatBase(e){return this.StatList().find(t=>t.baseName==e)}};var H=W,U=a(0);var K=function(e){const{top_menu:t}=e;!function(e){const t=function(e){const t=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),a=document.querySelector('*[data-main-scope="1"]');a.setAttribute("data-main-scope",0),a.classList.add("hidden");let n=document.querySelectorAll("*[data-main-scope]")[t];n.setAttribute("data-main-scope",1),n.classList.remove("hidden")},a=document.createDocumentFragment();["Skills Information|,|技能資料|,|スキルインフォ"].forEach(e=>{const n=document.createElement("li");n.innerHTML=Object(U.b)(e),n.addEventListener("click",t),a.appendChild(n)});const n=document.createElement("ul");n.appendChild(a),e.appendChild(n)}(t),Object(U.a)(document),document.getElementById("LoadingPage").classList.add("hidden")};function N(e){const t=document.createElement("div");t.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(t)}function Y(e){return new Promise((t,a)=>{const n=document.createElement("div");n.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(n),t()})}if("0"===document.getElementById("SkillQuery").getAttribute("data-ready"))try{!async function(){n.a.SkillSystem=new x,n.a.CharacterSystem=new H,await Y("載入角色能力清單..."),await n.a.CharacterSystem.init_statList().catch(()=>N("...載入失敗。")),await Y("載入技能清單..."),await n.a.SkillSystem.init().catch(()=>N("...載入失敗。")),await Y("初始化技能資料..."),n.a.SkillSystem.init_SkillQuery(document.querySelector("#SkillQuery > .main")),K({top_menu:document.getElementById("top_menu")})}(),document.getElementById("SkillQuery").setAttribute("data-ready","1")}catch(e){N(e),console.log(e)}}]);