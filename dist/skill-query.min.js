!function(e){var t={};function a(n){if(t[n])return t[n].exports;var _=t[n]={i:n,l:!1,exports:{}};return e[n].call(_.exports,_,_.exports,a),_.l=!0,_.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var _ in e)a.d(n,_,function(t){return e[t]}.bind(null,_));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=28)}([function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return _}),a.d(t,"a",function(){return l});var n=a(3),_=a(1).a.element.simpleCreateHTML;function i(e,t,a,n){var i=_("div","skill_attribute");return null!==e&&i.appendChild(_("span","_icon",e)),null!==t&&i.appendChild(_("span","_title",t)),null!=a&&i.appendChild(_("span","_value",a)),null!=n&&i.appendChild(_("span","_tail",n)),i}function r(e){return"id"+e.branchAttributes.id}function l(e){return Object(n.d)("Skill Query/Analysis Skill/"+e)}},function(e,t,a){"use strict";var n=a(14),_=a.n(n),i=a(17),r=a.n(i),l={element:{remove:function(){Array.from(arguments).forEach(function(e){e&&e.parentNode.removeChild(e)})},removeAllChild:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}},setAttributes:function(e,t){Object.keys(t).forEach(function(a){null!==t[a]&&e.setAttribute(a,t[a])})},simpleCreateHTML:function(e,t,a,n){var _,i=document.createElement(e);null!=t&&(Array.isArray(t)?(_=i.classList).add.apply(_,r()(t)):i.classList.add(t));return null!=a&&(i.innerHTML=a),null!=n&&l.element.setAttributes(i,n),i},convertRemToPixels:function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}},object:{empty:function(e){null!==e&&"object"===_()(e)&&Object.keys(e).forEach(function(t){delete e[t]})},isEmpty:function(e){return"object"!==_()(e)||0==Object.keys(e).length}},svg:{create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.createElementNS("http://www.w3.org/2000/svg","svg");return a=Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e,height:t,viewBox:"0 0 ".concat(e," ").concat(t)},a),l.element.setAttributes(n,a),n},drawText:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_=document.createElementNS("http://www.w3.org/2000/svg","text");return n=Object.assign({x:e,y:t},n),l.element.setAttributes(_,n),_.innerHTML=a,_},drawCircle:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_=document.createElementNS("http://www.w3.org/2000/svg","circle");return n=Object.assign({cx:e,cy:t,r:a},n),l.element.setAttributes(_,n),_},drawLine:function(e,t,a,n){var _=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=document.createElementNS("http://www.w3.org/2000/svg","line");return _=Object.assign({x1:e,y1:t,x2:a,y2:n},_),l.element.setAttributes(i,_),i},drawPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElementNS("http://www.w3.org/2000/svg","path");return t=Object.assign({d:e},t),l.element.setAttributes(a,t),a},drawSector:function(e,t,a,n,_,i,r){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=document.createElementNS("http://www.w3.org/2000/svg","path");return s=Object.assign({d:l.svg.getSectorD(e,t,a,n,_,i,r),fill:"none"},s),l.element.setAttributes(c,s),c},getSectorD:function(e,t,a,n,_,i,r){var l=Math.PI/180,s=a*Math.cos(i*l)+e,c=-a*Math.sin(i*l)+t,o=a*Math.cos(_*l)+e,u=-a*Math.sin(_*l)+t,d=n*Math.cos(_*l)+e,p=-n*Math.sin(_*l)+t,m=n*Math.cos(i*l)+e,E=-n*Math.sin(i*l)+t;return"M".concat(s," ").concat(c,"A").concat(a," ").concat(a," 0 0 ").concat(1==r?0:1," ").concat(o," ").concat(u,"L").concat(d," ").concat(p,"A").concat(n," ").concat(n," 0 0 ").concat(r," ").concat(m," ").concat(E,"Z")},createAnimate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({attributeName:e,repeatCount:"indefinite"},t);var a=document.createElementNS("http://www.w3.org/2000/svg","animate");return l.element.setAttributes(a,t),a},drawImage:function(e,t,a,n,_){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=document.createElementNS("http://www.w3.org/2000/svg","image");return i=Object.assign({x:t,y:a,width:n,height:_},i),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),l.element.setAttributes(r,i),r},createEmpty:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElementNS("http://www.w3.org/2000/svg",e);return l.element.setAttributes(a,t),a},createSimpleImagePattern:function(e,t,a,n){var _=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=document.createElementNS("http://www.w3.org/2000/svg","pattern");return _=Object.assign({width:a,height:n,id:e},_),l.element.setAttributes(r,_),r.appendChild(l.svg.drawImage(0,0,t,a,n,i)),r},createLinearGradient:function(e,t,a,n,_,i){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return r=Object.assign({id:e,x1:t,y1:a,x2:n,y2:_},r),l.element.setAttributes(s,r),i.forEach(function(e){return s.appendChild(l.svg.createEmpty("stop",e))}),s},createRadialGradient:function(e,t,a,n,_){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return i=Object.assign({id:e,cx:t,cy:a,r:n},i),l.element.setAttributes(r,i),_.forEach(function(e){return r.appendChild(l.svg.createEmpty("stop",e))}),r}}};t.a=l},function(e,t,a){"use strict";var n=a(4),_=a.n(n),i=a(5),r=a.n(i),l=a(6),s=a.n(l),c=a(1),o=a(7);function u(e,t){function a(e){var a=t.selectSkillElement(this.getAttribute(Object(o.a)().data_skillElementNo));if(t.status.currentSkill!==a){var n=this.parentNode.querySelector(".cur");n&&n.classList.remove("cur"),this.classList.add("cur"),t.clearSkillRecord(),t.initCurrentSkill(a),t.updateSkillHTML()}}var n="../src/picture/skill_icons/stc_"+e.parent.no+"/st_"+e.no+"/",_=e.drawTreeCode||"S E S E S E S L S E S E S E S L S E S E S E S L S E S E S E S",i={gridWidth:41,svgPadding:40,textMargin:5,iconPadding:3},r=i.gridWidth,l=i.svgPadding,s=i.textMargin,u=i.iconPadding;function d(e){return l+r/2+e*r+s}var p=c.a.svg.drawLine,m=c.a.svg.drawCircle,E=c.a.svg.drawText,h=document.createDocumentFragment(),f=c.a.svg.createEmpty("defs");h.appendChild(f);var O=0,v=0,b=0,g=0;_.toUpperCase().replace(/([A-Z])(\d+)/g,function(e,t,a){return Array(parseInt(a,10)).fill(t).join(" ")}).split(" ").forEach(function(_){if(g!=e.skills.length){var i,l,M=_.charAt(0);switch(M){case"L":O>b&&(b=O),O=0,++v;break;case"E":++O;break;case"D":case"S":var P;if(_.slice(1).split("").forEach(function(e){var t;"R"===e&&(t=p(d(O),d(v),d(O+1),d(v))),"B"===e&&(t=p(d(O),d(v),d(O),d(v+1))),h.appendChild(t)}),"D"===M&&(P=m(d(O),d(v),2,{class:"dot"})),"S"===M){P=document.createDocumentFragment();var T=e.skills.find(function(e){return e.drawOrder===g}),D=T.name||"?",C=m(d(O),d(v),r/2,{class:"skill-circle"});if(P.appendChild(C),"?"!==D)if("@lock"!==D){P.appendChild(E(d(O),d(v)-r/2-s,D,{class:"skill-name"})),l=T,(i=C).addEventListener("click",a),i.setAttribute(Object(o.a)().data_skillElementNo,t.getSkillElementNoStr(l));var L="si_"+T.no,A=c.a.svg.createEmpty("pattern",{id:L,width:r,height:r});A.appendChild(m(r/2,r/2,r/2,{fill:"url(#skill-icon-bg)","stroke-width":0})),A.appendChild(c.a.svg.drawImage(n+L+".png",u,u,r-2*u,r-2*u)),f.appendChild(A),C.style.fill="url(#"+L+")"}else C.classList.add("lock");++g}h.appendChild(P),++O;break;case"H":h.appendChild(p(d(O),d(v),d(O+1),d(v))),++O;break;case"V":h.appendChild(p(d(O),d(v),d(O),d(v+1))),++O}}});var M=c.a.svg.create(d(b)-r/2+l,d(v)+r/2+l+s,{"xmlns:xlink":"http://www.w3.org/1999/xlink"});return M.appendChild(h),M}var d=a(24),p=a(3);function m(e){return Object(p.d)("Skill Query/Controller/"+e)}var E=Symbol(),h=Symbol(),f=Symbol(),O=Symbol(),v=function(){function e(t){_()(this,e),this.MAIN_NODE=null,this.skillRoot=t,this.status={skillRoot:t,mainWeapon:-1,subWeapon:-1,bodyArmor:-1,skillLevel:10,characterLevel:190,currentSkill:null,stackValues:{},stackNames:{},showOriginalFormula:!1,skillRecords:[],skillEquipmentRecords:[],branchDevelopmentMode:!1}}return r()(e,[{key:"initSkillQueryHTML",value:function(e){var t=this.skillRoot;this.MAIN_NODE=e;var a=[P.TYPE,T.TYPE,D.TYPE,E,h,f,D.CATEGORY_EQUIPMENT,O,C.TYPE],n=document.createDocumentFragment();a.forEach(function(e){var a=this.getSkillElementScope(e);switch(n.appendChild(a),e){case P.TYPE:a.appendChild(this.createSkillQueryScopeHTML(t,Object(o.a)().menu));break;case T.TYPE:t.skillTreeCategorys.forEach(function(e){a.appendChild(this.createSkillQueryScopeHTML(e,Object(o.a)().menu))},this);break;case O:a.classList.add("hidden");case E:case h:case f:a.appendChild(this.createSkillQueryScopeHTML(null,e))}},this),e.appendChild(n),this.status.skill_from_where_scope=c.a.element.simpleCreateHTML("div",["show_skill_from_where","hidden"]);var _=this;document.querySelector("footer .switch_branch_development_mode").addEventListener("click",function(e){_.status.branchDevelopmentMode=!_.status.branchDevelopmentMode,_.updateSkillHTML()});var i=c.a.svg.create(),r=c.a.svg.createEmpty("defs"),l=41,s=c.a.svg.drawCircle,u=c.a.svg.createEmpty("pattern",{width:1,height:1,id:"skill-icon-lock"}),d=c.a.svg.create(l,l,{x:8.5,y:8.5});d.innerHTML='<path fill="var(--primary-light)" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/>',u.appendChild(s(l/2,l/2,l/2,{fill:"#FFF","stroke-width":0})),u.appendChild(d),r.appendChild(u);var p=c.a.svg.createLinearGradient("skill-icon-bg",".5","0",".5","1",[{offset:"0%","stop-color":"#FFF"},{offset:"50%","stop-color":"var(--primary-light)"},{offset:"100%","stop-color":"var(--primary-light-2)"}]),m=c.a.svg.createRadialGradient("skill-icon-bg-l2",".5",".5","1",[{offset:"0%","stop-color":"transparent"},{offset:"53%","stop-color":"transparent"},{offset:"62%","stop-color":"#FFF"},{offset:"65%","stop-color":"#FFF"}],{fx:".5",fy:".1"});r.appendChild(p),r.appendChild(m);var v=c.a.svg.createLinearGradient("skill-icon-stroke",".5","0",".5","1",[{offset:"0%","stop-color":"var(--primary-light)"},{offset:"100%","stop-color":"var(--primary-light-3)"}]);r.appendChild(v),i.appendChild(r),this.MAIN_NODE.appendChild(i)}},{key:"getSkillElementScope",value:function(e){var t,a=(t={},s()(t,P.TYPE,"SkillRoot_scope"),s()(t,T.TYPE,"SkillTreeCategory_scope"),s()(t,D.TYPE,"SkillTree_scope"),s()(t,C.TYPE,"Skill_scope"),s()(t,E,"SkillLevel_scope"),s()(t,h,"CharacterLevel_scope"),s()(t,f,"SwitchDisplayMode_scope"),s()(t,D.CATEGORY_EQUIPMENT,"SkillEquipment_scope"),s()(t,O,"SkillRecord_scope"),t),n=this.MAIN_NODE.getElementsByClassName(a[e])[0];return n||(n=document.createElement("div")).classList.add(a[e]),n}},{key:"getSkillElementNoStr",value:function(e){for(var t="";e.parent;)t=e.findLocation()+(""!=t?"-":"")+t,e=e.parent;return t}},{key:"selectSkillElement",value:function(e){var t=e.split("-"),a=null;return t.forEach(function(e,t){switch(e=parseInt(e,10),t){case 0:a=this.skillRoot.skillTreeCategorys[e];break;case 1:a=a.skillTrees[e];break;case 2:a=a.skills[e];break;case 3:a=a.branchs[e]}},this),a}},{key:"skillRecord",value:function(e){this.status.skillRecords.push(this.status.currentSkill);var t=this.status,a=t.mainWeapon,n=t.subWeapon,_=t.bodyArmor;this.status.skillEquipmentRecords.push({mainWeapon:a,subWeapon:n,bodyArmor:_}),this.initCurrentSkill(e),this.initEquipmentScope(e.parent)}},{key:"popSkillRecord",value:function(){this.initCurrentSkill(this.status.skillRecords.pop()),this.initEquipmentScope(this.status.currentSkill.parent,this.status.skillEquipmentRecords.pop())}},{key:"clearSkillRecord",value:function(){var e=this.status.skillRecords;e.splice(0,e.length)}},{key:"equipmentCheck",value:function(e,t){return-1==e.mainWeapon&&-1==e.subWeapon&&-1==e.bodyArmor||(0===e.config.equipmentConfirm?-1!=t.mainWeapon&&t.mainWeapon==e.mainWeapon||0===e.mainWeapon&&9===t.mainWeapon&&void 0===e.parent.effects.find(function(e){return 9==e.mainWeapon})||(-1!=t.subWeapon&&t.subWeapon==e.subWeapon||-1!=t.bodyArmor&&t.bodyArmor==e.bodyArmor):1===e.config.equipmentConfirm?t.mainWeapon==e.mainWeapon&&(0!==e.mainWeapon||9!==t.mainWeapon||void 0===e.parent.effects.find(function(e){return 9==e.mainWeapon}))&&(t.subWeapon==e.subWeapon&&t.bodyArmor==e.bodyArmor):void 0)}},{key:"setCurrentEquipment",value:function(e,t){var a=this,n=this.status;if(void 0!==n[e]){if(-1!==t){var _=[[5],[0,1,2,3,4,5],[1,2,3,4],[5],[3,5],[0,1,2,3,4,5],[4,5],[1,3,4,5],[1,3,4,5],[0,1,2,3,4,5],[5]];switch(e){case"mainWeapon":if(-1!==_[t].indexOf(n.subWeapon)){var i=this.getSkillElementScope(D.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(o.a)().data_subWeapon,'="-1"]'));i?i.click():n.subWeapon=-1}break;case"subWeapon":if(-1!==n.mainWeapon&&-1!==_[n.mainWeapon].indexOf(t)){var r=this.getSkillElementScope(D.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(o.a)().data_mainWeapon,'="-1"]'));r?r.click():n.mainWeapon=-1}}}n[e]=t,this.getSkillElementScope(D.TYPE).querySelectorAll(".skill-circle").forEach(function(e){var t=e.getAttribute(Object(o.a)().data_skillElementNo);null!==t&&(void 0===a.selectSkillElement(t).effects.find(function(e){return a.equipmentCheck(e,n)})?e.classList.add("disable"):e.classList.remove("disable"))})}else console.warn("Unknow equipment field name")}},{key:"initCurrentSkill",value:function(e){this.status.currentSkill=e,e.checkData()&&(c.a.object.empty(this.status.stackValues),this.status.stackValues=null);var t=this.getSkillElementScope(O);t.classList.remove("hidden"),this.status.skillRecords.length>0?t.querySelector(".back_button").classList.remove("hidden"):t.querySelector(".back_button").classList.add("hidden"),t.querySelector("div.current_skill").innerHTML=e.name}},{key:"updateSkillHTML",value:function(){var e=this.status.currentSkill;if(e){var t=this.getSkillElementScope(C.TYPE);c.a.element.removeAllChild(t),t.appendChild(this.createSkillQueryScopeHTML(e,C.CATEGORY_MAIN))}}},{key:"initEquipmentScope",value:function(e,t){var a=this.createSkillQueryScopeHTML(e,D.CATEGORY_EQUIPMENT),n=this.getSkillElementScope(D.CATEGORY_EQUIPMENT);if(c.a.element.removeAllChild(n),null!==a){n.appendChild(a),t&&Object.assign(this.status,t);var _=this.getSkillElementScope(D.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(o.a)().data_bodyArmor,'="').concat(this.status.bodyArmor,'"]'));_&&_.click(),(_=this.getSkillElementScope(D.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(o.a)().data_mainWeapon,'="').concat(this.status.mainWeapon,'"]')))&&_.click()}}},{key:"createSkillQueryScopeHTML",value:function(e,t){var a=this;switch(null!==e?e.TYPE:t){case P.TYPE:switch(t){case Object(o.a)().menu:var n=this,_=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");n.getSkillElementScope(T.TYPE);var a=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),_=n.getSkillElementScope(T.TYPE).querySelectorAll("div._menu"),i=Array.from(_).find(function(e){return!e.classList.contains("hidden")});i&&i.classList.add("hidden"),_[a].classList.remove("hidden"),c.a.element.removeAllChild(n.getSkillElementScope(D.TYPE)),c.a.element.removeAllChild(n.getSkillElementScope(C.TYPE)),c.a.element.removeAllChild(n.getSkillElementScope(D.CATEGORY_EQUIPMENT)),n.getSkillElementScope(O).classList.add("hidden");var r=_[a].querySelector("li.cur");r&&r.click()},i=document.createElement("div");i.className="_"+t;var r=document.createDocumentFragment();e.skillTreeCategorys.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name,t.setAttribute(Object(o.a)().data_skillElementNo,n.getSkillElementNoStr(e)),t.addEventListener("click",_),r.appendChild(t)});var l=document.createElement("ul");return l.appendChild(r),i.appendChild(l),i}case T.TYPE:switch(t){case Object(o.a)().menu:var s=this,v=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");var a=s.getSkillElementScope(D.TYPE);a.innerHTML="";var n=s.selectSkillElement(this.getAttribute(Object(o.a)().data_skillElementNo));a.appendChild(s.createSkillQueryScopeHTML(n,D.CATEGORY_DRAW_TREE)),s.initEquipmentScope(n),c.a.element.removeAllChild(s.getSkillElementScope(C.TYPE)),s.getSkillElementScope(O).classList.add("hidden"),s.status.currentSkill=null},b=document.createElement("div");b.className="_"+t,b.classList.add("hidden");var g=document.createDocumentFragment();e.skillTrees.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name,t.setAttribute(Object(o.a)().data_skillElementNo,s.getSkillElementNoStr(e)),t.addEventListener("click",v),g.appendChild(t)});var M=document.createElement("ul");return M.appendChild(g),b.appendChild(M),b}case D.TYPE:switch(t){case D.CATEGORY_DRAW_TREE:return u(e,this);case D.CATEGORY_TABLE:var L=e,A=L.parent.findLocation(),j=L.findLocation(),y=this,k=function(e){var t=y.selectSkillElement(this.getAttribute(Object(o.a)().data_skillElementNo));if(!this.classList.contains("disable")&&y.status.currentSkill!==t){var a=this.parentNode.parentNode.getElementsByClassName("cur")[0];a&&a.classList.remove("cur"),this.classList.add("cur"),y.clearSkillRecord(),y.initCurrentSkill(t),y.updateSkillHTML()}},I=SkillTreeTable(SkillTreeTableData(A,j)),S=-1;return Array.from(I.getElementsByTagName("td")).forEach(function(e){if("1"!=e.getAttribute("data-empty")){++S;var t=L.skills[S];void 0!==t?"@lock"!=t.name?(e.innerHTML=t.name,e.setAttribute(Object(o.a)().data_skillElementNo,y.getSkillElementNoStr(t)),e.addEventListener("click",k)):e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path opacity=".87" d="M0 0h24v24H0V0z"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>':e.innerHTML="-"}}),I;case D.CATEGORY_EQUIPMENT:var w=this,R=function(e){for(var t=["mainWeapon","subWeapon","bodyArmor"],a=[this.getAttribute(Object(o.a)().data_mainWeapon),this.getAttribute(Object(o.a)().data_subWeapon),this.getAttribute(Object(o.a)().data_bodyArmor)],n=0;n<a.length;++n){var _=a[n];if(null!==_&&""!==_)return w.setCurrentEquipment(t[n],parseInt(_,10)),this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),void w.updateSkillHTML()}},B=[],W=[],U=[];e.skills.forEach(function(e){e.effects.forEach(function(e){var t=e.mainWeapon,a=e.subWeapon,n=e.bodyArmor;-1==B.indexOf(t)&&B.push(t),-1==W.indexOf(a)&&W.push(a),-1==U.indexOf(n)&&U.push(n)})});var K=document.createDocumentFragment(),x=["mainWeapon","subWeapon","bodyArmor"];return[B,W,U].forEach(function(e,t){if(0!==e.length&&(1!=e.length||-1!=e[0])){var n,_,i,r;switch(e){case B:r=Object(o.a)().data_mainWeapon,i=m("main weapon"),n=["","","","","","","","","","",""],_=Object(p.d)("Skill Query/Analysis Skill/Main Weapon List");break;case W:r=Object(o.a)().data_subWeapon,i=m("sub weapon"),n=["","","","","","",""],_=Object(p.d)("Skill Query/Analysis Skill/Sub Weapon List");break;case U:r=Object(o.a)().data_bodyArmor,i=m("body armor"),n=["","","",""],_=Object(p.d)("Skill Query/Analysis Skill/Body Armor List")}var l=null,s=!1,c=document.createElement("ul");e.forEach(function(e){var i=document.createElement("li");i.setAttribute(r,e),i.addEventListener("click",R),-1!=e?(i.innerHTML='<span class="icon">'.concat(n[e],'</span><span class="value">').concat(_[e],"</span>"),c.appendChild(i),s||(i.classList.add("cur"),a.status[x[t]]=e,s=!0)):(i.innerHTML='<span class="icon"></span><span class="value">'.concat(m("equipment: unlimited"),"</span>"),l=i)}),null!==l&&c.appendChild(l);var u=document.createElement("div"),d=document.createElement("div");d.innerHTML=i,u.appendChild(d),u.appendChild(c),K.appendChild(u)}}),0!=K.childElementCount?K:null}case C.TYPE:switch(t){case C.CATEGORY_MAIN:if(e.checkData())return Object(d.a)(this.status);var N=document.createElement("div");return N.classList.add("no_data"),N.innerHTML="此技能資料尚未更新。",N}case h:var Y=this,H=c.a.element.simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),F=c.a.element.simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),q=c.a.element.simpleCreateHTML("input","mid");q.value=this.status.characterLevel;var V=function(e){var t=parseInt(q.value,10);switch(this.getAttribute("data-ctr")){case"-":t-=10;break;case"+":t+=10}t>190?t=190:t<0&&(t=0),q.value=t,Y.status.characterLevel=t,Y.updateSkillHTML()};H.setAttribute("data-ctr","-"),H.addEventListener("click",V),F.setAttribute("data-ctr","+"),F.addEventListener("click",V),q.type="number",q.addEventListener("change",V),q.addEventListener("focus",function(e){this.select()});var G=document.createDocumentFragment();return G.appendChild(c.a.element.simpleCreateHTML("div","title",Object(p.d)("Skill Query/Analysis Skill/character level"))),G.appendChild(H),G.appendChild(q),G.appendChild(F),G;case E:for(var z=this,Q=function(e){var t=z.status.currentSkill;this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),z.status.skillLevel=parseInt(this.getAttribute(Object(o.a)().data_skillLevel),10),null!=t&&z.updateSkillHTML()},X=document.createElement("ul"),$=1;$<=10;++$){var Z=c.a.element.simpleCreateHTML("li",["Cyteria","Button","simple"],"Lv. "+$);Z.setAttribute(Object(o.a)().data_skillLevel,$),Z.addEventListener("click",Q),$==this.status.skillLevel&&Z.classList.add("cur"),X.appendChild(Z)}return X;case f:var J=this,ee=document.createDocumentFragment(),te=document.createElement("span");return te.appendChild(c.a.element.simpleCreateHTML("span","icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18.65 8.35l-2.79 2.79c-.32.32-.1.86.35.86H18c0 3.31-2.69 6-6 6-.79 0-1.56-.15-2.25-.44-.36-.15-.77-.04-1.04.23-.51.51-.33 1.37.34 1.64.91.37 1.91.57 2.95.57 4.42 0 8-3.58 8-8h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01zM6 12c0-3.31 2.69-6 6-6 .79 0 1.56.15 2.25.44.36.15.77.04 1.04-.23.51-.51.33-1.37-.34-1.64C14.04 4.2 13.04 4 12 4c-4.42 0-8 3.58-8 8H2.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79c.31-.31.09-.85-.36-.85H6z"/></svg>')),te.appendChild(c.a.element.simpleCreateHTML("span","title",m("switch display"))),te.addEventListener("click",function(e){J.status.showOriginalFormula=!J.status.showOriginalFormula,J.updateSkillHTML()}),ee.appendChild(te),ee;case O:var ae=this,ne=document.createDocumentFragment(),_e=c.a.element.simpleCreateHTML("div","back_button");_e.appendChild(c.a.element.simpleCreateHTML("span","icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.71 15.88L10.83 12l3.88-3.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.39.39-1.03 0-1.42z"/></svg>')),_e.appendChild(c.a.element.simpleCreateHTML("span","caption",Object(p.d)("Skill Query/button text/back"))),_e.addEventListener("click",function(e){ae.popSkillRecord()});var ie=c.a.element.simpleCreateHTML("div","current_skill");return ne.appendChild(_e),ne.appendChild(c.a.element.simpleCreateHTML("div","tip",m("current skill"))),ne.appendChild(ie),ne}}}]),e}(),b=a(8),g=a(10);function M(){var e=arguments;Array.from(arguments).forEach(function(t,a){null==t&&(console.log("argument[".concat(a,"] of Constructor is null")),console.log(e))})}a.d(t,"d",function(){return P}),a.d(t,"f",function(){return T}),a.d(t,"e",function(){return D}),a.d(t,"a",function(){return C}),a.d(t,"c",function(){return L}),a.d(t,"b",function(){return A});var P=function(){function e(){_()(this,e),this.skillTreeCategorys=[],this.controller=new v(this),this.TYPE=e.TYPE}return r()(e,[{key:"newElement",value:function(e,t){if(e==T.TYPE){var a=t.name,n=t.no;M(n,a);var _=new T(this,n,a);return this.skillTreeCategorys.push(_),_}return null}},{key:"findSkillByName",value:function(e){var t=void 0;return this.skillTreeCategorys.forEach(function(a){t||a.skillTrees.forEach(function(a){if(!t){var n=a.skills.find(function(t){return t.name===e});void 0!==n&&(t=n)}})}),t}}]),e}();P.TYPE=Symbol("SkillRoot");var T=function(){function e(t,a,n){_()(this,e),this.parent=t,this.no=a,this.name=n,this.skillTrees=[],this.TYPE=e.TYPE}return r()(e,[{key:"newElement",value:function(e,t){if(e==D.TYPE){var a=t.name,n=t.no;M(n,a);var _=new D(this,n,a);return this.skillTrees.push(_),_}return null}},{key:"findLocation",value:function(){return this.parent.skillTreeCategorys.indexOf(this)}}]),e}();T.TYPE=Symbol("SkillTreeCategory");var D=function(){function e(t,a,n){_()(this,e),this.parent=t,this.no=a,this.name=n,this.skills=[],this.TYPE=e.TYPE}return r()(e,[{key:"init",value:function(e){this.drawTreeCode=e}},{key:"newElement",value:function(e,t){if(e==C.TYPE){var a=t.name,n=t.no;M(n,a);var _=new C(this,n,a);return this.skills.push(_),_}return null}},{key:"findLocation",value:function(){return this.parent.skillTrees.indexOf(this)}}]),e}();D.TYPE=Symbol("SkillTree"),D.CATEGORY_TABLE=Symbol(),D.CATEGORY_DRAW_TREE=Symbol(),D.CATEGORY_EQUIPMENT=Symbol();var C=function(){function e(t,a,n){_()(this,e),this.parent=t,this.no=a,this.name=n,this.effects=[],this.defaultEffect=null,this.caption="",this.TYPE=e.TYPE}return r()(e,[{key:"init",value:function(e,t){this.previous=e,this.drawOrder=t}},{key:"newElement",value:function(e,t){if(e==L.TYPE){var a=t.mainWeapon,n=t.subWeapon,_=t.bodyArmor;M(a,n,_);var i=new L(this,a,n,_);return this.effects.push(i),i}return null}},{key:"findLocation",value:function(){return this.parent.skills.indexOf(this)}},{key:"setDefaultEffect",value:function(e){return this.defaultEffect=e,this}},{key:"checkData",value:function(){return void 0!==this.defaultEffect&&null!==this.defaultEffect}}]),e}();C.TYPE=Symbol("Skill"),C.CATEGORY_MAIN=Symbol();var L=function(){function e(t,a,n,i){_()(this,e),this.parent=t,this.branchs=[],this.mainWeapon=a,this.subWeapon=n,this.bodyArmor=i,this.attributes={},this.config={equipmentConfirm:0},this.TYPE=e.TYPE}return r()(e,[{key:"newElement",value:function(e,t){if(e==A.TYPE){var a=t.no,n=t.name;M(a,n);var _=new A(this,a,n);return this.branchs.push(_),_}return null}},{key:"findLocation",value:function(){return this.parent.effects.indexOf(this)}},{key:"appendAttribute",value:function(e,t){return null!=t&&(this.attributes[e]=t),this}},{key:"setConfig",value:function(e){return Object.assign(this.config,e),this}}]),e}();L.TYPE=Symbol("SkillEffect"),L.MP_COST=Symbol("mp_cost"),L.RANGE=Symbol("range"),L.SKILL_TYPE=Symbol("skill_type"),L.IN_COMBO=Symbol("in_combo"),L.ACTION_TIME=Symbol("action_type"),L.CASTING_TIME=Symbol("casting_time");var A=function(){function e(t,a,n){_()(this,e),this.parent=t,this.no=a,this.name=n,this.branchAttributes={},this.stats=[],this.TYPE=e.TYPE}return r()(e,[{key:"appendBranchAttribute",value:function(e,t){return this.branchAttributes[e]=t,this}},{key:"findLocation",value:function(){return this.parent.branchs.indexOf(this)}},{key:"appendStat",value:function(e,t,a){var n;switch(a){case"":n=g.a.TYPE_CONSTANT;break;case"%":n=g.a.TYPE_MULTIPLIER;break;case"~":n=g.a.TYPE_TOTAL}var _=b.a.CharacterSystem.findStatBase(e).createSimpleStat(n,t);return this.stats.push(_),_}},{key:"isEmpty",value:function(){return c.a.object.isEmpty(this.branchAttributes)&&0==this.stats.length}}]),e}();A.TYPE=Symbol("SkillBranch")},function(e,t,a){"use strict";var n={"Page Title":"布偶的魔法書",global:{second:"秒",cancel:"取消"}},_={"Page Title":"Cy's Grimoire",global:{second:" sec",cancel:"cancel"}},i={};function r(e,t){t=t.split("/");for(var a=0,n=e;a!==t.length;)if(n=n[t[a]],++a,void 0===n)return;return n}function l(e){Object.assign(n,e.zh_tw),Object.assign(_,e.en),Object.assign(i,e.ja)}function s(e,t){var a=[_,n,i],l=r(a[1],e);if(void 0===l){var s=!1;return a.forEach(function(t){s||void 0!==(l=r(t,e))&&(s=!0)}),void 0===l?(console.warn("[Unknow Language data] id: ".concat(e)),console.log((new Error).stack),console.log(a),"???"):l}return t&&(l=l.replace(/\$(\d+)/,function(e,a){return void 0!==t[a]&&null!==t[a]?t[a]:"?"})),l}function c(){document.querySelectorAll("*[data-langid]").forEach(function(e){e.innerHTML=s(e.getAttribute("data-langid")),e.removeAttribute("data-langid")})}a.d(t,"a",function(){return s}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return c});t.d=s},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}},function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";var n={menu:"menu",from:Symbol(),data_skillElementNo:"data-seno",data_mainWeapon:"data-mainw",data_subWeapon:"data-subw",data_bodyArmor:"data-armor",data_branchIndex:"data-bi"};t.a=function(){return n}},function(e,t,a){"use strict";t.a={}},function(e,t,a){"use strict";a.d(t,"c",function(){return _}),a.d(t,"b",function(){return i}),a.d(t,"a",function(){return r});var n={node_id:"loading-page"};function _(e){return new Promise(function(t,a){var _=document.createElement("div");_.innerHTML=e,document.querySelector("div#".concat(n.node_id," > div.msg")).appendChild(_),t()})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.createElement("div");a.innerHTML=e,document.querySelector("div#".concat(n.node_id," > div.msg")).appendChild(a),t&&(no_error=!1)}function r(){document.getElementById(n.node_id).classList.add("hidden")}},function(e,t,a){"use strict";var n=a(4),_=a.n(n),i=a(5),r=a.n(i),l=a(3);function s(e){return Object(l.d)("stat base/"+e)}var c=function(){function e(t,a,n){_()(this,e),this.baseName=t,this.text=a,this.hasMultiplier=n,this.attributes={}}return r()(e,[{key:"appendAttribute",value:function(e,t){return e&&null!=t&&(this.attributes[e]=t),this}},{key:"show",value:function(t,a,n){var _=this;n=Object.assign({processPositiveValue:null,processNegativeValue:null,set_sign:null,calc:!0},n),"number"!=typeof a&&n.calc&&(a=parseFloat(a));var i=function(e,t){var i=n.set_sign?n.set_sign:a<0?"":"+",r=(e=e.split("::")[a<0?1:0]||e).replace("$t",_.text).replace("$u",t).replace("$s",i).replace("$v",n.calc?Math.floor(a):a).replace(/\$(\d+)d/,function(e,t){return a.toFixed(parseInt(t))});return n.processPositiveValue&&a>=0&&(r=n.processPositiveValue(r)),n.processNegativeValue&&a<0&&(r=n.processNegativeValue(r)),r};switch(t){case e.TYPE_CONSTANT:return i(this.attributes.constant_formula||"$t$s$v$u",this.hasMultiplier?"":"%");case e.TYPE_MULTIPLIER:return i(this.attributes.multiplier_formula||"$t$s$v$u","%");case e.TYPE_TOTAL:return i(s("type total: preText")+"$t$s$v$u","%")}}},{key:"getShowData",value:function(t,a){var n="",_="";switch(t){case e.TYPE_CONSTANT:n=this.text,this.hasMultiplier||(_="%"),this.attributes.constant_formula&&!this.attributes.constant_formula.includes("$u")&&(_="");break;case e.TYPE_MULTIPLIER:n=this.text,_="%",this.attributes.multiplier_formula&&!this.attributes.multiplier_formula.includes("$u")&&(_="");break;case e.TYPE_TOTAL:n=s("type total: preText")+this.text,_="%"}return{result:this.show(t,a),title:n,value:a,tail:_}}},{key:"createSimpleStat",value:function(e,t){return new o(this,e,t)}}]),e}();c.TYPE_CONSTANT=Symbol("constant"),c.TYPE_MULTIPLIER=Symbol("multiplier"),c.TYPE_TOTAL=Symbol("total");var o=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_()(this,e),this.base=t,this.type=a,this.value=n}return r()(e,[{key:"show",value:function(e){return this.base.show(this.type,this.value,e)}},{key:"getShowData",value:function(){return this.base.getShowData(this.type,this.value)}},{key:"statValue",value:function(e){return void 0!==e&&(this.value=e),this.value}},{key:"baseName",value:function(){return this.base.baseName}}]),e}();t.a=c},function(e,t,a){e.exports=a(16)},function(e,t,a){"use strict";t.a=function(){return{SkillData:"https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=170573319&single=true&output=csv&range=A:Q",SkillMainData:"https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=2033454381&single=true&output=csv&range=A:D",CharacterStatData:"https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=616452461&single=true&output=csv&range=A:F",TagData:"https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=1107380961&single=true&output=csv&range=A:C",EquipmentData:"https://docs.google.com/spreadsheets/d/e/2PACX-1vRwaGM9CClGkSw-6iUFmdOyIeI-_9i5RvIuHdSCTCUgFCk7GV4v1evt5C79JSG5P66ZGopM2-ZJJaEA/pub?gid=0&single=true&output=csv&range=A:I"}}},function(e,t){function a(e,t,a,n,_,i,r){try{var l=e[i](r),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,_)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(_,i){var r=e.apply(t,n);function l(e){a(r,_,i,l,s,"next",e)}function s(e){a(r,_,i,l,s,"throw",e)}l(void 0)})}}},function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?e.exports=n=function(e){return a(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},n(t)}e.exports=n},function(e,t,a){"use strict";function n(){"1"!==localStorage["main-font-family"]&&document.querySelector("body").classList.add("font1")}a.d(t,"a",function(){return n})},function(e,t,a){var n=function(e){"use strict";var t,a=Object.prototype,n=a.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},i=_.iterator||"@@iterator",r=_.asyncIterator||"@@asyncIterator",l=_.toStringTag||"@@toStringTag";function s(e,t,a,n){var _=t&&t.prototype instanceof E?t:E,i=Object.create(_.prototype),r=new L(n||[]);return i._invoke=function(e,t,a){var n=o;return function(_,i){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===_)throw i;return j()}for(a.method=_,a.arg=i;;){var r=a.delegate;if(r){var l=T(r,a);if(l){if(l===m)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===o)throw n=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=d;var s=c(e,t,a);if("normal"===s.type){if(n=a.done?p:u,s.arg===m)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n=p,a.method="throw",a.arg=s.arg)}}}(e,a,r),i}function c(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var o="suspendedStart",u="suspendedYield",d="executing",p="completed",m={};function E(){}function h(){}function f(){}var O={};O[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(A([])));b&&b!==a&&n.call(b,i)&&(O=b);var g=f.prototype=E.prototype=Object.create(O);function M(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(e){var t;this._invoke=function(a,_){function i(){return new Promise(function(t,i){!function t(a,_,i,r){var l=c(e[a],e,_);if("throw"!==l.type){var s=l.arg,o=s.value;return o&&"object"==typeof o&&n.call(o,"__await")?Promise.resolve(o.__await).then(function(e){t("next",e,i,r)},function(e){t("throw",e,i,r)}):Promise.resolve(o).then(function(e){s.value=e,i(s)},function(e){return t("throw",e,i,r)})}r(l.arg)}(a,_,t,i)})}return t=t?t.then(i,i):i()}}function T(e,a){var n=e.iterator[a.method];if(n===t){if(a.delegate=null,"throw"===a.method){if(e.iterator.return&&(a.method="return",a.arg=t,T(e,a),"throw"===a.method))return m;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var _=c(n,e.iterator,a.arg);if("throw"===_.type)return a.method="throw",a.arg=_.arg,a.delegate=null,m;var i=_.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,m):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(e){if(e){var a=e[i];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var _=-1,r=function a(){for(;++_<e.length;)if(n.call(e,_))return a.value=e[_],a.done=!1,a;return a.value=t,a.done=!0,a};return r.next=r}}return{next:j}}function j(){return{value:t,done:!0}}return h.prototype=g.constructor=f,f.constructor=h,f[l]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},M(P.prototype),P.prototype[r]=function(){return this},e.AsyncIterator=P,e.async=function(t,a,n,_){var i=new P(s(t,a,n,_));return e.isGeneratorFunction(a)?i:i.next().then(function(e){return e.done?e.value:i.next()})},M(g),g[l]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=A,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function _(n,_){return l.type="throw",l.arg=e,a.next=n,_&&(a.method="next",a.arg=t),!!_}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],l=r.completion;if("root"===r.tryLoc)return _("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return _(r.catchLoc,!0);if(this.prev<r.finallyLoc)return _(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return _(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return _(r.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var _=this.tryEntries[a];if(_.tryLoc<=this.prev&&n.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var i=_;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),C(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var _=n.arg;C(a)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:A(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,a){var n=a(20),_=a(21),i=a(22);e.exports=function(e){return n(e)||_(e)||i()}},function(e,t,a){"use strict";var n=a(4),_=a.n(n),i=a(5),r=a.n(i),l=a(10),s=a(12),c=a(3),o={"stat base":{"type total: preText":"總"}},u={"stat base":{"type total: preText":"Total "}},d={},p=function(){function e(){_()(this,e),this.statList=[]}return r()(e,[{key:"init",value:function(){}},{key:"init_statList",value:function(){Object(c.b)({zh_tw:o,en:u,ja:d});var e=this;return new Promise(function(t,a){Papa.parse(Object(s.a)().CharacterStatData,{download:!0,complete:function(a){var n;n=e,a.data.forEach(function(e,t){if(0!=t){var a=n.appendStatBase(e[0],e[1],"無"!=e[2]);e[3]&&a.appendAttribute("constant_formula",e[3]),e[4]&&a.appendAttribute("multiplier_formula",e[4])}}),t()},error:function(e){console.warn("讀取角色能力資料時發生錯誤。"),console.log(e),a()}})})}},{key:"appendStatBase",value:function(e,t,a){var n=new l.a(e,t,a);return this.statList.push(n),n}},{key:"StatList",value:function(){return this.statList}},{key:"findStatBase",value:function(e){return this.StatList().find(function(t){return t.baseName==e})}},{key:"findStatBaseFromText",value:function(e){return this.StatList().find(function(t){return t.text==e})}}]),e}();t.a=p},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(4),_=a.n(n),i=a(5),r=a.n(i),l=a(1),s=a(2),c=function(){function e(){_()(this,e),this.branchs=[],this.attributes={}}return r()(e,[{key:"from",value:function(e){var t=this;return Object.getOwnPropertySymbols(e.attributes).forEach(function(a){t.appendAttribute(a,e.attributes[a])}),e.branchs.forEach(function(e){t.newBranch().from(e)}),this}},{key:"newBranch",value:function(){var e=new o(this);return this.branchs.push(e),e}},{key:"overWrite",value:function(e){var t=this;Object.getOwnPropertySymbols(e.attributes).forEach(function(a){var n=e.attributes[a];""==n&&t.attributes[a]?delete t.attributes[a]:t.appendAttribute(a,n)}),e.branchs.forEach(function(e,a){var n=t.branchs.findIndex(function(t){return"-"!==t.no&&t.no==e.no});-1!=n&&t.branchs[n].overWrite(e)})}},{key:"appendAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"checkData",value:function(){return 0!=this.branchs.length}}]),e}(),o=function(){function e(t){_()(this,e),this.parent=t,this.branchAttributes={},this.stats=[],this.finished=!1}return r()(e,[{key:"from",value:function(e){var t=this;return this.no=e.no,this.name=e.name,this.branchAttributes={},Object.keys(e.branchAttributes).forEach(function(a){t.appendBranchAttribute(a,e.branchAttributes[a])}),e.stats.forEach(function(e){t.appendStat(e.base.baseName,e.value,"").type=e.type}),this}},{key:"appendBranchAttribute",value:function(e,t){var a;return(a=s.b.prototype.appendBranchAttribute).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"findLocation",value:function(){return s.b.prototype.findLocation.call(this)}},{key:"appendStat",value:function(e,t,a){var n;return(n=s.b.prototype.appendStat).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"overWrite",value:function(e){var t=this;if(""===e.name&&e.isEmpty()){var a=this.parent.branchs;a.splice(a.indexOf(this),1)}else""!==e.name&&this.name!=e.name&&(this.name=e.name,l.a.object.empty(this.branchAttributes)),Object.keys(e.branchAttributes).forEach(function(a,n){var _=e.branchAttributes[a];""==_&&t.branchAttributes[a]?delete t.branchAttributes[a]:t.appendBranchAttribute(a,_)}),e.stats.forEach(function(e){var a=t.stats.find(function(t){return e.base===t.base&&e.type===t.type});void 0===a?t.appendStat(e.base.baseName,e.value,"").type=e.type:""==e.value?t.stats.splice(t.stats.indexOf(a),1):a.statValue(e.value)})}},{key:"isEmpty",value:function(){return s.b.prototype.isEmpty.call(this)}},{key:"finish",value:function(){this.finished=!0}},{key:"isFinished",value:function(){return this.finished}}]),e}()},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,a){"use strict";a.d(t,"a",function(){return n});a(2);function n(e){var t=function(e,t){Object.keys(t).forEach(function(a){void 0===e.branchAttributes[a]&&e.appendBranchAttribute(a,t[a])})},a=e.branchAttributes;switch(e.name){case"damage":t(e,{constant:"0",multiplier:"0",type:"single",base:"auto",frequency:"1",title:"normal",judgment:"common",damage_type:"physical"}),"single"!==a.type&&t(e,{end_position:"target",effective_area:"circle"});break;case"stack":t(e,{min:"1",default:"auto"});break;case"effect":case"hit":t(e,{type:"self",condition:"auto"});break;case"heal":t(e,{target:"self",frequency:"1",constant:"0"});break;case"next":t(e,{type:"none"});break;case"poration":t(e,{poration:"auto"});break;case"group":t(e,{expandable:"1",expansion_default:"0"});break;case"passive":case"text":case"tips":case"list":case"head":case"extra":case"reference":case"formula_extra":case"":break;default:return console.warn("Unknow Skill Branch Name."),void console.log(e)}return e}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_CharacterSystem_module_StatBase_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_getBranchHTML_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),_main_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_TempSkillElement_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19),_strings_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7),_InitSkillData_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23),_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8);function branchDevelopmentController(e,t){this.baseEffect=(new _TempSkillElement_js__WEBPACK_IMPORTED_MODULE_7__.a).from(e),this.currentOutput=(new _TempSkillElement_js__WEBPACK_IMPORTED_MODULE_7__.a).from(t)}function getEffectHTML(sef,attr_name,data){var _ICON_DATA,_TITLE_DATA,_TEXT_LIST,safeEval=function safeEval(str){try{return eval(str)}catch(e){return console.warn(e),"?"}},ICON_DATA=(_ICON_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,["","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,["","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,["","","","","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME,""),_ICON_DATA),TITLE_DATA=(_TITLE_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("mp cost")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("range")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("skill type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("damage type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("poration type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("in combo")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("action time")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME,["",Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("casting time"),Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("charging time")]),_TITLE_DATA),TEXT_LIST=(_TEXT_LIST={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("skill type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("damage type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("poration type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("in combo: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("action time: List")),_TEXT_LIST),SLv=data.SLv,CLv=data.CLv,title=TITLE_DATA[attr_name],v=sef.attributes[attr_name],tail=null,icon=Array.isArray(ICON_DATA[attr_name])?ICON_DATA[attr_name][v]:ICON_DATA[attr_name];switch(attr_name){case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME:title=TITLE_DATA[attr_name][sef.attributes[_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE]],tail=Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.d)("global/second");case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST:v=safeEval(v);break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE:v="-"!=v?safeEval(v)+"m":Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("range: no limit");break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME:v=TEXT_LIST[attr_name][v]}var he=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.b)(icon,title,v,tail);return he}function beforeExport(e,t){var a=t.skillRoot.controller;function n(e){var t=a.status.skill_from_where_scope;_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.removeAllChild(t),t.classList.remove("hidden");var n=this.querySelector("div.temp");n||(n=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","temp"),this.appendChild(n)),n.appendChild(t);var _=a.getSkillElementScope(_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.a.TYPE),i=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.convertRemToPixels(1),r=this.getBoundingClientRect(),l=t.getBoundingClientRect(),s=_.getBoundingClientRect(),c=r.left-s.left,o=r.top,u=l.width,d=s.width,p=l.height,m=window.innerHeight;t.style.left="0",c+l.width>d-i?t.style.left=(d-1*u-c)/i-.5+"rem":c<l.width&&(t.style.left=-1*c/i+.5+"rem"),t.style.top=o>m/2?-1*p/i-.5+"rem":r.height/i+.5+"rem";var E=a.selectSkillElement(this.getAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_8__.a)().data_skillElementNo));t.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.d)("Skill Query/Skill Element/skill tree: from"),E.parent.name));var h=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","button_scope"),f=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("span",["Cyteria","Button","simple"],Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.d)("global/cancel"));f.addEventListener("click",function(e){this.parentNode.parentNode.classList.add("hidden"),e.stopPropagation()});var O=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("span",["Cyteria","Button","simple"],Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("button text/to skill"));O.addEventListener("click",function(e){this.parentNode.parentNode.classList.add("hidden"),a.skillRecord(E),e.stopPropagation()}),h.appendChild(f),h.appendChild(O),t.appendChild(h)}function _(e){this.parentNode.querySelector("div.scope1").classList.toggle("hidden"),this.querySelector(".open").classList.toggle("hidden"),this.querySelector(".close").classList.toggle("hidden"),e.stopPropagation()}function i(e){function t(e){return"1"===e.getAttribute("data-expanded")}function a(e){return parseInt(e.getAttribute("data-groupsize"),10)}for(var n=this.parentNode.querySelectorAll(".branch"),_=Array.from(n).indexOf(this);-1!=_&&!n[_].hasAttribute("data-groupsize");)--_;if(-1!=_){var i,r=t(n[_]),l=[],s=[];for(l.push(a(n[_])),s.push(r);_!=n.length&&0!=l.length;)++_,--l[l.length-1],i=n[_],s[s.length-1]?i.classList.add("fadein"):i.classList.remove("fadein"),0==l[l.length-1]&&(l.pop(),s.pop()),n[_].hasAttribute("data-expanded")&&(l.push(a(n[_])),s.push(r?t(n[_]):r));this.setAttribute("data-expanded",r?"0":"1")}}_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_10__.a.TagSystem.controller.processShowTagButton(e.querySelectorAll(".show_tag_button")),e.querySelectorAll("span.skill_from_where_button").forEach(function(e){return e.addEventListener("click",n)}),e.querySelectorAll("div.content > div.scope1").forEach(function(e){if(!e.parentNode.classList.contains("content_line")&&0!==e.childElementCount){var t=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("span","hidden_toggle_button",'<span class="close hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg></span><span class="open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.12 14.71L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"/></svg></span>');t.addEventListener("click",_),e.parentNode.insertBefore(t,e.parentNode.firstChild),t.click()}});var r=e.querySelectorAll(".branch");r.forEach(function(e,t){if(e.hasAttribute("data-groupsize")){e.classList.add("group_content");for(var a=null,n=t+parseInt(e.getAttribute("data-groupsize"),10),_=t+1;_<=n&&_<r.length;++_){var l=r[_];if(l.hasAttribute("data-groupsize")){var s=parseInt(l.getAttribute("data-groupsize"),10);t+=s,n+=s}else if(l.classList.add("group_content"),"1"===l.getAttribute("data-grouptitle")){a=l;break}}a||(a=e),a.addEventListener("click",i),a.classList.add("group_title"),a.click()}}),e.querySelectorAll(".group_content").forEach(function(e){if(!e.classList.contains("group_title")){var t=e.previousSibling;"HR"==t.tagName.toUpperCase()&&_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.remove(t)}})}branchDevelopmentController.prototype={branchDetail:function(e,t,a,n){function _(e){switch(e){case _CharacterSystem_module_StatBase_js__WEBPACK_IMPORTED_MODULE_4__.a.TYPE_CONSTANT:return"";case _CharacterSystem_module_StatBase_js__WEBPACK_IMPORTED_MODULE_4__.a.TYPE_MULTIPLIER:return"%";case _CharacterSystem_module_StatBase_js__WEBPACK_IMPORTED_MODULE_4__.a.TYPE_TOTAL:return"~"}}var i=this.currentOutput.branchs[t.findLocation()],r="-"!==e.no?Object(_InitSkillData_js__WEBPACK_IMPORTED_MODULE_9__.a)(this.baseEffect.branchs.find(function(t){return t.no==e.no})):e,l=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","dev_branchDetail"),s=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","top");s.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("span","_no",e.no)),s.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("span","_name",r.name)),l.appendChild(s);var c=document.createElement("tbody"),o=document.createElement("tr"),u=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td",null,null,{colspan:0!==r.stats.length?3:2});if(u.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","_title",Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("branch development controller/title: default"))),o.appendChild(u),c.appendChild(o),Object.keys(r.branchAttributes).forEach(function(t){var a=document.createElement("tr");a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_name",t));var n=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_value",r.branchAttributes[t]);0!==r.stats.length&&n.setAttribute("colspan",2),a.appendChild(n),void 0===i.branchAttributes[t]&&a.classList.add("by_default"),void 0!==e.branchAttributes[t]&&e.branchAttributes[t]!==r.branchAttributes[t]&&a.classList.add("overwrite"),c.appendChild(a)}),r.stats.forEach(function(t){var a=document.createElement("tr");a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_name",t.base.baseName)),a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_value",t.statValue())),a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_extra",_(t.type))),e.stats.find(function(e){return t.base===e.base&&t.type===e.type&&t.statValue()!=e.statValue()})&&a.classList.add("overwrite"),c.appendChild(a)}),!a&&"-"!==e.no&&n){var d=document.createDocumentFragment(),p=document.createElement("tr"),m=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td",null,null,{colspan:0!==e.stats.length?3:2});m.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("div","_title",Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("branch development controller/title: not default"))),p.appendChild(m),d.appendChild(p),Object.keys(e.branchAttributes).forEach(function(t){var a=document.createElement("tr");a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_name",t));var n=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_value",e.branchAttributes[t]);0!==e.stats.length&&n.setAttribute("colspan",2),a.appendChild(n),d.appendChild(a)}),e.stats.forEach(function(e){var t=document.createElement("tr");t.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_name",e.base.baseName)),t.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_value",e.statValue())),t.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.d)("td","_extra",_(e.type))),d.appendChild(t)}),c.appendChild(d)}var E=document.createElement("table");return E.appendChild(c),l.appendChild(E),l}},__webpack_exports__.a=function(e){var t,a=e.currentSkill,n=e.skillLevel,_=e.characterLevel,i=(new _TempSkillElement_js__WEBPACK_IMPORTED_MODULE_7__.a).from(a.defaultEffect),r=!1;if(a.effects.forEach(function(n){if(!r)return e.skillRoot.controller.equipmentCheck(n,e)?(n!=a.defaultEffect&&i.overWrite(n),t=n,void(r=!0)):void 0}),r){var l=document.createDocumentFragment(),s=[_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME],c=document.createElement("div");c.className="skill_attributes",s.forEach(function(e){if(void 0!==i.attributes[e]){var t=getEffectHTML(i,e,{SLv:n,CLv:_});t&&c.appendChild(t)}}),l.appendChild(c);var o=document.createElement("div");if(o.appendChild(document.createElement("hr")),o.className="skill_branchs",i.checkData()){var u=e.branchDevelopmentMode,d=null;u&&(d=new branchDevelopmentController(a.defaultEffect,i)),i.branchs.forEach(function(e){e.isEmpty()||Object(_InitSkillData_js__WEBPACK_IMPORTED_MODULE_9__.a)(e)}),null===e.stackValues&&(e.stackValues={},_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.object.empty(e.stackNames),i.branchs.forEach(function(t){if("stack"==t.name){var a=t.branchAttributes,n="auto"==a.default?a.min:a.default;e.stackValues[Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.c)(t)]=n,e.stackNames[Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.c)(t)]=t.branchAttributes.name}}));var p=e.stackValues,m=e.stackNames,E=e.showOriginalFormula,h=e.skillRoot,f=null;i.branchs.forEach(function(e){var i=Object(_getBranchHTML_js__WEBPACK_IMPORTED_MODULE_5__.a)(e,{SLv:n,CLv:_,stackNames:m,stackValues:p,showOriginalFormula:E,skillRoot:h,branchDevelopmentMode:u});if(null!==i&&(null!==f&&(o.appendChild(f),o.appendChild(document.createElement("hr"))),f=i),u){var r=t===a.defaultEffect,l=t.branchs.find(function(t){return e.no==t.no});o.appendChild(d.branchDetail(!r&&l?l:e,e,r,void 0!==l))}}),null!==f&&o.appendChild(f)}else{var O=document.createElement("div");O.classList.add("no_data"),O.innerHTML=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("no data"),o.appendChild(O)}return l.appendChild(o),beforeExport(l,e),l}var v=document.createElement("div");return v.classList.add("no_data"),v.innerHTML=Object(_main_js__WEBPACK_IMPORTED_MODULE_6__.a)("equipment not confirm"),v}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_main_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_strings_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),SUFFIX_LIST=["extra","poration","group","formula_extra"],EXTRA_FIX_LIST=["stack"];function getTargetText(e,t){var a={self:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("target type: self"),party:t?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("target type: party & is place"):Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("target type: party"),aura:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("target type: aura"),target:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("target type: target"),none:null}[e];return a}function lightText(e){return'<span class="light">'+e+"</span>"}function darkText(e){return'<span class="dark">'+e+"</span>"}function separateText(e){return'<span class="separate_text">'+e+"</span>"}function markText(e){return lightText(e)}function setTagButton(e){return'<span class="show_tag_button">'+e+"</span>"}function getPorationHTML(e){var t=e.branchAttributes,a={physical:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("physical"),magic:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("magic"),normal_attack:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("normal attack"),none:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("damage poration type: none")},n=Object.assign({},a,{auto:a[t.damage],none:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective poration type: none")});return{one:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("damage poration: title"),a[t.damage]),two:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective poration: title"),n[t.poration])}}function getDamageElementHTML(e){var t={neutral:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: neutral"),fire:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: fire"),water:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: water"),earth:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: earth"),wind:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: wind"),light:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: light"),dark:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: dark"),arrow:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: arrow"),one_hand_sword:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("element: one hand sword")},a=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","skill_attribute"),n=e;return"arrow"!=e&&"one_hand_sword"!=e||(n="multiple"),a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span",["_icon","element_"+n,"element_ball"])),a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span",["_value","element_value"],t[e])),a}function createContentLine(e,t,a){a=Object.assign({headIcon:!0,extrafrgs:null},a);var n=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div",["content","content_line"]),_=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope1"),i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope2");return _.appendChild(e),i.appendChild(t),a.headIcon&&n.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","_icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9.29 15.88L13.17 12 9.29 8.12c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0l4.59 4.59c.39.39.39 1.02 0 1.41L10.7 17.3c-.39.39-1.02.39-1.41 0-.38-.39-.39-1.03 0-1.42z"/></svg>')),n.appendChild(_),n.appendChild(i),void 0!==a.extrafrgs&&null!==a.extrafrgs&&(Array.isArray(a.extrafrgs)?a.extrafrgs.forEach(function(e){return n.appendChild(e)}):n.appendChild(a.extrafrgs)),n}function getBranchHTML(branch,data){if(branch.isEmpty()&&branch.finish(),branch.isFinished())return null;var ICONS={potum:'<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1250pt" height="1250pt" viewBox="0 0 1250 1250" preserveAspectRatio="xMidYMid meet"><g transform="translate(0,1250) scale(0.1,-0.1)" fill="#000000" stroke="none"><path d="M1468 11473 c-29 -34 -57 -98 -75 -173 -15 -62 -18 -111 -16 -277 l2 -201 -102 34 c-112 38 -148 42 -168 18 -15 -18 -20 -114 -8 -164 4 -19 15 -100 24 -180 56 -495 128 -757 306 -1113 76 -153 214 -396 234 -412 7 -6 78 -141 158 -300 364 -728 566 -1026 995 -1466 l163 -168 -50 -203 c-137 -556 -160 -746 -168 -1370 l-5 -428 -55 -82 c-70 -108 -155 -259 -203 -361 -96 -210 -132 -392 -146 -743 l-7 -159 27 -32 c67 -80 199 -105 317 -59 37 14 69 22 73 19 3 -3 8 2 12 11 3 9 15 16 25 16 10 0 62 11 115 25 102 27 198 71 252 118 l34 28 62 -133 c35 -73 79 -160 99 -193 l35 -60 -221 -6 c-231 -6 -245 -8 -492 -40 -169 -23 -172 -23 -310 -44 -354 -53 -385 -59 -435 -85 -45 -23 -42 -7 -42 -205 0 -139 -13 -216 -66 -397 -33 -112 -30 -132 28 -159 33 -16 55 -15 368 12 389 32 865 65 1177 79 264 13 1155 6 1345 -9 74 -6 218 -18 320 -26 221 -19 532 -53 920 -101 157 -19 292 -36 300 -36 8 0 107 9 220 21 113 11 230 23 260 26 30 3 150 14 265 24 950 88 1527 101 2285 51 204 -14 768 -65 993 -91 150 -17 181 -18 205 -7 30 15 28 -14 15 253 -5 103 -2 140 21 264 24 132 25 146 11 167 -8 13 -24 24 -34 24 -10 0 -72 13 -137 29 -467 115 -798 166 -1299 201 -88 7 -183 15 -211 18 l-52 7 80 95 c111 131 206 278 295 455 42 82 77 152 79 154 2 2 31 -19 66 -46 152 -120 255 -176 398 -218 52 -15 163 -61 245 -100 173 -84 230 -105 286 -105 73 0 119 41 148 130 10 32 6 47 -43 175 -168 435 -316 713 -586 1103 -127 183 -128 184 -134 332 -2 63 -7 122 -9 130 -3 8 -11 94 -17 190 -10 158 -18 263 -36 445 -3 33 -12 112 -20 175 -9 63 -18 144 -21 180 -3 36 -9 70 -13 75 -4 6 -13 39 -20 75 -16 81 -73 261 -114 360 -30 72 -31 76 -16 107 8 18 50 68 93 111 42 43 77 86 77 94 0 9 25 41 55 72 30 30 55 59 55 63 1 15 196 243 397 465 155 171 503 524 658 669 154 143 526 469 739 649 293 248 381 320 387 320 10 0 119 180 119 197 0 8 5 23 10 34 23 42 -16 69 -124 89 -33 5 -61 12 -63 13 -2 2 17 22 43 43 72 61 142 134 147 154 7 27 -18 56 -51 63 -52 10 -661 67 -822 76 -219 13 -695 5 -870 -14 -571 -62 -1039 -208 -1763 -551 -295 -140 -1053 -539 -1090 -573 -16 -16 -24 -16 -80 -5 -399 82 -658 113 -957 114 -287 2 -542 -22 -1110 -104 l-235 -34 -110 70 c-194 125 -241 156 -658 427 -423 275 -994 659 -1350 908 -230 161 -773 557 -1107 808 -118 89 -225 167 -237 173 -31 17 -68 15 -85 -5z"/></g></svg>'};function replaceExtraFormulaValue(e,t){t=formulaExtraTexts;var a={STR:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: STR"),DEX:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: DEX"),INT:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: INT"),AGI:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: AGI"),VIT:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: VIT"),BSTR:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: BSTR"),BDEX:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: BDEX"),BINT:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: BINT"),BAGI:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: BAGI"),BVIT:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: BVIT"),shield_refining:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: shield_refining"),dagger_atk:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: dagger_atk"),target_def:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: target_def"),target_level:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: target_level"),guard_power:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill formula: guard_power")};Object.keys(a).forEach(function(t){e=e.replace(new RegExp(t,"g"),a[t])}),e=e.replace(/SLv/g,SLv).replace(/CLv/g,CLv).replace(/stack(?:\[\d+\])?/,function(e){return safeEval(e)}).replace(/&(\d):/g,function(e,a){return t[parseInt(a)]||"(?)"});for(var n=/[a-zA-Z0-9_.]?\(?\d+(?:\.\d+)?[\*\/\-\+]{1}\d+(?:\.\d+)?\)?/g;e.match(n);)e=e.replace(n,function(e){return safeEval(e)});return e=e.replace(/\*/g,"×").replace(/(\d+\.\d+)/g,function(){return 100*parseFloat(RegExp.$1)+"%"})}function safeEval(str,dftv){try{return eval(str)}catch(e){return console.warn("Unable to process: "+str),void 0===dftv?"?":dftv}}function processText(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-1",n=e.branchAttributes,_=null===t||void 0===n[t]?a:n[t];if(_=_.replace(/\$\{([^\}]+)\}([%m]?)/g,function(){return processValue(arguments.length<=1?void 0:arguments[1],{light:!0,tail:arguments.length<=2?void 0:arguments[2]})}).replace(/\(\(((?:(?!\(\().)+)\)\)/g,function(){return separateText(arguments.length<=1?void 0:arguments[1])}).replace(/#([^\s]+)\s(\w?)/g,function(){var e=setTagButton(arguments.length<=1?void 0:arguments[1]);return""!==(arguments.length<=2?void 0:arguments[2])&&(e+=" "),e}),void 0!==n.mark&&n.mark.split(/\s*,\s*/).forEach(function(e){_=_.replace(new RegExp(e,"g"),lightText(e))}),void 0!==n.branch&&n.branch.split(/\s*,\s*/).forEach(function(e){_=_.replace(new RegExp(e,"g"),lightText(e))}),void 0!==n.skill){var i=data.skillRoot.controller,r=data.skillRoot;n.skill.split(/\s*,\s*/).forEach(function(e){_=_.replace(new RegExp(e,"g"),function(e){var t=r.findSkillByName(e);if(void 0===t)return e;var a=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","skill_from_where_button");return a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","skill_name",e)),a.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_3__.a)().data_skillElementNo,i.getSkillElementNoStr(t)),a.outerHTML})})}return void 0!==n.skill_tree&&n.skill_tree.split(/\s*,\s*/).forEach(function(e){_=_.replace(new RegExp(e,"g"),lightText(e))}),_}function processValue(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.split(/\s*,,\s*/),a=Object.assign({calc:!0,tail:"",head:"",suffixText:"",pretext:"",toPercentage:!1,checkHasStack:e[0],light:!1,separateText:e.length>1||data.showOriginalFormula},a),e.forEach(function(e,n){if(0===n)if(data.showOriginalFormula)e=(e=(e=(e=(e=e.replace(/CLv/g,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("character level"))).replace(/SLv/g,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("skill level"))).replace(/\*/g,"×")).replace(/stack\[(\d+)\]/g,function(){return stack_name_list[parseInt(RegExp.$1,10)]})).replace(/stack[\[]{0}/g,function(){return stack_name_list[0]}),t=e;else{if(a.calc){var _=safeEval(e,"?");"?"!==_&&(a.toPercentage&&(_*=100),void 0===_||Number.isInteger(_)||(_=_.toFixed(2)),t=_.toString())}else t=e;a.toPercentage&&(t+="%")}else e=replaceExtraFormulaValue(e),"0"===t?t=e:(e="-"!==e.charAt(0)?"+"+e:e,t+=e)}),t=a.pretext+t,t+=a.suffixText,a.separateText&&!t.match(/^[\d\.]+$/)&&(t=separateText(t)),t=a.head+t,t+=a.tail;var n=document.createElement("span");return a.checkHasStack.includes("stack")?n.classList.add("effect_by_stack"):a.light&&n.classList.add("light"),n.innerHTML=t,n.outerHTML}function processStat(e){var t=e.getShowData(),a=t.value.split(",,"),n=1===a.length&&safeEval(a[0])<0?"":"+",_=processValue(t.value,{tail:t.tail,head:t.title+n});return""===n&&(_=darkText(_)),Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,_)}function getEffectiveAreaHTML(e){var t,a,n,_=e.branchAttributes,i="self"===_.end_position,r=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope1"),l=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","skill_attribute");if(l.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span",["_icon","element_ball","ball_character"])),l.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_value",Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area: character position"))),r.appendChild(l),!i){var s=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","skill_attribute");s.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span",["_icon","element_ball","ball_target"])),s.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_value",Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area: target position"))),r.appendChild(s)}["radius","angle","effective_area","move_distance"].forEach(function(e){if(_[e]){var i,l=_[e];switch(e){case"radius":i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("radius"),t=safeEval(l),l=processValue(l,{tail:"m"});break;case"angle":i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("sector: angle"),a=safeEval(l),l=processValue(l,{tail:"°"});break;case"effective_area":n=_[e],i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area: title"),l={circle:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area type: circle"),line:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area type: line"),sector:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("effective area type: sector")}[l];break;case"move_distance":i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("move distanve: title"),l=processValue(l,{tail:"m"})}r.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,i,l))}});var c,o,u,d,p,m,E=document.createDocumentFragment(),h=function(e){return void 0!==e?10*e:10},f="#ff5fb7",O=void 0===_.move_distance?8:12;switch(n){case"line":case"circle":switch(o=h(i?2*t+2:2*t+O+2),c=h(2*t+2),u=h(t+1),d=c/2,p=i?u:u+h(8),m=d,n){case"circle":var v=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawCircle(p,m,h(t),{fill:"#feeaf5"});E.appendChild(v);var b=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawCircle(p,m,h(t),{stroke:"#FFD1EA",fill:"none"});b.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("stroke",{values:"".concat("#FFD1EA",";").concat(f,";").concat(f),keyTimes:"0;0.2;1",dur:"2.5s"})),E.appendChild(b);break;case"line":var g=u+h(O),M=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawPath("M".concat(u," ").concat(d-h(t)," A").concat(h(t)," ").concat(h(t)," 0 0 0 ").concat(u," ").concat(d+h(t)," L").concat(g," ").concat(d+h(t)," A").concat(h(t)," ").concat(h(t)," 0 0 0 ").concat(g," ").concat(m-h(t)," Z"),{fill:"#feeaf5"});E.appendChild(M);var P=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawCircle(u,d,h(t),{stroke:"#FFD1EA",fill:"none"});P.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("stroke",{id:"a1",values:"".concat("#FFD1EA",";").concat(f,";").concat(f),keyTimes:"0;0.2;1",dur:"1s",repeatCount:"1",begin:"0s;a2.end",fill:"freeze"})),P.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("cx",{id:"a2",values:"".concat(u,";").concat(g,";").concat(g),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),E.appendChild(P)}break;case"sector":o=h(O+6),d=(c=h(O)*Math.sin(a*Math.PI/180)+h(2))/2,p=(u=h(4))+h(8),m=d;t=2;var T=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawSector(u,d,h(0),h(O),a/2,360-a/2,1,{fill:"#feeaf5"});E.appendChild(T);var D=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawSector(u,d,h(0),h(1),a/2,360-a/2,1,{stroke:f});D.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("d",{id:"a1",to:_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.getSectorD(u,d,h(O-2),h(O),a/2,360-a/2,1),dur:"0.4s",repeatCount:1,begin:"0s;a2.end",fill:"freeze"})),D.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("stroke",{id:"a2",to:f,dur:"2s",repeatCount:1,begin:"a1.end"})),E.appendChild(D)}var C=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawCircle(u,d,h(t<=.5&&i?.25:.5),{fill:f});if("1"===_.is_sprint&&C.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.createAnimate("cx",{values:"".concat(u,";").concat(u+h(O),";").concat(u+h(O)),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),E.appendChild(C),!i){var L=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.drawCircle(p,m,h(t>.5?.5:.25),{fill:"#2196f3"});E.appendChild(L)}var A=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_2__.a.svg.create(o,c);A.appendChild(E);var j=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div",["effective_area","content","hidden"]),y=document.createElement("div");return y.appendChild(A),j.appendChild(y),j.appendChild(r),j}for(var SLv=data.SLv,CLv=data.CLv,btype=branch.name,suffix=[],attr=branch.branchAttributes,p=branch.findLocation()+1,c=branch.parent.branchs[p];void 0!==c&&-1!=SUFFIX_LIST.indexOf(c.name)&&!c.isEmpty();)suffix.push(c),c=branch.parent.branchs[++p];var extra_fix=branch.parent.branchs.filter(function(e){return-1!=EXTRA_FIX_LIST.indexOf(e.name)}),stack_branch_list=extra_fix.filter(function(e){return"stack"==e.name&&-1!=(attr.stack_id||"").split(",").indexOf(e.branchAttributes.id)}),stack_value_list=stack_branch_list.map(function(e){return safeEval(data.stackValues[Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)])}),stack_name_list=stack_branch_list.map(function(e){return data.stackNames[Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)]||Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/stack/base name")+e.branchAttributes.id}),stack=stack_value_list.length>1?stack_value_list:stack_value_list[0],he=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div",["branch","branch_"+btype]);"1"!==attr.is_mark||data.branchDevelopmentMode||he.classList.add("is_mark");var group=suffix.find(function(e){return"group"==e.name});if(void 0!==group){var _attr=group.branchAttributes;he.setAttribute("data-groupsize",_attr.size),_attr.expandable&&he.setAttribute("data-expanded","1"===_attr.expansion_default?"0":"1")}"1"===attr.is_group_title&&he.setAttribute("data-grouptitle","1");var formulaExtraTexts=(t=suffix.find(function(e){return"formula_extra"==e.name}),void 0!==t?t.branchAttributes.texts.split(/\s*,\s*/):[]),t;switch(btype){case"stack":var stk=branch,left=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","ctr_button",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),right=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","ctr_button",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),mid=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("input","mid"),unit=void 0!==stk.branchAttributes.unit?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","unit",stk.branchAttributes.unit):null,ov=data.stackValues[Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.c)(branch)];mid.value=ov,null===unit?(mid.style.width="2rem",mid.style.textAlign="center"):mid.style.width=.6*String(ov).length+.2+"rem";var maxv=parseInt(safeEval(stk.branchAttributes.max),10),minv=parseInt(safeEval(stk.branchAttributes.min),10),ctr_listener=function(e){var t=parseInt(mid.getAttribute("data-maxv"),10),a=parseInt(mid.getAttribute("data-minv"),10),n=parseInt(mid.value,10);switch(this.getAttribute("data-ctr")){case"-":--n;break;case"+":++n}n>t?n=t:n<a&&(n=a),n=String(n),mid.value=n,data.stackValues[Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.c)(stk)]=n,data.skillRoot.controller.updateSkillHTML()};left.setAttribute("data-ctr","-"),left.addEventListener("click",ctr_listener),right.setAttribute("data-ctr","+"),right.addEventListener("click",ctr_listener),mid.type="number",mid.setAttribute("data-maxv",maxv),mid.setAttribute("data-minv",minv),mid.addEventListener("change",ctr_listener),mid.addEventListener("focus",function(e){this.select()});var scope1=document.createDocumentFragment();void 0!==attr.name&&scope1.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",attr.name)),scope1.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processValue(attr.min)+"~"+(void 0!==attr.max?processValue(attr.max):"?")+(void 0!==attr.unit?attr.unit:"")));var main=document.createDocumentFragment();main.appendChild(left),main.appendChild(mid),null!==unit&&main.appendChild(unit),main.appendChild(right);var content=createContentLine(scope1,main,{headIcon:!1});return he.appendChild(content),branch.finish(),he;case"poration":var _content=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content"),_getPorationHTML=getPorationHTML(branch),one=_getPorationHTML.one,two=_getPorationHTML.two;return _content.appendChild(one),_content.appendChild(two),he.appendChild(_content),branch.finish(),he;case"damage":var damage_name=null;void 0!==attr.name&&(damage_name=document.createDocumentFragment(),damage_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_icon",ICONS.potum)),damage_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_name",attr.name)));var text="";switch(attr.title){case"normal":text="1"==attr.frequency?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/title type: one"):Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/title type: total");break;case"each":text=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/title type: each");break;case"normal_attack":text=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/title type: normal attack")}var title=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",text);text={auto:"physical"==attr.damage_type?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: atk"):Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: matk"),atk:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: atk"),matk:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: matk"),none:null}[attr.base];var valid_base=null!==text?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,"physical"==attr.damage_type?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: atk"):Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/valid base: matk")):null,damage_type=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,{physical:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("physical"),magic:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("magic")}[attr.damage_type]),constant="normal_attack"===attr.title&&"0"===attr.constant?null:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/skill constant"),processValue(attr.constant)),multiplier=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/skill multiplier"),processValue(attr.multiplier,{tail:"%"})),extra_constant=void 0!==attr.extra_constant?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/skill extra constant"),processValue(attr.extra_constant)):null,aliment=null;if(void 0!==attr.aliment_name){var s2=document.createDocumentFragment();s2.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,setTagButton(attr.aliment_name))),s2.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/chance"),processValue(attr.aliment_chance||"0",{tail:"%"}))),aliment=createContentLine(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/aliment")),s2)}var area_scope=null,target_type=null;"single"==attr.type?target_type=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/target type: single")):(target_type=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/target type: AOE")),area_scope=getEffectiveAreaHTML(branch),target_type.addEventListener("click",function(){area_scope.classList.toggle("hidden")}),target_type.classList.add("show_area"));var damage_element=null;void 0!==attr.element&&(damage_element=getDamageElementHTML(attr.element));var damage_isPlace=null;"1"==attr.is_place&&(damage_isPlace=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/is place")));var damage_frequency=null,damage_judgment=null,damage_cycle=null;"1"===attr.frequency&&"each"!=attr.title||(damage_frequency=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processValue(attr.frequency,{tail:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/frequency: unit")})),text="common"==attr.judgment?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/judgment: common"):Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/judgment: separate"),damage_judgment=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,text),"1"==attr.is_place&&void 0!==attr.cycle&&(damage_cycle=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/cycle: pretext")+processValue(attr.cycle,{tail:Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_0__.d)("global/second")}))));var poration_branch=suffix.find(function(e){return"poration"==e.name}),poration_damage=null,poration_poration=null;if(void 0!==poration_branch){var _getPorationHTML2=getPorationHTML(poration_branch),_one=_getPorationHTML2.one,_two=_getPorationHTML2.two;poration_damage=_one,poration_poration=_two,poration_branch.finish()}var damage_extras=suffix.filter(function(e){return"extra"==e.name}),damage_extras_frg=document.createDocumentFragment();damage_extras.forEach(function(e){var t=e.branchAttributes,a=document.createDocumentFragment();if(t.aliment_name&&a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,setTagButton(t.aliment_name))),t.aliment_chance&&a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/chance"),processValue(t.aliment_chance)+"%")),t.constant){var n=safeEval(t.constant),_=n>=0?"+":"",i=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/skill constant")+_+n;n<0&&(i=darkText(i)),i=processValue(i,{calc:!1,checkHasStack:t.constant}),a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,i))}t.element&&a.appendChild(getDamageElementHTML(t.element)),t.caption&&a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){return a.appendChild(processStat(e))}),damage_extras_frg.appendChild(createContentLine(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processText(e,"condition",Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/extra/base title"))),a)),e.finish()});var top=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","top");null!==damage_name&&top.appendChild(damage_name);var frg1=document.createDocumentFragment();frg1.appendChild(damage_type),null!==damage_isPlace&&frg1.appendChild(damage_isPlace),null!==damage_element&&frg1.appendChild(damage_element),null!==damage_judgment&&frg1.appendChild(damage_judgment),null!==damage_cycle&&frg1.appendChild(damage_cycle),null!==poration_damage&&frg1.appendChild(poration_damage),null!=poration_poration&&frg1.appendChild(poration_poration);var frg2=document.createDocumentFragment();null!==valid_base&&frg2.appendChild(valid_base),null!==constant&&frg2.appendChild(constant),frg2.appendChild(multiplier),null!==extra_constant&&frg2.appendChild(extra_constant);var _content2=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content"),_scope=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope1"),line_frg1=document.createDocumentFragment();line_frg1.appendChild(target_type),null!==damage_frequency&&line_frg1.appendChild(damage_frequency),line_frg1.appendChild(title);var line=createContentLine(line_frg1,frg2,{headIcon:!1});return _scope.appendChild(frg1),0!==_scope.childElementCount&&_content2.appendChild(_scope),0!=top.childElementCount&&he.appendChild(top),he.appendChild(_content2),he.appendChild(line),null!==aliment&&he.appendChild(aliment),damage_extras_frg.childElementCount>0&&he.appendChild(damage_extras_frg),null!==area_scope&&he.appendChild(area_scope),branch.finish(),he;case"effect":case"next":case"passive":var text_name=null;void 0!==attr.name&&(text_name=document.createDocumentFragment(),text_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_icon",ICONS.potum)),text_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_name",attr.name)));var _c=attr.condition;"auto"==_c&&(_c=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/condition: auto")),"hit"==_c&&(_c=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/condition: hit")),"next"==btype&&void 0===attr.condition&&(_c=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/condition: next")),"passive"==btype&&(_c=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/condition: passive"));var condition="none"!=_c?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processText(branch,null,_c)):null,end_condition=null;attr.end_condition&&(end_condition=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",attr.end_condition));var duration=null;if(attr.duration){var v=processValue(attr.duration);if("1"===attr.is_place)duration=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/duration"),processValue(attr.duration),Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_0__.d)("global/second"));else{var _t=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/duration-2");duration=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title","".concat(_t[0]).concat(v).concat(_t[1]))}}var isPlace=null;"1"===attr.is_place&&(isPlace=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/is place")));var _text=void 0!==attr.type?getTargetText(attr.type,"1"===attr.is_place):null,_target_type=null,_area_scope=null;void 0===attr.radius?_target_type=null!==_text?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,_text):null:(_target_type=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,_text),attr.end_position="self",attr.effective_area="circle",_area_scope=getEffectiveAreaHTML(branch),_target_type.addEventListener("click",function(){_area_scope.classList.toggle("hidden")}),_target_type.classList.add("show_area"));var extras=suffix.filter(function(e){return"extra"==e.name}),extras_frg=document.createDocumentFragment();extras.forEach(function(e){var t=e.branchAttributes;void 0===t.condition&&(t.condition=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/extra/base title"));var a=document.createDocumentFragment();t.caption&&a.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){return a.appendChild(processStat(e))});var n=document.createDocumentFragment();n.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processText(e,"condition"))),void 0!==t.target&&n.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",t.target)),extras_frg.appendChild(createContentLine(n,a)),e.finish()});var _scope2=document.createDocumentFragment();null!==condition&&_scope2.appendChild(condition);var _frg=document.createDocumentFragment();null!==isPlace&&_frg.appendChild(isPlace),null!==end_condition&&_frg.appendChild(end_condition),null!==duration&&_frg.appendChild(duration),null!=_target_type&&_frg.appendChild(_target_type);var scope2=document.createDocumentFragment();attr.caption?scope2.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","text_scope",processText(branch,"caption"))):branch.stats.forEach(function(e){return scope2.appendChild(processStat(e))});var _top=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","top");null!==text_name&&_top.appendChild(text_name),0!=_top.childElementCount&&he.appendChild(_top);var content_top=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content");if(null!==isPlace){var s1=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope1");s1.appendChild(_frg),content_top.appendChild(s1)}else _scope2.appendChild(_frg);var _content3=createContentLine(_scope2,scope2,{headIcon:!1});return 0!==content_top.childElementCount&&he.appendChild(content_top),he.appendChild(_content3),0!==extras_frg.childElementCount&&he.appendChild(extras_frg),null!==_area_scope&&he.appendChild(_area_scope),branch.finish(),he;case"heal":var heal_name=null;attr.name&&(heal_name=document.createDocumentFragment(),heal_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_icon",ICONS.potum)),heal_name.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_name",attr.name)));var _text2=getTargetText(attr.target),target=null!=_text2?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,_text2):null,_constant="0"!=attr.constant?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,processValue(attr.constant)):null,_duration=null;if(void 0!==attr.duration){var _v=processValue(attr.duration);_duration=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/effect/duration"),processValue(attr.duration),Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_0__.d)("global/second"))}var frequency=null;void 0!==attr.frequency&&(frequency=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",processValue(attr.frequency,{tail:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/heal/frequency: unit")})));var cycle=null;void 0!==attr.cycle&&(cycle=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/damage/cycle: pretext")+processValue(attr.cycle,{tail:Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_0__.d)("global/second")})));var extra_frg=document.createDocumentFragment();if(void 0!==attr.extra_text){var ta=attr.extra_text.split(/\s*,\s*/),va=attr.extra_value.split(/\s*,\s*/).map(function(e){return processValue(e,{toPercentage:!0})});ta.forEach(function(e,t){extra_frg.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,e,va[t]))})}var _top2=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","top");null!==heal_name&&_top2.appendChild(heal_name),0!=_top2.childElementCount&&he.appendChild(_top2);var _content4=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content"),_scope3=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","scope1");_scope3.appendChild(target),null!==_duration&&_scope3.appendChild(_duration),null!==cycle&&_scope3.appendChild(cycle),_content4.appendChild(_scope3),he.appendChild(_content4);var _frg2=document.createDocumentFragment();_frg2.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",{hp:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/heal/title: hp"),mp:Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/heal/title: mp")}[attr.type])),null!==frequency&&_frg2.appendChild(frequency);var _frg3=document.createDocumentFragment();return null!==_constant&&_frg3.appendChild(_constant),0!==extra_frg.childElementCount&&_frg3.appendChild(extra_frg),he.appendChild(createContentLine(_frg2,_frg3,{headIcon:!1})),branch.finish(),he;case"text":case"tips":var _text_name=null;attr.name&&(_text_name=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_name",attr.name));var main_text=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","text_scope",processText(branch));if(void 0!==attr.icon){var iconStr={potum:'<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1250pt" height="1250pt" viewBox="0 0 1250 1250" preserveAspectRatio="xMidYMid meet"><g transform="translate(0,1250) scale(0.1,-0.1)" fill="#000000" stroke="none"><path d="M1468 11473 c-29 -34 -57 -98 -75 -173 -15 -62 -18 -111 -16 -277 l2 -201 -102 34 c-112 38 -148 42 -168 18 -15 -18 -20 -114 -8 -164 4 -19 15 -100 24 -180 56 -495 128 -757 306 -1113 76 -153 214 -396 234 -412 7 -6 78 -141 158 -300 364 -728 566 -1026 995 -1466 l163 -168 -50 -203 c-137 -556 -160 -746 -168 -1370 l-5 -428 -55 -82 c-70 -108 -155 -259 -203 -361 -96 -210 -132 -392 -146 -743 l-7 -159 27 -32 c67 -80 199 -105 317 -59 37 14 69 22 73 19 3 -3 8 2 12 11 3 9 15 16 25 16 10 0 62 11 115 25 102 27 198 71 252 118 l34 28 62 -133 c35 -73 79 -160 99 -193 l35 -60 -221 -6 c-231 -6 -245 -8 -492 -40 -169 -23 -172 -23 -310 -44 -354 -53 -385 -59 -435 -85 -45 -23 -42 -7 -42 -205 0 -139 -13 -216 -66 -397 -33 -112 -30 -132 28 -159 33 -16 55 -15 368 12 389 32 865 65 1177 79 264 13 1155 6 1345 -9 74 -6 218 -18 320 -26 221 -19 532 -53 920 -101 157 -19 292 -36 300 -36 8 0 107 9 220 21 113 11 230 23 260 26 30 3 150 14 265 24 950 88 1527 101 2285 51 204 -14 768 -65 993 -91 150 -17 181 -18 205 -7 30 15 28 -14 15 253 -5 103 -2 140 21 264 24 132 25 146 11 167 -8 13 -24 24 -34 24 -10 0 -72 13 -137 29 -467 115 -798 166 -1299 201 -88 7 -183 15 -211 18 l-52 7 80 95 c111 131 206 278 295 455 42 82 77 152 79 154 2 2 31 -19 66 -46 152 -120 255 -176 398 -218 52 -15 163 -61 245 -100 173 -84 230 -105 286 -105 73 0 119 41 148 130 10 32 6 47 -43 175 -168 435 -316 713 -586 1103 -127 183 -128 184 -134 332 -2 63 -7 122 -9 130 -3 8 -11 94 -17 190 -10 158 -18 263 -36 445 -3 33 -12 112 -20 175 -9 63 -18 144 -21 180 -3 36 -9 70 -13 75 -4 6 -13 39 -20 75 -16 81 -73 261 -114 360 -30 72 -31 76 -16 107 8 18 50 68 93 111 42 43 77 86 77 94 0 9 25 41 55 72 30 30 55 59 55 63 1 15 196 243 397 465 155 171 503 524 658 669 154 143 526 469 739 649 293 248 381 320 387 320 10 0 119 180 119 197 0 8 5 23 10 34 23 42 -16 69 -124 89 -33 5 -61 12 -63 13 -2 2 17 22 43 43 72 61 142 134 147 154 7 27 -18 56 -51 63 -52 10 -661 67 -822 76 -219 13 -695 5 -870 -14 -571 -62 -1039 -208 -1763 -551 -295 -140 -1053 -539 -1090 -573 -16 -16 -24 -16 -80 -5 -399 82 -658 113 -957 114 -287 2 -542 -22 -1110 -104 l-235 -34 -110 70 c-194 125 -241 156 -658 427 -423 275 -994 659 -1350 908 -230 161 -773 557 -1107 808 -118 89 -225 167 -237 173 -31 17 -68 15 -85 -5z"/></g></svg>'}[attr.icon];iconStr&&(main_text.classList.add("has_icon"),main_text.innerHTML='<span class="icon">'+iconStr+'</span><span class="text">'+main_text.innerHTML+"</span>")}var _top3=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","top");null!==_text_name&&_top3.appendChild(_text_name);var _content5=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content");return _content5.appendChild(main_text),0!=_top3.childElementCount&&he.appendChild(_top3),he.appendChild(_content5),branch.finish(),he;case"list":var lists=[];lists.push(branch);for(var _p=branch.findLocation()+1,cur=branch.parent.branchs[_p];void 0!==cur&&cur.name==btype;)lists.push(cur),cur=branch.parent.branchs[++_p];var ul=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("ul",["Cyteria","ul","simple","_list"]);lists.forEach(function(e){ul.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("li",null,processText(e))),e.finish()}),"1"===attr.is_tips&&ul.classList.add("is_tips");var _content6=Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","content");return _content6.appendChild(ul),he.appendChild(_content6),branch.finish(),he;case"reference":var _main_text=attr.text?Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("div","text_scope",processText(branch)):null,url_scope=null;if(attr.url){url_scope=document.createDocumentFragment();var urls=attr.url.split(","),url_texts=attr.url_text.split(",");urls.forEach(function(e,t){url_scope.appendChild(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.b)(null,null,'<a href="'.concat(e,'" target="_blank" class="url_text">').concat(url_texts[t],"</a>")))})}return null!==_main_text&&he.appendChild(_main_text),null!==url_scope&&he.appendChild(createContentLine(Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.d)("span","_main_title",Object(_main_js__WEBPACK_IMPORTED_MODULE_1__.a)("branch/reference/reference url")),url_scope,{headIcon:!1})),branch.finish(),he}return null}__webpack_exports__.a=getBranchHTML},,,function(e,t,a){"use strict";a.r(t);var n=a(11),_=a.n(n),i=a(13),r=a.n(i),l=a(8),s=a(4),c=a.n(s),o=a(5),u=a.n(o),d=a(2);function p(e,t){var a=["預設","非預設","預設/and","非預設/and"],n=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍","空手"],_=["箭矢","盾牌","小刀","魔導具","拳套","拔刀劍","無裝備"],i=["輕量化","重量化","一般","無裝備"],r=["瞬發","須詠唱","須蓄力","被動"],s=["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],c=["極慢","慢","稍慢","一般","稍快","快","極快"],o=null,u=[d.f.TYPE,d.e.TYPE,d.a.TYPE,d.c.TYPE,d.b.TYPE];function p(e,t){if(u.indexOf(e.TYPE)<=u.indexOf(t))return e;for(;e.TYPE!=t;)e=e.parent;return e}function m(e,t){return e===t?null:e}t.forEach(function(t,E){try{if(0==E)return;var h=t[0];if(""!=h){var f=t[1];switch(f){case"0":var O=t[2];o=e.newElement(d.f.TYPE,{no:h,name:O});break;case"1":o=p(o,d.f.TYPE);var v=t[2];o=o.newElement(d.e.TYPE,{no:h,name:v});break;default:if(""!=f){o=p(o,d.e.TYPE);var b=t[1];o=o.newElement(d.a.TYPE,{no:h,name:b})}case"":var g=n.indexOf(t[3]),M=_.indexOf(t[4]),P=i.indexOf(t[5]),T=a.indexOf(t[2]);if(-1===T)return;var D=(o=p(o,d.a.TYPE)).newElement(d.c.TYPE,{mainWeapon:g,subWeapon:M,bodyArmor:P});!function(e,t,a){switch(t){case 2:case 3:if(e.setConfig({equipmentConfirm:1}),2!==t)break;case 0:a.setDefaultEffect(e)}}(D,T,o),o=D.appendAttribute(d.c.MP_COST,m(t[11],"")).appendAttribute(d.c.RANGE,m(t[12],"")).appendAttribute(d.c.SKILL_TYPE,m(r.indexOf(t[13]),-1)).appendAttribute(d.c.IN_COMBO,m(s.indexOf(t[14]),-1)).appendAttribute(d.c.ACTION_TIME,m(c.indexOf(t[15]),-1)).appendAttribute(d.c.CASTING_TIME,m(t[16],""))}}if(u.indexOf(o.TYPE)<u.indexOf(d.c.TYPE))return;var C=t[6];if(""!=C){o=p(o,d.c.TYPE);var L=t[7];o=o.newElement(d.b.TYPE,{no:C,name:L})}var A=t[8],j=t[9];""!=A&&(l.a.CharacterSystem.findStatBase(A)?o.appendStat(A,j,t[10]):o.appendBranchAttribute(A,j))}catch(e){console.warn("[Error] When Load Skill Data"),console.log(t)}})}var m=a(12),E=function(){function e(){c()(this,e),this.skillRoot=new d.d(this)}return u()(e,[{key:"init",value:function(){var e=r()(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,new Promise(function(e,a){Papa.parse(Object(m.a)().SkillData,{download:!0,complete:function(a){p(t.skillRoot,a.data),e()},error:function(e){console.warn("讀取技能資料時發生錯誤。"),console.log(e),a()}})});case 3:return e.next=5,new Promise(function(e,a){Papa.parse(Object(m.a)().SkillMainData,{download:!0,complete:function(a){var n,_,i;n=t.skillRoot,a.data.forEach(function(e,t){if(0!=t&&""!==e[1])try{var a=e[0],r=e[1];switch(a){case"0":_=n.skillTreeCategorys.find(function(e){return e.no==r});break;case"1":(i=_.skillTrees.find(function(e){return e.no==r})).init(e[3]);break;case"":i.skills.find(function(e){return e.no==r}).init(e[2],parseInt(e[3]))}}catch(t){console.warn("[Error] When Load Skill Main Data"),console.log(t),console.log(e)}}),e()},error:function(e){console.warn("讀取技能資料時發生錯誤。"),console.log(e),a()}})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"init_SkillQuery",value:function(e){this.skillRoot.controller.initSkillQueryHTML(e)}}]),e}(),h=a(18),f=function(){function e(t){c()(this,e),this.name=t,this.frames=[]}return u()(e,[{key:"appendFrame",value:function(e,t){var a=new O(e,t);return this.frames.push(a),a}}]),e}(),O=function(){function e(t,a){c()(this,e),this.type=t,this.value=a}return u()(e,[{key:"appendValue",value:function(e){Array.isArray(this.value)||(this.value=[this.value]),this.value.push(e)}}]),e}(),v=f,b=a(1),g=a(3);var M=function(){function e(t,a){c()(this,e),this.parent=t,this.nodes={main:a,content:null,tagName:null},this.status={currentTag:null,readRecords:[]},this.listeners={showTagButton:null}}return u()(e,[{key:"init",value:function(){var e=b.a.element.simpleCreateHTML,t=this.nodes.main,a=this,n=e("div","top"),_=e("span","button",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.71 15.88L10.83 12l3.88-3.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.39.39-1.03 0-1.42z"/></svg>');_.addEventListener("click",function(e){var t=a.status.readRecords;0!==t.length&&(a.status.currentTag=null,a.showTag(t.pop()))}),n.appendChild(_);var i=e("span","name"),r=e("span",["button","right"],'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/></svg>');r.addEventListener("click",function(e){a.nodes.main.classList.add("hidden")}),n.appendChild(_),n.appendChild(i),n.appendChild(r),t.appendChild(n);var l=e("div","content");return t.appendChild(l),this.nodes.content=l,this.nodes.tagName=i,this.listeners.showTagButton=function(e){a.showTagByName(this.innerText)},this}},{key:"showTagByName",value:function(e){var t=this.parent.tagList.find(function(t){return t.name===e});""!==e&&void 0!==t?this.showTag(t):console.warn("Unknow Tag Name: "+e)}},{key:"showTag",value:function(e){var t=this;null!==this.status.currentTag&&this.status.readRecords.push(this.status.currentTag),this.status.currentTag=e;var a=document.createDocumentFragment();e.frames.forEach(function(e){return a.appendChild(t.createFrameHTML(e))}),b.a.element.removeAllChild(this.nodes.content),this.nodes.content.appendChild(a),this.nodes.main.classList.remove("hidden"),this.nodes.tagName.innerHTML=e.name}},{key:"createFrameHTML",value:function(e){function t(e){return e.replace(/\(\(!((?:(?!\(\().)+)\)\)/g,function(){return'<span class="light">'+(arguments.length<=1?void 0:arguments[1])+"</span>"}).replace(/\(\(((?:(?!\(\().)+)\)\)/g,function(){return'<span class="separate_text">'+(arguments.length<=1?void 0:arguments[1])+"</span>"}).replace(/#([^\s]+)\s(\w?)/g,function(){var e='<span class="show_tag_button">'+(arguments.length<=1?void 0:arguments[1])+"</span>";return""!==(arguments.length<=2?void 0:arguments[2])&&(e+=" "),e})}var a=e.type,n=b.a.element.simpleCreateHTML("div","frame-"+a);switch(a){case"category":n.innerHTML='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1250pt" height="1250pt" viewBox="0 0 1250 1250" preserveAspectRatio="xMidYMid meet"><g transform="translate(0,1250) scale(0.1,-0.1)" fill="#000000" stroke="none"><path d="M1468 11473 c-29 -34 -57 -98 -75 -173 -15 -62 -18 -111 -16 -277 l2 -201 -102 34 c-112 38 -148 42 -168 18 -15 -18 -20 -114 -8 -164 4 -19 15 -100 24 -180 56 -495 128 -757 306 -1113 76 -153 214 -396 234 -412 7 -6 78 -141 158 -300 364 -728 566 -1026 995 -1466 l163 -168 -50 -203 c-137 -556 -160 -746 -168 -1370 l-5 -428 -55 -82 c-70 -108 -155 -259 -203 -361 -96 -210 -132 -392 -146 -743 l-7 -159 27 -32 c67 -80 199 -105 317 -59 37 14 69 22 73 19 3 -3 8 2 12 11 3 9 15 16 25 16 10 0 62 11 115 25 102 27 198 71 252 118 l34 28 62 -133 c35 -73 79 -160 99 -193 l35 -60 -221 -6 c-231 -6 -245 -8 -492 -40 -169 -23 -172 -23 -310 -44 -354 -53 -385 -59 -435 -85 -45 -23 -42 -7 -42 -205 0 -139 -13 -216 -66 -397 -33 -112 -30 -132 28 -159 33 -16 55 -15 368 12 389 32 865 65 1177 79 264 13 1155 6 1345 -9 74 -6 218 -18 320 -26 221 -19 532 -53 920 -101 157 -19 292 -36 300 -36 8 0 107 9 220 21 113 11 230 23 260 26 30 3 150 14 265 24 950 88 1527 101 2285 51 204 -14 768 -65 993 -91 150 -17 181 -18 205 -7 30 15 28 -14 15 253 -5 103 -2 140 21 264 24 132 25 146 11 167 -8 13 -24 24 -34 24 -10 0 -72 13 -137 29 -467 115 -798 166 -1299 201 -88 7 -183 15 -211 18 l-52 7 80 95 c111 131 206 278 295 455 42 82 77 152 79 154 2 2 31 -19 66 -46 152 -120 255 -176 398 -218 52 -15 163 -61 245 -100 173 -84 230 -105 286 -105 73 0 119 41 148 130 10 32 6 47 -43 175 -168 435 -316 713 -586 1103 -127 183 -128 184 -134 332 -2 63 -7 122 -9 130 -3 8 -11 94 -17 190 -10 158 -18 263 -36 445 -3 33 -12 112 -20 175 -9 63 -18 144 -21 180 -3 36 -9 70 -13 75 -4 6 -13 39 -20 75 -16 81 -73 261 -114 360 -30 72 -31 76 -16 107 8 18 50 68 93 111 42 43 77 86 77 94 0 9 25 41 55 72 30 30 55 59 55 63 1 15 196 243 397 465 155 171 503 524 658 669 154 143 526 469 739 649 293 248 381 320 387 320 10 0 119 180 119 197 0 8 5 23 10 34 23 42 -16 69 -124 89 -33 5 -61 12 -63 13 -2 2 17 22 43 43 72 61 142 134 147 154 7 27 -18 56 -51 63 -52 10 -661 67 -822 76 -219 13 -695 5 -870 -14 -571 -62 -1039 -208 -1763 -551 -295 -140 -1053 -539 -1090 -573 -16 -16 -24 -16 -80 -5 -399 82 -658 113 -957 114 -287 2 -542 -22 -1110 -104 l-235 -34 -110 70 c-194 125 -241 156 -658 427 -423 275 -994 659 -1350 908 -230 161 -773 557 -1107 808 -118 89 -225 167 -237 173 -31 17 -68 15 -85 -5z"/></g></svg><span>'+t(e.value)+"</span>";break;case"caption":n.innerHTML=t(e.value);break;case"list":var _=b.a.element.simpleCreateHTML("ul",["Cyteria","ul","simple"]);Array.isArray(e.value)?e.value.forEach(function(e){return _.appendChild(b.a.element.simpleCreateHTML("li",null,t(e)))}):_.appendChild(b.a.element.simpleCreateHTML("li",null,t(e.value))),n.appendChild(_)}return this.processShowTagButton(n.querySelectorAll(".show_tag_button")),n}},{key:"processShowTagButton",value:function(e){var t=this;Array.from(e).forEach(function(e){return e.addEventListener("click",t.listeners.showTagButton)})}}]),e}();var P=function(){function e(){c()(this,e),this.tagList=[]}return u()(e,[{key:"init",value:function(e){this.controller=new M(this,e.mainNode).init();var t=this;return new Promise(function(e,a){Papa.parse(Object(m.a)().TagData,{download:!0,complete:function(a){var n,_,i;n=t,a.data.forEach(function(e,t){try{var a=e[0];""!==a&&(_=n.appendTag(a));var r=e[1],l=e[2];""!==r?i=_.appendFrame(r,l):i.appendValue(l)}catch(t){console.warn("Error when load Tag-List."),console.log(t),console.log(e)}}),e()},error:function(e){console.warn("讀取標籤資料時發生錯誤。"),console.log(e),a()}})})}},{key:"appendTag",value:function(e){var t=new v(e);return this.tagList.push(t),t}}]),e}(),T=a(9),D=a(15),C={"Top List":{"item 1":"布偶的魔法書","item 2":"技能查詢"},"Skill Query":{"Skill Element":{"skill tree: from":"所屬技能樹"},Controller:{"main weapon":"主手武器","sub weapon":"副手武器","body armor":"身體裝備","equipment: unlimited":"無限制","switch display":"切換顯示","current skill":"當前技能"},"Analysis Skill":{"no data":"此技能資料尚未齊全。","equipment not confirm":"所選取的裝備無法使用此技能。","Main Weapon List":["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍","空手"],"Sub Weapon List":["箭矢","盾牌","小刀","魔導具","拳套","拔刀劍","無裝備"],"Body Armor List":["輕量化","重量化","一般","無裝備"],"mp cost":"MP消耗",range:"射程","skill type":"類型","damage type":"傷害類型","poration type":"慣性類型","in combo":"連擊","action time":"動作時間","casting time":"詠唱時間","charging time":"蓄力時間","skill type: List":["瞬發","須詠唱","須蓄力","被動"],"damage type: List":["物理","魔法"],"poration type: List":["物理","魔法","一般攻擊"],"in combo: List":["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],"action time: List":["極慢","慢","稍慢","一般","稍快","快","極快"],"range: no limit":"無限制","skill formula: STR":"角色STR","skill formula: DEX":"角色DEX","skill formula: INT":"角色INT","skill formula: AGI":"角色AGI","skill formula: VIT":"角色VIT","skill formula: BSTR":"角色基礎STR","skill formula: BDEX":"角色基礎DEX","skill formula: BINT":"角色基礎INT","skill formula: BAGI":"角色基礎AGI","skill formula: BVIT":"角色基礎VIT","skill formula: shield_refining":"盾精煉值","skill formula: dagger_atk":"小刀ATK","skill formula: target_def":"目標DEF","skill formula: target_level":"目標Lv","skill formula: guard_power":"阻擋力%","character level":"角色等級","skill level":"技能等級",physical:"物理",magic:"魔法","normal attack":"一般攻擊","damage poration type: none":"不受慣性影響","effective poration type: none":"不影響慣性","damage poration: title":"傷害慣性","effective poration: title":"造成慣性","element: neutral":"無屬性","element: fire":"火屬性","element: water":"水屬性","element: earth":"地屬性","element: wind":"風屬性","element: light":"光屬性","element: dark":"暗屬性","element: arrow":"套用箭矢屬性","element: one hand sword":"套用單手劍屬性","target type: self":"自身","target type: party":"全隊伍","target type: party & is place":"區域內的隊伍成員","target type: aura":"光環內的隊伍成員","target type: target":"目標",radius:"半徑","sector: angle":"夾角","effective area: title":"類別","effective area type: circle":"圓形","effective area type: line":"直線型","effective area type: sector":"扇型","move distanve: title":"移動距離","effective area: character position":"角色位置","effective area: target position":"目標位置","branch development controller":{"title: default":"預設","title: not default":"非預設"},branch:{stack:{"base name":"技能層數","min value":"最小值","max value":"最大值"},damage:{"title type: one":"單下傷害","title type: total":"總傷害","title type: each":"每下傷害","title type: normal attack":"一般攻擊傷害提升","valid base: atk":"有效ATK","valid base: matk":"有效MATK","skill constant":"技能常數","skill multiplier":"技能倍率","skill extra constant":"額外加成",chance:"機率",aliment:"異常狀態","target type: single":"單體","target type: AOE":"範圍","is place":"設置型","frequency: unit":"次","judgment: common":"共同判定","judgment: separate":"分開判定","cycle: pretext":"每",extra:{"base title":"額外效果"}},effect:{"condition: auto":"施放成功後","condition: hit":"命中成功後","condition: next":"下一招技能","condition: next-2":["之後的","招技能"],"condition: passive":"被動效果",duration:"持續時間","duration-2":["","秒內"]},heal:{"title: hp":"HP恢復","title: mp":"MP恢復","frequency: unit":"次"},reference:{"reference url":"資料參考連結"}},"button text":{"to skill":"查看"}},"button text":{back:"上一個技能"}}},L={"Top List":{"item 1":"Cy's Grimoire","item 2":"Skills Information"},"Skill Query":{"Skill Element":{"skill tree: from":"Skill Tree"},Controller:{"main weapon":"Main Weapon","sub weapon":"Sub Weapon","body armor":"Body Armor","equipment: unlimited":"unlimited","switch display":"Switch Dispaly","current skill":"Current Skill"},"button text":{back:"Last Skill"}}},A={"Top List":{"item 1":"Cy's Grimoire","item 2":"スキルインフォ"}};function j(){return(j=r()(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,Object(g.b)({zh_tw:C,en:L,ja:A}),Object(D.a)(),l.a.SkillSystem=new E,l.a.CharacterSystem=new h.a,l.a.TagSystem=new P,e.next=7,Object(T.c)("載入角色能力清單...");case 7:return e.next=9,l.a.CharacterSystem.init_statList().catch(function(){return Object(T.b)("...載入失敗。",!0)});case 9:return e.next=11,Object(T.c)("載入技能清單...");case 11:return e.next=13,l.a.SkillSystem.init().catch(function(){return Object(T.b)("...載入失敗。",!0)});case 13:return e.next=15,Object(T.c)("初始化技能資料...");case 15:return l.a.SkillSystem.init_SkillQuery(document.querySelector("#SkillQuery > .main")),e.next=18,Object(T.c)("載入標籤清單...");case 18:return e.next=20,l.a.TagSystem.init({mainNode:document.getElementById("tag-scope")}).catch(function(){return Object(T.b)("...載入失敗。",!0)});case 20:Object(g.c)(),document.title=Object(g.a)("Page Title"),t&&Object(T.a)();case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}try{!function(){j.apply(this,arguments)}()}catch(e){Object(T.b)(e),console.log(e)}}]);