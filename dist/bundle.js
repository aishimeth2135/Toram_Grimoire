!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";var a=n(6),s=n(1),i=n(2),l=n(4);const r=Symbol();function c(e){this.MAIN_NODE=null,this.skillRoot=e,this.currentData={mainWeapon:-1,subWeapon:-1,bodyArmor:-1,skillLevel:10,characterLevel:10,currentSkill:null,stackValues:{}}}c.prototype={initSkillQueryHTML(e){const t=this.skillRoot;this.MAIN_NODE=e;const n=[d.TYPE,E.TYPE,m.TYPE,r,h.CATEGORY_EQUIPMENT,h.TYPE],a=document.createDocumentFragment();n.forEach(function(e){const n=this.getSkillElementScope(e);switch(a.appendChild(n),e){case d.TYPE:n.appendChild(this.createSkillQueryScopeHTML(t,Object(i.a)().menu));break;case E.TYPE:t.skillTreeCategorys.forEach(function(e){n.appendChild(this.createSkillQueryScopeHTML(e,Object(i.a)().menu))},this);break;case r:n.appendChild(this.createSkillQueryScopeHTML(null,e))}},this),e.appendChild(a)},getSkillElementScope(e){const t={[d.TYPE]:"SkillRoot_scope",[E.TYPE]:"SkillTreeCategory_scope",[m.TYPE]:"SkillTree_scope",[h.TYPE]:"Skill_scope",[r]:"SkillLevel_scope",[h.CATEGORY_EQUIPMENT]:"SkillEquipment_scope"};let n=this.MAIN_NODE.getElementsByClassName(t[e])[0];return n||(n=document.createElement("div")).classList.add(t[e]),n},getSkillElementNoStr(e){let t="";for(;e.parent;)t=e.findLocation()+(""!=t?"-":"")+t,e=e.parent;return t},selectSkillElement(e){const t=e.split("-");let n=null;return t.forEach(function(e,t){switch(e=parseInt(e,10),t){case 0:n=this.skillRoot.skillTreeCategorys[e];break;case 1:n=n.skillTrees[e];break;case 2:n=n.skills[e];break;case 3:n=n.branchs[e]}},this),n},updateSkillHTML(){const e=this.currentData.currentSkill;if(!e)return;const t=this.getSkillElementScope(h.TYPE);l.a.element.removeAllChild(t),t.appendChild(this.createSkillQueryScopeHTML(e,h.CATEGORY_MAIN)),Object(s.a)(t)},createSkillQueryScopeHTML(e,t){switch(null!==e?e.TYPE:t){case d.TYPE:switch(t){case Object(i.a)().menu:{const n=this,a=function(e){const t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");n.getSkillElementScope(E.TYPE);let a=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),s=n.getSkillElementScope(E.TYPE).querySelectorAll("div._menu");const i=Array.from(s).find(e=>!e.classList.contains("hidden"));i&&i.classList.add("hidden"),s[a].classList.remove("hidden"),l.a.element.removeAllChild(n.getSkillElementScope(m.TYPE)),l.a.element.removeAllChild(n.getSkillElementScope(h.TYPE)),l.a.element.removeAllChild(n.getSkillElementScope(h.CATEGORY_EQUIPMENT))},r=document.createElement("div");r.className="_"+t;const c=document.createDocumentFragment();e.skillTreeCategorys.forEach(e=>{const t=document.createElement("li");t.innerHTML=Object(s.b)(e.name),t.setAttribute(Object(i.a)().data_skillElementNo,n.getSkillElementNoStr(e)),t.addEventListener("click",a),c.appendChild(t)});const _=document.createElement("ul");return _.appendChild(c),r.appendChild(_),r}}case E.TYPE:switch(t){case Object(i.a)().menu:{const n=this,a=function(e){const t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");const a=n.getSkillElementScope(m.TYPE);a.innerHTML="";const r=n.selectSkillElement(this.getAttribute(Object(i.a)().data_skillElementNo));a.appendChild(n.createSkillQueryScopeHTML(r,m.CATEGORY_TABLE)),Object(s.a)(a),l.a.element.removeAllChild(n.getSkillElementScope(h.TYPE)),l.a.element.removeAllChild(n.getSkillElementScope(h.CATEGORY_EQUIPMENT))},r=document.createElement("div");r.className="_"+t,r.classList.add("hidden");const c=document.createDocumentFragment();e.skillTrees.forEach(function(e){const t=document.createElement("li");t.innerHTML=Object(s.b)(e.name),t.setAttribute(Object(i.a)().data_skillElementNo,n.getSkillElementNoStr(e)),t.addEventListener("click",a),c.appendChild(t)});const _=document.createElement("ul");return _.appendChild(c),r.appendChild(_),r}}case m.TYPE:switch(t){case m.CATEGORY_TABLE:{const t=e,n=t.parent.findLocation(),a=t.findLocation(),r=this,c=function(e){const t=r.selectSkillElement(this.getAttribute(Object(i.a)().data_skillElementNo));if(r.currentData.currentSkill===t)return;const n=this.parentNode.parentNode.getElementsByClassName("cur")[0];if(n&&n.classList.remove("cur"),this.classList.add("cur"),r.currentData.currentSkill=t,t.checkData()){l.a.object.empty(r.currentData.stackValues),r.currentData.stackValues=null;const{mainWeapon:e,subWeapon:n,bodyArmor:a}=t.defaultEffect;Object.assign(r.currentData,{mainWeapon:e,subWeapon:n,bodyArmor:a})}const a=r.createSkillQueryScopeHTML(t,h.CATEGORY_EQUIPMENT),c=r.getSkillElementScope(h.CATEGORY_EQUIPMENT);l.a.element.removeAllChild(c),null!==a&&(c.appendChild(a),Object(s.a)(c)),r.updateSkillHTML()},_=function(e){let t=document.createElement("table");return e.ary.forEach(function(e){let n=document.createDocumentFragment();e.forEach(function(e){let t=document.createElement("td");if(e>1&&t.setAttribute("rowspan",e),n.appendChild(t),e<-1)for(++e;0!=e;){++e;const t=document.createElement("td");t.setAttribute("data-empty","1"),n.appendChild(t)}});let a=document.createElement("tr");a.appendChild(n),t.appendChild(a)}),t}(function(e,t){let n=null;switch(e){case 0:switch(t){case 0:n=[[4,2,2,1],[1],[2,2,1],[1],[2,2,-2],[1,1]];break;case 1:n=[[3,2,-3],[1,-2],[1,1,1,1],[2,-4],[1,1,-2]];break;case 2:n=[[2,1,1,1,1],[1,1,1,1],[-5],[1,1,1,-2]];break;case 3:n=[[2,1,1,1,1],[1,1,1,1],[1,1,-3],[1,-4]];break;case 4:n=[[4,1,1,-2],[1,1,1,1],[1,1,-2],[1,1,-2]];break;case 5:n=[[4,2,2,1],[1],[2,1,1],[-2],[1,-3],[1,1,-2]];break;case 6:n=[[2,2,2,2,1],[1],[1,1,-3],[2,-4],[1,1,-2]]}break;case 1:switch(t){case 0:n=[[2,1,1],[-2],[2,1,1],[-2]];break;case 1:case 2:n=[[2,1,1,1],[1,-2],[1,1,-2]];break;case 3:case 4:case 5:n=[[1,1,1,1],[1,1,1,1]]}break;case 2:switch(t){case 0:n=[[-2],[-2],[-2],[2,1],[1],[2,1],[1]];break;case 1:n=[[-4],[1,1,1,1],[1,1,1,1],[1,1,1,1]];break;case 2:n=[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]}break;case 3:switch(t){case 0:n=[[4,1,1,1,1],[1,1,-2],[2,1,-2],[1,1,1],[-5]];break;case 1:n=[[3,1,1,1,1],[1,1,-2],[1,1,-2],[1]];break;case 2:n=[[3,1,1],[1,1],[1,1]]}break;case 4:switch(t){case 0:case 1:n=[[1,1,1],[1,1,1]]}}return null===n&&(n=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]]),{ary:n}}(n,a));let o=-1;return Array.from(_.getElementsByTagName("td")).forEach(function(e){if("1"==e.getAttribute("data-empty"))return;++o;const n=t.skills[o];void 0!==n?"@lock"!=n.name?(e.innerHTML=Object(s.b)(n.name),e.setAttribute(Object(i.a)().data_skillElementNo,r.getSkillElementNoStr(n)),e.addEventListener("click",c)):e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path opacity=".87" d="M0 0h24v24H0V0z"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>':e.innerHTML="-"}),_}}case h.TYPE:switch(t){case h.CATEGORY_MAIN:{if(e.checkData())return Object(a.a)(this.currentData);const t=document.createElement("div");return t.classList.add("no_data"),t.innerHTML="此技能資料尚未更新。",t}case h.CATEGORY_EQUIPMENT:{const t=this,n=function(e){const n=["mainWeapon","subWeapon","bodyArmor"],a=[this.getAttribute(Object(i.a)().data_mainWeapon),this.getAttribute(Object(i.a)().data_subWeapon),this.getAttribute(Object(i.a)().data_bodyArmor)];for(let e=0;e<a.length;++e){const s=a[e];if(null!==s&&""!==s)return t.currentData[n[e]]=parseInt(s,10),this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),void t.updateSkillHTML()}},a=[],l=[],r=[];e.effects.forEach(e=>{const t=e.mainWeapon,n=e.subWeapon,s=e.bodyArmor;-1==a.indexOf(t)&&a.push(t),-1==l.indexOf(n)&&l.push(n),-1==r.indexOf(s)&&r.push(s)});const c=document.createDocumentFragment(),_=[this.currentData.mainWeapon,this.currentData.subWeapon,this.currentData.bodyArmor];return[a,l,r].forEach((e,t)=>{if(1!=e.length||-1!=e[0]){let o,u,p,d;switch(e){case a:d=Object(i.a)().data_mainWeapon,p="Main Weapon|,|主手武器",o=["","","","","","","","","",""],u=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"];break;case l:d=Object(i.a)().data_subWeapon,p="Sub Weapon|,|副手武器",o=["","","","","",""],u=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"];break;case r:d=Object(i.a)().data_bodyArmor,p="Body Armor|,|身體裝備",o=["","",""],u=["輕量化","重量化","一般"]}let E=null;const m=document.createElement("ul");e.forEach(e=>{const a=document.createElement("li");_[t]==e&&a.classList.add("cur"),a.setAttribute(d,e),a.addEventListener("click",n),-1!=e?(a.innerHTML=`<span class="icon">${o[e]}</span><span class="value">${Object(s.b)(u[e])}</span>`,m.appendChild(a)):(a.innerHTML=`<span class="icon"></span><span class="value">${Object(s.b)("None|,|無限制")}</span>`,E=a)}),null!==E&&m.appendChild(E);const h=document.createElement("div"),T=document.createElement("div");T.innerHTML=Object(s.b)(p),h.appendChild(T),h.appendChild(m),c.appendChild(h)}}),0!=c.childElementCount?c:null}}case r:{const e=this,t=function(t){const n=e.currentData.currentSkill;this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),e.currentData.skillLevel=parseInt(this.getAttribute(Object(i.a)().data_skillLevel),10),null!=n&&e.updateSkillHTML()},n=1,a=10,s=document.createElement("ul");for(let e=n;e<=a;++e){const n=document.createElement("li");n.innerHTML="Lv. "+e,n.setAttribute(Object(i.a)().data_skillLevel,e),n.addEventListener("click",t),e==this.currentData.skillLevel&&n.classList.add("cur"),s.appendChild(n)}return s}}}};var _=c,o=n(3),u=n(5);function p(){Array.from(arguments).forEach(function(e,t){null==e&&(console.log(`argument[${t}] of Constructor is null`),console.log(arguments))})}function d(){this.skillTreeCategorys=[],this.controller=new _(this)}function E(e,t,n){this.parent=e,this.no=t,this.name=n,this.skillTrees=[]}function m(e,t,n){this.parent=e,this.no=t,this.name=n,this.skills=[]}function h(e,t,n){this.parent=e,this.name=n,this.effects=[],this.defaultEffect=null,this.caption=""}function T(e,t,n,a){this.parent=e,this.branchs=[],this.mainWeapon=t,this.subWeapon=n,this.bodyArmor=a,this.attributes={}}function b(e,t,n){this.parent=e,this.no=t,this.name=n,this.branchAttributes={},this.stats=[]}n.d(t,"d",function(){return d}),n.d(t,"f",function(){return E}),n.d(t,"e",function(){return m}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return T}),n.d(t,"b",function(){return b}),d.TYPE=Symbol("SkillRoot"),d.prototype={TYPE:d.TYPE,newElement(e,t){if(e==E.TYPE){const{name:e,no:n}=t;p(n,e);let a=new E(this,n,e);return this.skillTreeCategorys.push(a),a}return null}},E.TYPE=Symbol("SkillTreeCategory"),E.prototype={TYPE:E.TYPE,newElement(e,t){if(e==m.TYPE){const{name:e,no:n}=t;p(n,e);let a=new m(this,n,e);return this.skillTrees.push(a),a}return null},findLocation(){return this.parent.skillTreeCategorys.indexOf(this)}},m.TYPE=Symbol("SkillTree"),m.prototype={TYPE:m.TYPE,newElement(e,t){if(e==h.TYPE){const{name:e,no:n}=t;p(n,e);let a=new h(this,n,e);return this.skills.push(a),a}return null},findLocation(){return this.parent.skillTrees.indexOf(this)}},m.CATEGORY_TABLE=Symbol(),h.TYPE=Symbol("Skill"),h.prototype={TYPE:h.TYPE,newElement(e,t){if(e==T.TYPE){const{mainWeapon:e,subWeapon:n,bodyArmor:a}=t;p(e,n,a);let s=new T(this,e,n,a);return this.effects.push(s),s}return null},findLocation(){return this.parent.skills.indexOf(this)},setDefaultEffect(e){return this.defaultEffect=e,this},checkData(){return void 0!==this.defaultEffect&&null!==this.defaultEffect}},h.CATEGORY_MAIN=Symbol(),h.CATEGORY_EQUIPMENT=Symbol(),T.TYPE=Symbol("SkillEffect"),T.prototype={TYPE:T.TYPE,newElement(e,t){if(e==b.TYPE){const e=t.no,n=t.name;p(e,n);let a=new b(this,e,n);return this.branchs.push(a),a}return null},findLocation(){return this.parent.effects.indexOf(this)},appendAttribute(e,t){return null!==t&&(this.attributes[e]=t),this}},T.MP_COST=Symbol("mp_cost"),T.RANGE=Symbol("range"),T.SKILL_TYPE=Symbol("skill_type"),T.IN_COMBO=Symbol("in_combo"),T.ACTION_TIME=Symbol("action_type"),T.CASTING_TIME=Symbol("casting_time"),b.TYPE=Symbol("SkillBranch"),b.prototype={TYPE:b.TYPE,appendBranchAttribute(e,t){return this.branchAttributes[e]=t,this},findLocation(){return this.parent.branchs.indexOf(this)},appendStat(e,t,n){let a;switch(n){case"":a=u.a.TYPE_CONSTANT;break;case"%":a=u.a.TYPE_MULTIPLIER;break;case"~":a=u.a.TYPE_TOTAL}const s=o.a.CharacterSystem.findStatBase(e).createSimpleStat(a,t);return this.stats.push(s),s}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});const a="data-langtext";function s(e){let t=e.querySelectorAll(`a[${a}], input[${a}]`);Array.from(t).forEach(e=>{e.innerHTML=function(e){let t=e.split("|,|");return t[1]||t[0]}(e.getAttribute(a))})}function i(e){return null==e?"":(e=e.replace(new RegExp('"',"g"),"&quot;"),`<a ${a}="${e}"></a>`)}},function(e,t,n){"use strict";const a={menu:"menu",from:Symbol(),data_skillElementNo:"data-seno",data_mainWeapon:"data-mainw",data_subWeapon:"data-subw",data_bodyArmor:"data-armor",data_branchIndex:"data-bi"};t.a=function(){return a}},function(e,t,n){"use strict";t.a={}},function(e,t,n){"use strict";let a={element:{remove:function(){Array.from(arguments);Array.from(arguments).forEach(function(e){e&&e.parentNode.removeChild(e)})},removeAllChild:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}}},class:{extends:function(e){let t=Array.from(arguments);e.prototype=Object.create(t[1].prototype),t.forEach(function(t,n){n<=1||Object.assign(e.prototype,t.prototype)}),e.constructor=e}},object:{empty(e){"object"==typeof e&&Object.keys(e).forEach(function(t){delete e[t]})},isEmpty:e=>"object"!=typeof e||0==Object.keys(e).length}};t.a=a},function(e,t,n){"use strict";var a=n(1);function s(e,t,n){this.baseName=e,this.caption=t,this.hasMultiplier=n,this.attributes=[]}function i(e,t,n=0){this.base=e,this.type=t,this.value=n}s.TYPE_CONSTANT=Symbol(),s.TYPE_MULTIPLIER=Symbol(),s.TYPE_TOTAL=Symbol(),s.prototype={appendAttribute(e,t){return e&&void 0===this[e]&&(this[e]=t),this},show(e,t){switch("number"!=typeof t&&(t=parseInt(t)),e){case s.TYPE_CONSTANT:{let e=Object(a.b)(this.caption);return e+=t<0?"-":"+",e+=t,this.hasMultiplier||(e+="%"),e}case s.TYPE_MULTIPLIER:{let e=Object(a.b)(this.caption);return e+=t<0?"-":"+",e+=t,e+="%"}case s.TYPE_TOTAL:{let e=Object(a.b)("Total |,|總")+Object(a.b)(this.caption);return e+=t<0?"-":"+",e+=t,e+="%"}}},createSimpleStat(e,t){return new i(this,e,t)}},i.prototype={show(){return this.base.show(this.type,this.value)},statValue(e){return void 0!==e&&(this.value=e),this.value}},t.a=s},function(module,__webpack_exports__,__webpack_require__){"use strict";var _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_strings_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2);const GLOBAL_EXTRA_ATTRIBUTE_VALUE={none:"@none"};function getStackBranchIdKey(e){return"id"+e.branchAttributes.id}function TempSkillEffect(){this.branchs=[],this.attributes={}}function TempSkillBranch(e){this.parent=e,this.branchAttributes={},this.stats=[],this.finish=!1}TempSkillEffect.prototype={from(e){return Object.getOwnPropertySymbols(e.attributes).forEach(function(t){this.appendAttribute(t,e.attributes[t])},this),e.branchs.forEach(function(e){this.newBranch().from(e)},this),this},newBranch(){const e=new TempSkillBranch(this);return this.branchs.push(e),e},overWrite:function(e){Object.getOwnPropertySymbols(e.attributes).forEach(function(t){const n=e.attributes[t];n==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.attributes[t]?delete this.attributes[t]:this.appendAttribute(t,n)},this);e.branchs.map(e=>e.no);e.branchs.forEach(function(e,t){const n=this.branchs.findIndex(t=>t.no==e.no);-1==n?this.newBranch().from(e):this.branchs[n].overWrite(e)},this)},appendAttribute(e,t){return this.attributes[e]=t,this},checkData(){return 0!=this.branchs.length}},TempSkillBranch.prototype={from:function(e){return this.no=e.no,this.name=e.name,this.branchAttributes={},Object.keys(e.branchAttributes).forEach(function(t){this.appendBranchAttribute(t,e.branchAttributes[t])},this),e.stats.forEach(function(e){this.appendStat(e.base.baseName,e.value,"").type=e.type},this),this},appendBranchAttribute(e,t){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.appendBranchAttribute.call(this,...arguments)},findLocation(){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.findLocation.call(this)},appendStat(e,t,n){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.b.prototype.appendStat.call(this,...arguments)},overWrite:function(e){if(""!=e.name)this.name!=e.name&&(this.name=e.name,_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.object.empty(this.branchAttributes)),Object.keys(e.branchAttributes).forEach(function(t,n){const a=e.branchAttributes[t];a==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.branchAttributes[t]?delete this.branchAttributes[t]:this.appendBranchAttribute(t,a)},this),e.stats.forEach(function(e){let t=this.stats.find(t=>e.base===t.base&&e.type===t.type);void 0===t?this.appendStat(e.base.baseName,e.value,"").type=e.type:t.statValue(e.value)},this);else{const e=this.parent.branchs;e.splice(e.indexOf(this),1)}}};const GLOBAL_ICON_DATA={Sword:"",Staff:""},MAIN_WEAPON_TEXT_LIST=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],SUB_WEAPON_TEXT_LIST=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],BODY_ARMOR_TEXT_LIST=["輕量化","重量化","一般"];function getEffectHTML(sef,attr_name,data){const safeEval=str=>{try{return eval(str)}catch(e){return console.warn(e),"?"}},ICON_DATA={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST]:"",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE]:"",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:["","","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:["",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:["",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:["","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:["","","","","","",""],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME]:""},TITLE_DATA={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST]:"MP消耗",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE]:"射程",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:"類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:"傷害類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:"慣性類型",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:"連擊",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:"動作時間",[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME]:["","詠唱時間","蓄力時間"]},TEXT_LIST={[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]:["瞬發","須詠唱","須蓄力","被動"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE]:["物理","魔法"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE]:["物理","魔法","普通攻擊"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO]:["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME]:["極慢","慢","稍慢","一般","稍快","快","極快"]},{SLv:SLv,CLv:CLv}=data;let title=TITLE_DATA[attr_name],v=sef.attributes[attr_name],tail=null;const icon=Array.isArray(ICON_DATA[attr_name])?ICON_DATA[attr_name][v]:ICON_DATA[attr_name];switch(attr_name){case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME:title=TITLE_DATA[attr_name][sef.attributes[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE]],tail="sec|,|秒";case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST:v=safeEval(v);break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE:v="-"!=v?safeEval(v)+"m":Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("無限制");break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME:v=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(TEXT_LIST[attr_name][v])}const he=document.createElement("div");he.className="skill_attribute";let res=`<span class="_icon">${icon}</span><span class="_title">${Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(title)}</span><span class="_value">${v}</span>`;return null!==tail&&(res+=`<span class="_tail">${Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(tail)}</span>`),he.innerHTML=res,he}const SUFFIX_LIST=["extra","poration"],EXTRA_FIX_LIST=["stack"];function getBranchHTML(branch,data){if(branch.finish)return null;function safeEval(str,dftv){try{return eval(str)}catch(e){return console.warn(e),void 0===dftv?"?":dftv}}function replaceExtraFromulaValue(e){const t={STR:"角色STR",DEX:"角色DEX",INT:"角色INT",AGI:"角色AGI",VIT:"角色VIT",BSTR:"角色基礎STR",BDEX:"角色基礎DEX",BINT:"角色基礎INT",BAGI:"角色基礎AGI",BVIT:"角色基礎VIT",shield_refining:"盾精煉值",dagger_atk:"小刀ATK"};return Object.keys(t).forEach(n=>{e=e.replace(new RegExp(n,"g"),t[n])}),e=e.replace(new RegExp("*","g"),"×")}function processText(e,t){const n=e.branchAttributes;let a=safeEval("`"+n[void 0===t?"text":t]+"`");return void 0!==n.mark&&n.mark.split(/\s*,\s*/).forEach(e=>{a=a.replace(new RegExp(e,"g"),lightText(e))}),void 0!==n.branch&&n.branch.split(/\s*,\s*/).forEach(e=>{a=a.replace(new RegExp(e,"g"),lightText(e))}),void 0!==n.skill&&n.skill.split(/\s*,\s*/).forEach(e=>{a=a.replace(new RegExp(e,"g"),lightText(e))}),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a)}function processValue(e,t){t=Object.assign({calc:!0,tail:""},t);const n=document.createElement("span");return n.innerHTML=(t.calc?safeEval(e):e)+t.tail,e.includes("stack")&&n.classList.add("effect_by_stack"),n.outerHTML}function simpleCreateHTML(e,t,n){const a=document.createElement(e);return null!==a&&(Array.isArray(t)?a.classList.add(...t):a.classList.add(t)),null!=n&&(a.innerHTML=n),a}function createSkillAttributeScope(e,t,n,a){const s=simpleCreateHTML("div","skill_attribute");return null!==e&&s.appendChild(simpleCreateHTML("span","_icon",e)),null!==t&&s.appendChild(simpleCreateHTML("span","_title",t)),null!=n&&s.appendChild(simpleCreateHTML("span","_value",n)),null!=a&&s.appendChild(simpleCreateHTML("span","_tail",a)),s}function lightText(e){return'<span class="light">'+e+"</span>"}function darkText(e){return'<span class="dark">'+e+"</span>"}function markText(e){return lightText(e)}function getPorationHTML(e){const t=e.branchAttributes,n={physical:"物理",magic:"魔法",normal_attack:"一般攻擊",none:"不受慣性影響"},a=Object.assign({},n,{auto:n[t.damage],none:"不影響慣性"});return{one:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("傷害慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(n[t.damage])),two:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("造成慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(a[t.poration]))}}function getDamageElementHTML(e){const t=simpleCreateHTML("div","skill_attribute");return"arrow"!=e&&t.appendChild(simpleCreateHTML("span",["_icon","element_"+e,"element_ball"])),t.appendChild(simpleCreateHTML("span",["_value","element_value"],Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)({neutral:"Neutral|,|無屬性",fire:"Fire|,|火屬性",water:"Water|,|水屬性",earth:"Earth|,|地屬性",wind:"Wind|,|風屬性",light:"Light|,|光屬性",dark:"Dark|,|暗屬性",arrow:"套用箭矢屬性"}[e]))),t}const{SLv:SLv,CLv:CLv}=data,btype=branch.name,suffix=[];let attr=branch.branchAttributes,p=branch.findLocation()+1,c=branch.parent.branchs[p];for(;void 0!==c&&-1!=SUFFIX_LIST.indexOf(c.name);)suffix.push(c),c=branch.parent.branchs[++p];const extra_fix=branch.parent.branchs.filter(e=>-1!=EXTRA_FIX_LIST.indexOf(e.name)),stack_value_list=extra_fix.filter(e=>"stack"==e.name&&-1!=(attr.stack_id||"").split(",").indexOf(e.branchAttributes.id)).map(e=>safeEval(data.stackValues[getStackBranchIdKey(e)])),stack=stack_value_list.length>1?stack_value_list:stack_value_list[0];switch(btype){case"stack":{const e=simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),t=simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),n=simpleCreateHTML("input","mid");n.value=data.stackValues[getStackBranchIdKey(branch)];const a=branch;e.addEventListener("click",function(e){const t=parseInt(a.branchAttributes.min,10),s=parseInt(n.value,10);s!=t&&(n.value=s-1,n.dispatchEvent(new Event("change")))}),t.addEventListener("click",function(e){const t=parseInt(a.branchAttributes.max,10),s=parseInt(n.value,10);s!=t&&(n.value=s+1,n.dispatchEvent(new Event("change")))}),n.addEventListener("change",function(e){const t=parseInt(a.branchAttributes.max,10),n=parseInt(a.branchAttributes.min,10);a.branchAttributes.min;let s=parseInt(this.value,10);s>t?s=t:s<n&&(s=n),this.value=s,data.stackValues[getStackBranchIdKey(a)]=s,_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_1__.a.SkillSystem.skillRoot.controller.updateSkillHTML()}),n.addEventListener("focus",function(e){this.select()});const s=simpleCreateHTML("div","scope1");void 0!==attr.name&&s.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name))),s.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Min|,|最小值"),processValue(attr.min))),void 0!==attr.max&&s.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Max|,|最大值"),processValue(attr.max)));const i=simpleCreateHTML("div","scope2");i.appendChild(e),i.appendChild(n),i.appendChild(t);const l=simpleCreateHTML("div",["content","content_line"]);l.appendChild(s),l.appendChild(i);const r=simpleCreateHTML("div",["branch","branch_"+btype]);return r.appendChild(l),r}case"poration":{const e=simpleCreateHTML("div",["branch","branch_"+btype]),t=simpleCreateHTML("div","content"),{one:n,two:a}=getPorationHTML(branch);return t.appendChild(n),t.appendChild(a),e.appendChild(t),branch.finish=!0,e}case"damage":{let e=null;void 0!==attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));let t="";switch(attr.title){case"normal":t="1"==attr.frequency?"單下傷害":"總傷害";break;case"each":t="每下傷害";break;case"normal_attack":t="一般攻擊傷害提升"}const n=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t)),a=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("physical"==attr.damage_type?"Valid ATK|,|有效ATK":"Valid MATK|,|有效MATK"));t="",attr.constant.split(",,").forEach((e,n)=>{0==n?0!==(e=processValue(e))&&(t+=e):t+="+"+Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(replaceExtraFromulaValue(e))}),""===t&&(t="0");const s=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Constant|,|技能常數"),t);t="",attr.multiplier.split(",,").forEach((e,n)=>{0==n?0!==(e=processValue(e))&&(t+=e):t+="+"+Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(replaceExtraFromulaValue(e))}),""===t&&(t="0");const i=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Multiplier|,|技能倍率"),t,"%");let l=null;if(attr.aliment_name){l=simpleCreateHTML("div",["content","content_line"]);const e=simpleCreateHTML("div","scope1");e.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Aliment|,|異常狀態")));const t=simpleCreateHTML("div","scope2");t.appendChild(createSkillAttributeScope(null,null,attr.aliment_name)),t.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Chance|,|機率"),processValue(attr.aliment_chance)+"%")),l.appendChild(e),l.appendChild(t)}t="single"==attr.type?"Single|,|單體":"AOE|,|範圍";const r=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t));let c=null;attr.element&&(c=getDamageElementHTML(attr.element));let _=null,o=null;(parseInt(attr.frequency)>1||"each"==attr.title)&&(_=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Frequency|,|傷害次數"),processValue(attr.frequency)),t="common"==attr.judgment?"common|,|共用判定":"separate|,|分開判定",o=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t)));const u=suffix.find(e=>"poration"==e.name);let p=null,d=null;if(void 0!==u){const{one:e,two:t}=getPorationHTML(u);p=e,d=t,u.finish=!0}const E=suffix.filter(e=>"extra"==e.name),m=document.createDocumentFragment();E.forEach(e=>{const t=e.branchAttributes;let n=t.condition;void 0===n&&(n="技能加成");const a=simpleCreateHTML("div",["content","content_line"]),s=simpleCreateHTML("div","scope1");s.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(n)));const i=simpleCreateHTML("div","scope2");if(t.constant){const e=t.constant,n=e>=0?"+":"";e=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)("Skill Constant |,|技能常數")+n+e,e<0&&(e=darkText(e)),i.appendChild(createSkillAttributeScope(null,null,e))}t.element&&i.appendChild(getDamageElementHTML(t.element)),t.caption&&i.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(e=>{const t=e.statValue(safeEval(e.statValue()));let n=e.show();n=t<0?darkText(n):n,i.appendChild(createSkillAttributeScope(null,null,processValue(n,{calc:!1})))}),a.appendChild(s),a.appendChild(i),m.appendChild(a)});const h=simpleCreateHTML("div","top");null!==e&&h.appendChild(e);const T=simpleCreateHTML("div","scope1");T.appendChild(n),T.appendChild(r),null!==c&&T.appendChild(c),null!==o&&T.appendChild(o),null!==_&&T.appendChild(_),null!==p&&T.appendChild(p),null!=d&&T.appendChild(d);const b=simpleCreateHTML("div","scope2");b.appendChild(a),b.appendChild(s),b.appendChild(i);const f=simpleCreateHTML("div","content");f.appendChild(T),f.appendChild(b);const O=simpleCreateHTML("div",["branch","branch_"+btype]);return O.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_branchIndex,branch.findLocation()),0!=h.childElementCount&&O.appendChild(h),O.appendChild(f),null!==l&&O.appendChild(l),m.childElementCount>0&&O.appendChild(m),branch.finish=!0,O}case"buffs":case"next":case"passive":case"heal":{let e=null;attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));let t=attr.condition;"auto"==t&&(t="施放成功後"),"hit"==t&&(t="命中成功後"),"next"==btype&&(t="1"==attr.frequency?"下一招技能":`之後的${attr.frequency}招技能`),"passive"==btype&&(t="Passive|,|被動效果");const n="none"!=t?simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(t)):null;let a=null;attr.end_condition&&(a=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.end_condition)));let s=null,i;if(attr.duration){let e=processValue(attr.duration);s=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(`in ${e} secs|,|${e}秒內`))}switch(attr.type){case"self":i="自身";break;case"party":i="全隊伍";break;case"aura":i="光環內的隊伍成員";break;case"none":i="none"}const l="none"!=i?simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(i)):null,r=simpleCreateHTML("div","scope1");null!==n&&r.appendChild(n),null!==a&&r.appendChild(a),null!==s&&r.appendChild(s),null!=l&&r.appendChild(l);const c=simpleCreateHTML("div","scope2");if(attr.caption)c.appendChild(simpleCreateHTML("div","text_scope",processText(branch,"caption")));else{const e=_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_1__.a.CharacterSystem.StatList(),t=[];branch.stats.forEach(e=>{const n=e.statValue(safeEval(e.statValue()));let a=e.show();a=n<0?darkText(a):a,t.push(a)}),t.forEach(e=>{c.appendChild(createSkillAttributeScope(null,null,processValue(e,{calc:!1})))})}const _=simpleCreateHTML("div","top");null!==e&&_.appendChild(e);const o=simpleCreateHTML("div",["content","content_line"]);o.appendChild(r),o.appendChild(c);const u=simpleCreateHTML("div",["branch","branch_"+btype]);return u.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_branchIndex,branch.findLocation()),0!=_.childElementCount&&u.appendChild(_),u.appendChild(o),u}case"text":case"tips":{let e=null;attr.name&&(e=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_2__.b)(attr.name)));let t=simpleCreateHTML("div","text_scope",processText(branch));const n=simpleCreateHTML("div",["branch","branch_"+btype]);n.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_branchIndex,branch.findLocation());const a=simpleCreateHTML("div","top");null!==e&&a.appendChild(e);const s=simpleCreateHTML("div","content");return s.appendChild(t),0!=a.childElementCount&&n.appendChild(a),n.appendChild(s),n}case"list":{const e=[];e.push(branch);let t=branch.findLocation()+1,n=branch.parent.branchs[t];for(;void 0!==n&&n.name==btype;)e.push(n),n=branch.parent.branchs[++t];const a=simpleCreateHTML("ul","_lists");e.forEach(e=>{a.appendChild(simpleCreateHTML("li",null,processText(e))),e.finish=!0});const s=simpleCreateHTML("div",["branch","branch_"+btype]);s.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_branchIndex,branch.findLocation());const i=simpleCreateHTML("div","content");return i.appendChild(a),s.appendChild(i),s}}return null}__webpack_exports__.a=function(e){const t=e.currentSkill,n=e,a=e.skillLevel,s=e.characterLevel;let i=(new TempSkillEffect).from(t.defaultEffect);let l=!1;if(t.effects.forEach(function(e){if(l)return;let{mainWeapon:a,subWeapon:s,bodyArmor:r}=e;return-1==(c={mainWeapon:a,subWeapon:s,bodyArmor:r}).mainWeapon&&-1==c.subWeapon&&-1==c.bodyArmor||-1!=n.mainWeapon&&n.mainWeapon==c.mainWeapon||-1!=n.subWeapon&&n.subWeapon==c.subWeapon||-1!=n.bodyArmor&&n.bodyArmor==c.bodyArmor?(e!=t.defaultEffect&&i.overWrite(e),void(l=!0)):void 0;var c}),l){const t=document.createDocumentFragment(),n=[_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.MP_COST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.RANGE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.SKILL_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.DAMAGE_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.PORATION_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.IN_COMBO,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.ACTION_TIME,_SkillElements_js__WEBPACK_IMPORTED_MODULE_0__.c.CASTING_TIME],l=document.createElement("div");l.className="skill_attributes",n.forEach(function(e){if(void 0===i.attributes[e])return;const t=getEffectHTML(i,e,{SLv:a,CLv:s});t&&l.appendChild(t)}),t.appendChild(l);const r=document.createElement("div");if(r.className="skill_branchs",i.checkData()){null===e.stackValues&&(e.stackValues={},i.branchs.forEach(t=>{if("stack"==t.name){const n=t.branchAttributes,a="auto"==n.default?n.min:n.default;e.stackValues[getStackBranchIdKey(t)]=a}}));const t=e.stackValues;i.branchs.forEach(e=>{const n=getBranchHTML(e,{SLv:a,CLv:s,stackValues:t});null!==n&&r.appendChild(n)})}else{const e=document.createElement("div");e.classList.add("no_data"),e.innerHTML="此技能資料尚未齊全。",r.appendChild(e)}return t.appendChild(r),t}{const e=document.createElement("div");return e.classList.add("no_data"),e.innerHTML="所選取的裝備無法使用此技能。",e}}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(0);const i=0,l=1,r=1,c=2,_="預設",o=3,u=4,p=5,d=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],E=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],m=["輕量化","重量化","一般"],h=6,T=7,b=8,f=9,O=10,L=11,M=12,C=13,A=14,P=15,k=16,S=["瞬發","須詠唱","須蓄力","被動"],v=["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],D=["極慢","慢","稍慢","一般","稍快","快","極快"],I="Skill Tree Category",y=2,g="Skill Tree",j=2;var B=function(e){e.skillTreeCategorys.forEach(e=>{e.skillTrees.forEach(e=>{e.skills.forEach(e=>{const t=e.defaultEffect;t&&t.branchs.forEach(e=>{!function(e){const t=function(e,t){Object.keys(t).forEach(n=>{void 0===e.branchAttributes[n]&&e.appendBranchAttribute(n,t[n])})};switch(e.name){case"damage":t(e,{constant:"0",multiplier:"0",type:"single",base:"auto",frequency:"1",end_position:"target",affective_area:"circle",title:"normal",judgment:"common",cycle:"1",aliment_chance:"0",damage_type:"physical"});break;case"stack":t(e,{min:"1",default:"auto"});break;case"buffs":case"hit":case"heal":t(e,{type:"self",condition:"auto"});break;case"next":t(e,{type:"none",frequency:"1"});break;case"poration":t(e,{poration:"auto"});break;case"passive":case"text":case"tips":case"list":case"head":case"extra":break;default:console.warn("Unknow Skill Branch Name."),console.log(e)}}(e)})})})})};function R(){this.skillRoot=new s.d(this)}R.prototype={init(){return new Promise((e,t)=>{$.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=170573319&single=true&output=csv",t=>{!function(e,t){const n=$.csv.toArrays(t);let B=null;const R=[s.f.TYPE,s.e.TYPE,s.a.TYPE,s.c.TYPE,s.b.TYPE],W=function(e,t){if(R.indexOf(e.TYPE)<=R.indexOf(t))return e;for(;e.TYPE!=t;)e=e.parent;return e},x=function(e,t){return e===t?null:e};n.forEach(function(t,n){try{if(0==n)return;const w=t[i];if(""!=w){const n=t[l];switch(n){case I:{const n=t[y];B=e.newElement(s.f.TYPE,{no:w,name:n})}break;case g:{B=W(B,s.f.TYPE);const e=t[j];B=B.newElement(s.e.TYPE,{no:w,name:e})}break;default:if(""!=n){B=W(B,s.e.TYPE);const e=t[r];B=B.newElement(s.a.TYPE,{no:w,name:e})}case"":{const e=d.indexOf(t[o]),n=E.indexOf(t[u]),a=m.indexOf(t[p]),i=t[c];if(""==i)return;const l=(B=W(B,s.a.TYPE)).newElement(s.c.TYPE,{mainWeapon:e,subWeapon:n,bodyArmor:a});i==_&&B.setDefaultEffect(l),B=l.appendAttribute(s.c.MP_COST,x(t[L],"")).appendAttribute(s.c.RANGE,x(t[M],"")).appendAttribute(s.c.SKILL_TYPE,x(S.indexOf(t[C]),-1)).appendAttribute(s.c.IN_COMBO,x(v.indexOf(t[A]),-1)).appendAttribute(s.c.ACTION_TIME,x(D.indexOf(t[P]),-1)).appendAttribute(s.c.CASTING_TIME,x(t[k],""))}}}if(R.indexOf(B.TYPE)<R.indexOf(s.c.TYPE))return;const H=t[h];if(""!=H){B=W(B,s.c.TYPE);const e=t[T];B=B.newElement(s.b.TYPE,{no:H,name:e})}const N=t[b],U=t[f];""!=N&&(a.a.CharacterSystem.findStatBase(N)?B.appendStat(N,U,t[O]):B.appendBranchAttribute(N,U))}catch(e){console.warn("[Error] When Load Skill Data"),console.log(t)}})}(this.skillRoot,t),B(this.skillRoot),e()})})},init_SkillQuery(e){this.skillRoot.controller.initSkillQueryHTML(e)}};var W=R;var x=n(5);function w(){this.statList=[]}w.prototype={init(){},init_statList(){return new Promise((e,t)=>{$.get("./src/CharacterSystem/module/other/BaseStatData.csv",t=>{!function(e,t){$.csv.toArrays(t).forEach(function(t,n){0!=n&&e.appendStatBase(t[0],t[1],t[2])})}(this,t),e()})})},appendStatBase(e,t,n,a){const s=new x.a(e,t,n);return this.statList.push(s),s},StatList(){return this.statList},findStatBase(e){return this.StatList().find(t=>t.baseName==e)}};var H=w,N=n(1);var U=function(e){const{top_menu:t}=e;!function(e){const t=function(e){const t=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),n=document.querySelector('*[data-main-scope="1"]');n.setAttribute("data-main-scope",0),n.classList.add("hidden");let a=document.querySelectorAll("*[data-main-scope]")[t];a.setAttribute("data-main-scope",1),a.classList.remove("hidden")},n=document.createDocumentFragment();["Skills Information|,|技能資料|,|スキルインフォ"].forEach(e=>{const a=document.createElement("li");a.innerHTML=Object(N.b)(e),a.addEventListener("click",t),n.appendChild(a)});const a=document.createElement("ul");a.appendChild(n),e.appendChild(a)}(t),Object(N.a)(document),document.getElementById("LoadingPage").classList.add("hidden")};function Y(e){const t=document.createElement("div");t.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(t)}try{!async function(){a.a.SkillSystem=new W,a.a.CharacterSystem=new H,Y("載入角色能力清單..."),await a.a.CharacterSystem.init_statList(),Y("載入技能清單..."),await a.a.SkillSystem.init(),a.a.SkillSystem.init_SkillQuery(document.querySelector("#SkillQuery > .main")),U({top_menu:document.getElementById("top_menu")})}()}catch(e){Y(e),console.log(e)}}]);