!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=12)}([function(e,t,a){"use strict";a.d(t,"a",function(){return _}),a.d(t,"b",function(){return l});var n=a(7),r=a.n(n);var i="data-langtext";function _(e){var t=e.querySelectorAll("a[".concat(i,"], input[").concat(i,"]"));Array.from(t).forEach(function(e){var t,a;e.innerHTML=(t=e.getAttribute(i),(a=t.split("|,|"))[1]||a[0])})}function l(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return"";var n=document.createElement("a");return n.setAttribute(i,e),a.href&&(n.href=a.href),a.class&&(Array.isArray(a.class)?(t=n.classList).add.apply(t,r()(a.class)):n.classList.add(a.class)),n.outerHTML}},function(e,t,a){"use strict";var n=a(2),r=a.n(n);var i=a(11),_=a(0),l=a(4),c=a(3),o=Symbol();function s(e){this.MAIN_NODE=null,this.skillRoot=e,this.currentData={mainWeapon:-1,subWeapon:-1,bodyArmor:-1,skillLevel:10,characterLevel:185,currentSkill:null,stackValues:{}}}s.prototype={initSkillQueryHTML:function(e){var t=this.skillRoot;this.MAIN_NODE=e;var a=[h.TYPE,E.TYPE,f.TYPE,o,T.CATEGORY_EQUIPMENT,T.TYPE],n=document.createDocumentFragment();a.forEach(function(e){var a=this.getSkillElementScope(e);switch(n.appendChild(a),e){case h.TYPE:a.appendChild(this.createSkillQueryScopeHTML(t,Object(l.a)().menu));break;case E.TYPE:t.skillTreeCategorys.forEach(function(e){a.appendChild(this.createSkillQueryScopeHTML(e,Object(l.a)().menu))},this);break;case o:a.appendChild(this.createSkillQueryScopeHTML(null,e))}},this),e.appendChild(n)},getSkillElementScope:function(e){var t,a=(t={},r()(t,h.TYPE,"SkillRoot_scope"),r()(t,E.TYPE,"SkillTreeCategory_scope"),r()(t,f.TYPE,"SkillTree_scope"),r()(t,T.TYPE,"Skill_scope"),r()(t,o,"SkillLevel_scope"),r()(t,T.CATEGORY_EQUIPMENT,"SkillEquipment_scope"),t),n=this.MAIN_NODE.getElementsByClassName(a[e])[0];return n||(n=document.createElement("div")).classList.add(a[e]),n},getSkillElementNoStr:function(e){for(var t="";e.parent;)t=e.findLocation()+(""!=t?"-":"")+t,e=e.parent;return t},selectSkillElement:function(e){var t=e.split("-"),a=null;return t.forEach(function(e,t){switch(e=parseInt(e,10),t){case 0:a=this.skillRoot.skillTreeCategorys[e];break;case 1:a=a.skillTrees[e];break;case 2:a=a.skills[e];break;case 3:a=a.branchs[e]}},this),a},updateSkillHTML:function(){var e=this.currentData.currentSkill;if(e){var t=this.getSkillElementScope(T.TYPE);c.a.element.removeAllChild(t),t.appendChild(this.createSkillQueryScopeHTML(e,T.CATEGORY_MAIN)),Object(_.a)(t)}},createSkillQueryScopeHTML:function(e,t){switch(null!==e?e.TYPE:t){case h.TYPE:switch(t){case Object(l.a)().menu:var a=this,n=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");a.getSkillElementScope(E.TYPE);var n=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),r=a.getSkillElementScope(E.TYPE).querySelectorAll("div._menu"),i=Array.from(r).find(function(e){return!e.classList.contains("hidden")});i&&i.classList.add("hidden"),r[n].classList.remove("hidden"),c.a.element.removeAllChild(a.getSkillElementScope(f.TYPE)),c.a.element.removeAllChild(a.getSkillElementScope(T.TYPE)),c.a.element.removeAllChild(a.getSkillElementScope(T.CATEGORY_EQUIPMENT))},r=document.createElement("div");r.className="_"+t;var s=document.createDocumentFragment();e.skillTreeCategorys.forEach(function(e){var t=document.createElement("li");t.innerHTML=Object(_.b)(e.name),t.setAttribute(Object(l.a)().data_skillElementNo,a.getSkillElementNoStr(e)),t.addEventListener("click",n),s.appendChild(t)});var u=document.createElement("ul");return u.appendChild(s),r.appendChild(u),r}case E.TYPE:switch(t){case Object(l.a)().menu:var p=this,d=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");var a=p.getSkillElementScope(f.TYPE);a.innerHTML="";var n=p.selectSkillElement(this.getAttribute(Object(l.a)().data_skillElementNo));a.appendChild(p.createSkillQueryScopeHTML(n,f.CATEGORY_TABLE)),Object(_.a)(a),c.a.element.removeAllChild(p.getSkillElementScope(T.TYPE)),c.a.element.removeAllChild(p.getSkillElementScope(T.CATEGORY_EQUIPMENT))},m=document.createElement("div");m.className="_"+t,m.classList.add("hidden");var b=document.createDocumentFragment();e.skillTrees.forEach(function(e){var t=document.createElement("li");t.innerHTML=Object(_.b)(e.name),t.setAttribute(Object(l.a)().data_skillElementNo,p.getSkillElementNoStr(e)),t.addEventListener("click",d),b.appendChild(t)});var v=document.createElement("ul");return v.appendChild(b),m.appendChild(v),m}case f.TYPE:switch(t){case f.CATEGORY_TABLE:var O=e,L=O.parent.findLocation(),M=O.findLocation(),C=this,P=function(e){var t=C.selectSkillElement(this.getAttribute(Object(l.a)().data_skillElementNo));if(C.currentData.currentSkill!==t){var a=this.parentNode.parentNode.getElementsByClassName("cur")[0];if(a&&a.classList.remove("cur"),this.classList.add("cur"),C.currentData.currentSkill=t,t.checkData()){c.a.object.empty(C.currentData.stackValues),C.currentData.stackValues=null;var n=t.defaultEffect,r=n.mainWeapon,i=n.subWeapon,o=n.bodyArmor;Object.assign(C.currentData,{mainWeapon:r,subWeapon:i,bodyArmor:o})}var s=C.createSkillQueryScopeHTML(t,T.CATEGORY_EQUIPMENT),u=C.getSkillElementScope(T.CATEGORY_EQUIPMENT);c.a.element.removeAllChild(u),null!==s&&(u.appendChild(s),Object(_.a)(u)),C.updateSkillHTML()}},g=function(e){var t=document.createElement("table");return e.ary.forEach(function(e){var a=document.createDocumentFragment();e.forEach(function(e){var t=document.createElement("td");if(e>1&&t.setAttribute("rowspan",e),a.appendChild(t),e<-1)for(++e;0!=e;){++e;var n=document.createElement("td");n.setAttribute("data-empty","1"),a.appendChild(n)}});var n=document.createElement("tr");n.appendChild(a),t.appendChild(n)}),t}(function(e,t){var a=null;switch(e){case 0:switch(t){case 0:a=[[4,2,2,1],[1],[2,2,1],[1],[2,2,-2],[1,1]];break;case 1:a=[[3,2,-3],[1,-2],[1,1,1,1],[2,-4],[1,1,-2]];break;case 2:a=[[2,1,1,1,1],[1,1,1,1],[-5],[1,1,1,-2]];break;case 3:a=[[2,1,1,1,1],[1,1,1,1],[1,1,-3],[1,-4]];break;case 4:a=[[4,1,1,-2],[1,1,1,1],[1,1,-2],[1,1,-2]];break;case 5:a=[[4,2,2,1],[1],[2,1,1],[-2],[1,-3],[1,1,-2]];break;case 6:a=[[2,2,2,2,1],[1],[1,1,-3],[2,-4],[1,1,-2]]}break;case 1:switch(t){case 0:a=[[2,1,1],[-2],[2,1,1],[-2]];break;case 1:case 2:a=[[2,1,1,1],[1,-2],[1,1,-2]];break;case 3:case 4:case 5:a=[[1,1,1,1],[1,1,1,1]]}break;case 2:switch(t){case 0:a=[[-2],[-2],[-2],[2,1],[1],[2,1],[1]];break;case 1:a=[[-4],[1,1,1,1],[1,1,1,1],[1,1,1,1]];break;case 2:a=[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]}break;case 3:switch(t){case 0:a=[[4,1,1,1,1],[1,1,-2],[2,1,-2],[1,1,1],[-5]];break;case 1:a=[[3,1,1,1,1],[1,1,-2],[1,1,-2],[1]];break;case 2:a=[[3,1,1],[1,1],[1,1]]}break;case 4:switch(t){case 0:case 1:a=[[1,1,1],[1,1,1]]}}return null===a&&(a=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]]),{ary:a}}(L,M)),A=-1;return Array.from(g.getElementsByTagName("td")).forEach(function(e){if("1"!=e.getAttribute("data-empty")){++A;var t=O.skills[A];void 0!==t?"@lock"!=t.name?(e.innerHTML=Object(_.b)(t.name),e.setAttribute(Object(l.a)().data_skillElementNo,C.getSkillElementNoStr(t)),e.addEventListener("click",P)):e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path opacity=".87" d="M0 0h24v24H0V0z"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>':e.innerHTML="-"}}),g}case T.TYPE:switch(t){case T.CATEGORY_MAIN:if(e.checkData())return Object(i.a)(this.currentData);var y=document.createElement("div");return y.classList.add("no_data"),y.innerHTML="此技能資料尚未更新。",y;case T.CATEGORY_EQUIPMENT:var D=this,S=function(e){for(var t=["mainWeapon","subWeapon","bodyArmor"],a=[this.getAttribute(Object(l.a)().data_mainWeapon),this.getAttribute(Object(l.a)().data_subWeapon),this.getAttribute(Object(l.a)().data_bodyArmor)],n=0;n<a.length;++n){var r=a[n];if(null!==r&&""!==r)return D.currentData[t[n]]=parseInt(r,10),this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),void D.updateSkillHTML()}},k=[],I=[],x=[];e.effects.forEach(function(e){var t=e.mainWeapon,a=e.subWeapon,n=e.bodyArmor;-1==k.indexOf(t)&&k.push(t),-1==I.indexOf(a)&&I.push(a),-1==x.indexOf(n)&&x.push(n)});var j=document.createDocumentFragment(),w=[this.currentData.mainWeapon,this.currentData.subWeapon,this.currentData.bodyArmor];return[k,I,x].forEach(function(e,t){if(1!=e.length||-1!=e[0]){var a,n,r,i;switch(e){case k:i=Object(l.a)().data_mainWeapon,r="Main Weapon|,|主手武器",a=["","","","","","","","","",""],n=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"];break;case I:i=Object(l.a)().data_subWeapon,r="Sub Weapon|,|副手武器",a=["","","","","",""],n=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"];break;case x:i=Object(l.a)().data_bodyArmor,r="Body Armor|,|身體裝備",a=["","",""],n=["輕量化","重量化","一般"]}var c=null,o=document.createElement("ul");if(e.forEach(function(e){var r=document.createElement("li");w[t]==e&&r.classList.add("cur"),r.setAttribute(i,e),r.addEventListener("click",S),-1!=e?(r.innerHTML='<span class="icon">'.concat(a[e],'</span><span class="value">').concat(Object(_.b)(n[e]),"</span>"),o.appendChild(r)):(r.innerHTML='<span class="icon"></span><span class="value">'.concat(Object(_.b)("None|,|無限制"),"</span>"),c=r)}),e===k&&-1!==k.indexOf(0)&&-1===k.indexOf(9)){var s=document.createElement("li");s.innerHTML='<span class="icon">'.concat(a[9],'</span><span class="value">').concat(Object(_.b)(n[9]),"</span>"),s.setAttribute(i,0),o.appendChild(s),s.addEventListener("click",S)}null!==c&&o.appendChild(c);var u=document.createElement("div"),p=document.createElement("div");p.innerHTML=Object(_.b)(r),u.appendChild(p),u.appendChild(o),j.appendChild(u)}}),0!=j.childElementCount?j:null}case o:for(var B=this,R=function(e){var t=B.currentData.currentSkill;this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),B.currentData.skillLevel=parseInt(this.getAttribute(Object(l.a)().data_skillLevel),10),null!=t&&B.updateSkillHTML()},W=document.createElement("ul"),U=1;U<=10;++U){var K=document.createElement("li");K.innerHTML="Lv. "+U,K.setAttribute(Object(l.a)().data_skillLevel,U),K.addEventListener("click",R),U==this.currentData.skillLevel&&K.classList.add("cur"),W.appendChild(K)}return W}}};var u=s,p=a(5),d=a(6);function m(){Array.from(arguments).forEach(function(e,t){null==e&&(console.log("argument[".concat(t,"] of Constructor is null")),console.log(arguments))})}function h(){this.skillTreeCategorys=[],this.controller=new u(this)}function E(e,t,a){this.parent=e,this.no=t,this.name=a,this.skillTrees=[]}function f(e,t,a){this.parent=e,this.no=t,this.name=a,this.skills=[]}function T(e,t,a){this.parent=e,this.name=a,this.effects=[],this.defaultEffect=null,this.caption=""}function b(e,t,a,n){this.parent=e,this.branchs=[],this.mainWeapon=t,this.subWeapon=a,this.bodyArmor=n,this.attributes={}}function v(e,t,a){this.parent=e,this.no=t,this.name=a,this.branchAttributes={},this.stats=[]}a.d(t,"d",function(){return h}),a.d(t,"f",function(){return E}),a.d(t,"e",function(){return f}),a.d(t,"a",function(){return T}),a.d(t,"c",function(){return b}),a.d(t,"b",function(){return v}),h.TYPE=Symbol("SkillRoot"),h.prototype={TYPE:h.TYPE,newElement:function(e,t){if(e==E.TYPE){var a=t.name,n=t.no;m(n,a);var r=new E(this,n,a);return this.skillTreeCategorys.push(r),r}return null}},E.TYPE=Symbol("SkillTreeCategory"),E.prototype={TYPE:E.TYPE,newElement:function(e,t){if(e==f.TYPE){var a=t.name,n=t.no;m(n,a);var r=new f(this,n,a);return this.skillTrees.push(r),r}return null},findLocation:function(){return this.parent.skillTreeCategorys.indexOf(this)}},f.TYPE=Symbol("SkillTree"),f.prototype={TYPE:f.TYPE,newElement:function(e,t){if(e==T.TYPE){var a=t.name,n=t.no;m(n,a);var r=new T(this,n,a);return this.skills.push(r),r}return null},findLocation:function(){return this.parent.skillTrees.indexOf(this)}},f.CATEGORY_TABLE=Symbol(),T.TYPE=Symbol("Skill"),T.prototype={TYPE:T.TYPE,newElement:function(e,t){if(e==b.TYPE){var a=t.mainWeapon,n=t.subWeapon,r=t.bodyArmor;m(a,n,r);var i=new b(this,a,n,r);return this.effects.push(i),i}return null},findLocation:function(){return this.parent.skills.indexOf(this)},setDefaultEffect:function(e){return this.defaultEffect=e,this},checkData:function(){return void 0!==this.defaultEffect&&null!==this.defaultEffect}},T.CATEGORY_MAIN=Symbol(),T.CATEGORY_EQUIPMENT=Symbol(),b.TYPE=Symbol("SkillEffect"),b.prototype={TYPE:b.TYPE,newElement:function(e,t){if(e==v.TYPE){var a=t.no,n=t.name;m(a,n);var r=new v(this,a,n);return this.branchs.push(r),r}return null},findLocation:function(){return this.parent.effects.indexOf(this)},appendAttribute:function(e,t){return null!==t&&(this.attributes[e]=t),this}},b.MP_COST=Symbol("mp_cost"),b.RANGE=Symbol("range"),b.SKILL_TYPE=Symbol("skill_type"),b.IN_COMBO=Symbol("in_combo"),b.ACTION_TIME=Symbol("action_type"),b.CASTING_TIME=Symbol("casting_time"),v.TYPE=Symbol("SkillBranch"),v.prototype={TYPE:v.TYPE,appendBranchAttribute:function(e,t){return this.branchAttributes[e]=t,this},findLocation:function(){return this.parent.branchs.indexOf(this)},appendStat:function(e,t,a){var n;switch(a){case"":n=d.a.TYPE_CONSTANT;break;case"%":n=d.a.TYPE_MULTIPLIER;break;case"~":n=d.a.TYPE_TOTAL}var r=p.a.CharacterSystem.findStatBase(e).createSimpleStat(n,t);return this.stats.push(r),r}}},function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";var n=a(9),r=a.n(n),i={element:{remove:function(){Array.from(arguments);Array.from(arguments).forEach(function(e){e&&e.parentNode.removeChild(e)})},removeAllChild:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}},setAttributes:function(e,t){Object.keys(t).forEach(function(a){null!==t[a]&&e.setAttribute(a,t[a])})}},class:{extends:function(e){var t=Array.from(arguments);e.prototype=Object.create(t[1].prototype),t.forEach(function(t,a){a<=1||Object.assign(e.prototype,t.prototype)}),e.constructor=e}},object:{empty:function(e){null!==e&&"object"===r()(e)&&Object.keys(e).forEach(function(t){delete e[t]})},isEmpty:function(e){return"object"!==r()(e)||0==Object.keys(e).length}},svg:{create:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.createElementNS("http://www.w3.org/2000/svg","svg");return a=Object.assign({xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 ".concat(e," ").concat(t)},a),i.element.setAttributes(n,a),n},drawCircle:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=document.createElementNS("http://www.w3.org/2000/svg","circle");return n=Object.assign({cx:e,cy:t,r:a},n),i.element.setAttributes(r,n),r},drawPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElementNS("http://www.w3.org/2000/svg","path");return t=Object.assign({d:e},t),i.element.setAttributes(a,t),a},drawSector:function(e,t,a,n,r,_,l){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},o=document.createElementNS("http://www.w3.org/2000/svg","path");return c=Object.assign({d:i.svg.getSectorD(e,t,a,n,r,_,l),fill:"none"},c),i.element.setAttributes(o,c),o},getSectorD:function(e,t,a,n,r,i,_){var l=a*Math.cos(i*Math.PI/180)+e,c=-a*Math.sin(i*Math.PI/180)+t,o=a*Math.cos(r*Math.PI/180)+e,s=-a*Math.sin(r*Math.PI/180)+t,u=n*Math.cos(r*Math.PI/180)+e,p=-n*Math.sin(r*Math.PI/180)+t,d=n*Math.cos(i*Math.PI/180)+e,m=-n*Math.sin(i*Math.PI/180)+t;return"M".concat(l," ").concat(c," A").concat(a," ").concat(a," 0 0 ").concat(1==_?0:1," ").concat(o," ").concat(s," L").concat(u," ").concat(p," A").concat(n," ").concat(n," 0 0 ").concat(_," ").concat(d," ").concat(m," Z")},createAnimate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({attributeName:e,repeatCount:"indefinite"},t);var a=document.createElementNS("http://www.w3.org/2000/svg","animate");return i.element.setAttributes(a,t),a}}};t.a=i},function(e,t,a){"use strict";var n={menu:"menu",from:Symbol(),data_skillElementNo:"data-seno",data_mainWeapon:"data-mainw",data_subWeapon:"data-subw",data_bodyArmor:"data-armor",data_branchIndex:"data-bi"};t.a=function(){return n}},function(e,t,a){"use strict";t.a={}},function(e,t,a){"use strict";var n=a(0);function r(e,t,a){this.baseName=e,this.caption=t,this.hasMultiplier=a,this.attributes=[]}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.base=e,this.type=t,this.value=a}r.TYPE_CONSTANT=Symbol(),r.TYPE_MULTIPLIER=Symbol(),r.TYPE_TOTAL=Symbol(),r.prototype={appendAttribute:function(e,t){return e&&void 0===this[e]&&(this[e]=t),this},show:function(e,t){switch("number"!=typeof t&&(t=parseInt(t)),e){case r.TYPE_CONSTANT:var a=Object(n.b)(this.caption);return a+=t<0?"":"+",a+=t,this.hasMultiplier||(a+="%"),a;case r.TYPE_MULTIPLIER:var i=Object(n.b)(this.caption);return i+=t<0?"":"+",i+=t,i+="%";case r.TYPE_TOTAL:var _=Object(n.b)("Total |,|總")+Object(n.b)(this.caption);return _+=t<0?"":"+",_+=t,_+="%"}},createSimpleStat:function(e,t){return new i(this,e,t)}},i.prototype={show:function(){return this.base.show(this.type,this.value)},statValue:function(e){return void 0!==e&&(this.value=e),this.value}},t.a=r},function(e,t,a){var n=a(14),r=a(15),i=a(16);e.exports=function(e){return n(e)||r(e)||i()}},function(e,t,a){e.exports=a(13)},function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?e.exports=n=function(e){return a(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},n(t)}e.exports=n},function(e,t){function a(e,t,a,n,r,i,_){try{var l=e[i](_),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var _=e.apply(t,n);function l(e){a(_,r,i,l,c,"next",e)}function c(e){a(_,r,i,l,c,"throw",e)}l(void 0)})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__),_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_strings_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4),GLOBAL_EXTRA_ATTRIBUTE_VALUE={none:"@none"};function getStackBranchIdKey(e){return"id"+e.branchAttributes.id}function TempSkillEffect(){this.branchs=[],this.attributes={}}function TempSkillBranch(e){this.parent=e,this.branchAttributes={},this.stats=[],this.finish=!1}TempSkillEffect.prototype={from:function(e){return Object.getOwnPropertySymbols(e.attributes).forEach(function(t){this.appendAttribute(t,e.attributes[t])},this),e.branchs.forEach(function(e){this.newBranch().from(e)},this),this},newBranch:function(){var e=new TempSkillBranch(this);return this.branchs.push(e),e},overWrite:function(e){Object.getOwnPropertySymbols(e.attributes).forEach(function(t){var a=e.attributes[t];a==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.attributes[t]?delete this.attributes[t]:this.appendAttribute(t,a)},this);e.branchs.map(function(e){return e.no});e.branchs.forEach(function(e,t){var a=this.branchs.findIndex(function(t){return t.no==e.no});-1==a?this.newBranch().from(e):this.branchs[a].overWrite(e)},this)},appendAttribute:function(e,t){return this.attributes[e]=t,this},checkData:function(){return 0!=this.branchs.length}},TempSkillBranch.prototype={from:function(e){return this.no=e.no,this.name=e.name,this.branchAttributes={},Object.keys(e.branchAttributes).forEach(function(t){this.appendBranchAttribute(t,e.branchAttributes[t])},this),e.stats.forEach(function(e){this.appendStat(e.base.baseName,e.value,"").type=e.type},this),this},appendBranchAttribute:function(e,t){var a;return(a=_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.b.prototype.appendBranchAttribute).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))},findLocation:function(){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.b.prototype.findLocation.call(this)},appendStat:function(e,t,a){var n;return(n=_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.b.prototype.appendStat).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))},overWrite:function(e){if(""!=e.name)this.name!=e.name&&(this.name=e.name,_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.object.empty(this.branchAttributes)),Object.keys(e.branchAttributes).forEach(function(t,a){var n=e.branchAttributes[t];n==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&this.branchAttributes[t]?delete this.branchAttributes[t]:this.appendBranchAttribute(t,n)},this),e.stats.forEach(function(e){var t=this.stats.find(function(t){return e.base===t.base&&e.type===t.type});void 0===t?this.appendStat(e.base.baseName,e.value,"").type=e.type:t.statValue(e.value)},this);else{var t=this.parent.branchs;t.splice(t.indexOf(this),1)}}};var GLOBAL_ICON_DATA={Sword:"",Staff:""},MAIN_WEAPON_TEXT_LIST=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],SUB_WEAPON_TEXT_LIST=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],BODY_ARMOR_TEXT_LIST=["輕量化","重量化","一般"];function getEffectHTML(sef,attr_name,data){var _ICON_DATA,_TITLE_DATA,_TEXT_LIST,safeEval=function safeEval(str){try{return eval(str)}catch(e){return console.warn(e),"?"}},ICON_DATA=(_ICON_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.MP_COST,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.RANGE,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE,["","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.DAMAGE_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.PORATION_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.IN_COMBO,["","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.ACTION_TIME,["","","","","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.CASTING_TIME,""),_ICON_DATA),TITLE_DATA=(_TITLE_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.MP_COST,"MP消耗"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.RANGE,"射程"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE,"類型"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.DAMAGE_TYPE,"傷害類型"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.PORATION_TYPE,"慣性類型"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.IN_COMBO,"連擊"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.ACTION_TIME,"動作時間"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.CASTING_TIME,["","詠唱時間","蓄力時間"]),_TITLE_DATA),TEXT_LIST=(_TEXT_LIST={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE,["瞬發","須詠唱","須蓄力","被動"]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.DAMAGE_TYPE,["物理","魔法"]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.PORATION_TYPE,["物理","魔法","普通攻擊"]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.IN_COMBO,["可以放入連擊","無法放入連擊","不可放入連擊的第一招"]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.ACTION_TIME,["極慢","慢","稍慢","一般","稍快","快","極快"]),_TEXT_LIST),SLv=data.SLv,CLv=data.CLv,title=TITLE_DATA[attr_name],v=sef.attributes[attr_name],tail=null,icon=Array.isArray(ICON_DATA[attr_name])?ICON_DATA[attr_name][v]:ICON_DATA[attr_name];switch(attr_name){case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.CASTING_TIME:title=TITLE_DATA[attr_name][sef.attributes[_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE]],tail="sec|,|秒";case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.MP_COST:v=safeEval(v);break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.RANGE:v="-"!=v?safeEval(v)+"m":Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("無限制");break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.IN_COMBO:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.ACTION_TIME:v=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(TEXT_LIST[attr_name][v])}var he=document.createElement("div");he.className="skill_attribute";var res='<span class="_icon">'.concat(icon,'</span><span class="_title">').concat(Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(title),'</span><span class="_value">').concat(v,"</span>");return null!==tail&&(res+='<span class="_tail">'.concat(Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(tail),"</span>")),he.innerHTML=res,he}var SUFFIX_LIST=["extra","poration"],EXTRA_FIX_LIST=["stack"];function getBranchHTML(branch,data){if(branch.finish)return null;function safeEval(str,dftv){try{return eval(str)}catch(e){return console.warn(e),void 0===dftv?"?":dftv}}function replaceExtraFromulaValue(e){var t={STR:"角色STR",DEX:"角色DEX",INT:"角色INT",AGI:"角色AGI",VIT:"角色VIT",BSTR:"角色基礎STR",BDEX:"角色基礎DEX",BINT:"角色基礎INT",BAGI:"角色基礎AGI",BVIT:"角色基礎VIT",shield_refining:"盾精煉值",dagger_atk:"小刀ATK"};return Object.keys(t).forEach(function(a){e=e.replace(new RegExp(a,"g"),t[a])}),e=e.replace(new RegExp("*","g"),"×")}function processText(e,t){var a=e.branchAttributes,n=a[void 0===t?"text":t];return n=safeEval("`"+(n=n.replace(/(\$\{[^\}]+\})([%]?)/g,function(){return"%"!==RegExp.$2?processValue(RegExp.$1,{calc:!1,light:!0}):processValue(RegExp.$1,{calc:!1,tail:"%",light:!0})}))+"`"),void 0!==a.mark&&a.mark.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.branch&&a.branch.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.skill&&a.skill.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(n)}function processValue(e,t){t=Object.assign({calc:!0,tail:"",toPercentage:!1,checkHasStack:e,light:!1},t);var a,n=document.createElement("span");if(t.calc){var r=safeEval(e);Number.isInteger(r)||(r=r.toFixed(2)),a=r}else a=e;return a+=t.tail,t.toPercentage&&(a=100*a+"%"),t.checkHasStack.includes("stack")?n.classList.add("effect_by_stack"):t.light&&(a=lightText(a)),n.innerHTML=a,n.outerHTML}function simpleCreateHTML(e,t,a){var n,r=document.createElement(e);null!==r&&(Array.isArray(t)?(n=r.classList).add.apply(n,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t)):r.classList.add(t));return null!=a&&(r.innerHTML=a),r}function createSkillAttributeScope(e,t,a,n){var r=simpleCreateHTML("div","skill_attribute");return null!==e&&r.appendChild(simpleCreateHTML("span","_icon",e)),null!==t&&r.appendChild(simpleCreateHTML("span","_title",t)),null!=a&&r.appendChild(simpleCreateHTML("span","_value",a)),null!=n&&r.appendChild(simpleCreateHTML("span","_tail",n)),r}function lightText(e){return'<span class="light">'+e+"</span>"}function darkText(e){return'<span class="dark">'+e+"</span>"}function markText(e){return lightText(e)}function getPorationHTML(e){var t=e.branchAttributes,a={physical:"物理",magic:"魔法",normal_attack:"一般攻擊",none:"不受慣性影響"},n=Object.assign({},a,{auto:a[t.damage],none:"不影響慣性"});return{one:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("傷害慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(a[t.damage])),two:createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("造成慣性"),Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(n[t.poration]))}}function getDamageElementHTML(e){var t=simpleCreateHTML("div","skill_attribute");return"arrow"!=e&&t.appendChild(simpleCreateHTML("span",["_icon","element_"+e,"element_ball"])),t.appendChild(simpleCreateHTML("span",["_value","element_value"],Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)({neutral:"Neutral|,|無屬性",fire:"Fire|,|火屬性",water:"Water|,|水屬性",earth:"Earth|,|地屬性",wind:"Wind|,|風屬性",light:"Light|,|光屬性",dark:"Dark|,|暗屬性",arrow:"套用箭矢屬性",one_hand_sword:"套用單手劍屬性"}[e]))),t}function createContentLine(e,t,a){var n=simpleCreateHTML("div",["content","content_line"]),r=simpleCreateHTML("div","scope1"),i=simpleCreateHTML("div","scope2");return r.appendChild(e),i.appendChild(t),n.appendChild(r),n.appendChild(i),null!=a&&(Array.isArray(a)?_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(a).forEach(function(e){return n.appendChild(e)}):n.appendChild(a)),n}function getTargetText(e,t){var a={self:"Self|,|自身",party:t?"Team Members in Area|,|區域內的隊伍成員":"Party|,|全隊伍",aura:"Team Members in Aura|,|光環內的隊伍成員",target:"Target|,|目標",none:null}[e];return null!==a?Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(a):a}function getEffectiveAreaHTML(e){var t,a,n,r=e.branchAttributes,i="self"===r.end_position,_=simpleCreateHTML("div","scope1"),l=simpleCreateHTML("div","skill_attribute");if(l.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_character"])),l.appendChild(simpleCreateHTML("span","_value",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Character Position|,|角色位置"))),_.appendChild(l),!i){var c=simpleCreateHTML("div","skill_attribute");c.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_target"])),c.appendChild(simpleCreateHTML("span","_value",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Target Position|,|目標位置"))),_.appendChild(c)}["radius","angle","effective_area","move_distance"].forEach(function(e){if(r[e]){var i,l=r[e];switch(e){case"radius":i="Radius|,|半徑",t=safeEval(l),l=processValue(l,{tail:"m"});break;case"angle":i="Angle|,|夾角",a=safeEval(l),l=processValue(l,{tail:"°"});break;case"effective_area":n=r[e],i="Type|,|類別",l=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)({circle:"Circle|,|圓形",line:"Line|,|直線型",sector:"Sector|,|扇型"}[l]);break;case"move_distance":i="Move Distance|,|移動距離",l=processValue(l,{tail:"m"})}_.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(i),l))}});var o,s,u,p,d,m,h=document.createDocumentFragment(),E=function(e){return void 0!==e?10*e:10},f="#ff5fb7",T=void 0===r.move_distance?8:12;switch(n){case"line":case"circle":switch(s=E(i?2*t+2:2*t+T+2),o=E(2*t+2),u=E(t+1),p=o/2,d=i?u:u+E(8),m=p,n){case"circle":var b=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawCircle(d,m,E(t),{fill:"#feeaf5"});h.appendChild(b);var v=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawCircle(d,m,E(t),{stroke:"#FFD1EA",fill:"none"});v.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("stroke",{values:"".concat("#FFD1EA",";").concat(f,";").concat(f),keyTimes:"0;0.2;1",dur:"2.5s"})),h.appendChild(v);break;case"line":var O=u+E(T),L=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawPath("M".concat(u," ").concat(p-E(t)," A").concat(E(t)," ").concat(E(t)," 0 0 0 ").concat(u," ").concat(p+E(t)," L").concat(O," ").concat(p+E(t)," A").concat(E(t)," ").concat(E(t)," 0 0 0 ").concat(O," ").concat(m-E(t)," Z"),{fill:"#feeaf5"});h.appendChild(L);var M=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawCircle(u,p,E(t),{stroke:"#FFD1EA",fill:"none"});M.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("stroke",{id:"a1",values:"".concat("#FFD1EA",";").concat(f,";").concat(f),keyTimes:"0;0.2;1",dur:"1s",repeatCount:"1",begin:"0s;a2.end",fill:"freeze"})),M.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("cx",{id:"a2",values:"".concat(u,";").concat(O,";").concat(O),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),h.appendChild(M)}break;case"sector":s=E(T+6),p=(o=E(T)*Math.sin(a*Math.PI/180)+E(2))/2,d=(u=E(4))+E(8),m=p;t=2;var C=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawSector(u,p,E(0),E(T),a/2,360-a/2,1,{fill:"#feeaf5"});h.appendChild(C);var P=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawSector(u,p,E(0),E(1),a/2,360-a/2,1,{stroke:f});P.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("d",{id:"a1",to:_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.getSectorD(u,p,E(T-2),E(T),a/2,360-a/2,1),dur:"0.4s",repeatCount:1,begin:"0s;a2.end",fill:"freeze"})),P.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("stroke",{id:"a2",to:f,dur:"2s",repeatCount:1,begin:"a1.end"})),h.appendChild(P)}var g=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawCircle(u,p,E(t<=.5&&i?.25:.5),{fill:f});if("1"===r.is_sprint&&g.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.createAnimate("cx",{values:"".concat(u,";").concat(u+E(T),";").concat(u+E(T)),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),h.appendChild(g),!i){var A=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.drawCircle(d,m,E(t>.5?.5:.25),{fill:"#2196f3"});h.appendChild(A)}var y=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_5__.a.svg.create(s,o);y.appendChild(h);var D=simpleCreateHTML("div",["effective_area","content","hidden"]),S=document.createElement("div");return S.appendChild(y),D.appendChild(S),D.appendChild(_),D}for(var SLv=data.SLv,CLv=data.CLv,btype=branch.name,suffix=[],attr=branch.branchAttributes,p=branch.findLocation()+1,c=branch.parent.branchs[p];void 0!==c&&-1!=SUFFIX_LIST.indexOf(c.name);)suffix.push(c),c=branch.parent.branchs[++p];var extra_fix=branch.parent.branchs.filter(function(e){return-1!=EXTRA_FIX_LIST.indexOf(e.name)}),stack_value_list=extra_fix.filter(function(e){return"stack"==e.name&&-1!=(attr.stack_id||"").split(",").indexOf(e.branchAttributes.id)}).map(function(e){return safeEval(data.stackValues[getStackBranchIdKey(e)])}),stack=stack_value_list.length>1?stack_value_list:stack_value_list[0];switch(btype){case"stack":var left=simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),right=simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),mid=simpleCreateHTML("input","mid");mid.value=data.stackValues[getStackBranchIdKey(branch)];var stk=branch;left.addEventListener("click",function(e){var t=parseInt(stk.branchAttributes.min,10),a=parseInt(mid.value,10);a!=t&&(mid.value=a-1,mid.dispatchEvent(new Event("change")))}),right.addEventListener("click",function(e){var t=parseInt(stk.branchAttributes.max,10),a=parseInt(mid.value,10);a!=t&&(mid.value=a+1,mid.dispatchEvent(new Event("change")))}),mid.addEventListener("change",function(e){var t=parseInt(stk.branchAttributes.max,10),a=parseInt(stk.branchAttributes.min,10),n=(stk.branchAttributes.min,parseInt(this.value,10));n>t?n=t:n<a&&(n=a),this.value=n,data.stackValues[getStackBranchIdKey(stk)]=n,_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_3__.a.SkillSystem.skillRoot.controller.updateSkillHTML()}),mid.addEventListener("focus",function(e){this.select()});var scope1=document.createDocumentFragment();void 0!==attr.name&&scope1.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(attr.name))),scope1.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Min|,|最小值"),processValue(attr.min))),void 0!==attr.max&&scope1.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Max|,|最大值"),processValue(attr.max)));var main=document.createDocumentFragment();main.appendChild(left),main.appendChild(mid),main.appendChild(right);var content=createContentLine(scope1,main),he=simpleCreateHTML("div",["branch","branch_"+btype]);return he.appendChild(content),branch.finish=!0,he;case"poration":var _he=simpleCreateHTML("div",["branch","branch_"+btype]),_content=simpleCreateHTML("div","content"),_getPorationHTML=getPorationHTML(branch),one=_getPorationHTML.one,two=_getPorationHTML.two;return _content.appendChild(one),_content.appendChild(two),_he.appendChild(_content),branch.finish=!0,_he;case"damage":var damage_name=null;void 0!==attr.name&&(damage_name=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(attr.name)));var text="";switch(attr.title){case"normal":text="1"==attr.frequency?"單下傷害":"總傷害";break;case"each":text="每下傷害";break;case"normal_attack":text="一般攻擊傷害提升"}var title=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(text)),valid_base=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("physical"==attr.damage_type?"Valid ATK|,|有效ATK":"Valid MATK|,|有效MATK")),damage_type=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)({physical:"Physical|,|物理",magic:"Magic|,|魔法"}[attr.damage_type]));text="",attr.constant.split(",,").forEach(function(e,t){0==t?0!==(e=processValue(e))&&(text+=e):text+="+"+Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(replaceExtraFromulaValue(e))}),""===text&&(text="0");var constant=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Skill Constant|,|技能常數"),text);text="",attr.multiplier.split(",,").forEach(function(e,t){0==t?0!==(e=processValue(e))&&(text+=e):text+="+"+Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(replaceExtraFromulaValue(e))}),""===text&&(text="0");var multiplier=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Skill Multiplier|,|技能倍率"),text,"%"),aliment=null;if(void 0!==attr.aliment_name){var s2=document.createDocumentFragment();s2.appendChild(createSkillAttributeScope(null,null,attr.aliment_name)),s2.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Chance|,|機率"),processValue(attr.aliment_chance||"0")+"%")),aliment=createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Aliment|,|異常狀態")),s2)}var area_scope=null,target_type=null;"single"==attr.type?target_type=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Single|,|單體")):(target_type=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("AOE|,|範圍")),area_scope=getEffectiveAreaHTML(branch),target_type.addEventListener("click",function(){area_scope.classList.toggle("hidden")}),target_type.classList.add("show_area"));var damage_element=null;void 0!==attr.element&&(damage_element=getDamageElementHTML(attr.element));var damage_isPlace=null;"1"==attr.is_place&&(damage_isPlace=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Is Place|,|設置型")));var damage_frequency=null,damage_judgment=null,damage_cycle=null;(parseInt(attr.frequency)>1||"each"==attr.title)&&(damage_frequency=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Frequency|,|傷害次數"),processValue(attr.frequency)),text="common"==attr.judgment?"common|,|共用判定":"separate|,|分開判定",damage_judgment=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(text)),"1"==attr.is_place&&void 0!==attr.cycle&&(damage_cycle=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("per |,|每")+processValue(attr.cycle,{tail:Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(" sec|,|秒")}))));var poration_branch=suffix.find(function(e){return"poration"==e.name}),poration_damage=null,poration_poration=null;if(void 0!==poration_branch){var _getPorationHTML2=getPorationHTML(poration_branch),_one=_getPorationHTML2.one,_two=_getPorationHTML2.two;poration_damage=_one,poration_poration=_two,poration_branch.finish=!0}var damage_extras=suffix.filter(function(e){return"extra"==e.name}),damage_extras_frg=document.createDocumentFragment();damage_extras.forEach(function(e){var t=e.branchAttributes;void 0===t.condition&&(t.condition="技能加成");var a=document.createDocumentFragment();if(t.aliment_name&&a.appendChild(createSkillAttributeScope(null,null,t.aliment_name)),t.aliment_chance&&a.appendChild(createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Chance|,|機率"),processValue(t.aliment_chance)+"%")),t.constant){var n=safeEval(t.constant),r=n>=0?"+":"",i=Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Skill Constant |,|技能常數")+r+n;n<0&&(i=darkText(i)),i=processValue(i,{calc:!1,checkHasStack:t.constant}),a.appendChild(createSkillAttributeScope(null,null,i))}t.element&&a.appendChild(getDamageElementHTML(t.element)),t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){var t=e.statValue(),n=e.statValue(safeEval(e.statValue())),r=e.show();r=n<0?darkText(r):r,a.appendChild(createSkillAttributeScope(null,null,processValue(r,{calc:!1,checkHasStack:t})))}),damage_extras_frg.appendChild(createContentLine(simpleCreateHTML("span","_main_title",processText(e,"condition")),a)),e.finish=!0});var top=simpleCreateHTML("div","top");null!==damage_name&&top.appendChild(damage_name);var _scope=simpleCreateHTML("div","scope1");_scope.appendChild(title),_scope.appendChild(damage_type),_scope.appendChild(target_type),null!==damage_isPlace&&_scope.appendChild(damage_isPlace),null!==damage_element&&_scope.appendChild(damage_element),null!==damage_judgment&&_scope.appendChild(damage_judgment),null!==damage_frequency&&_scope.appendChild(damage_frequency),null!==damage_cycle&&_scope.appendChild(damage_cycle),null!==poration_damage&&_scope.appendChild(poration_damage),null!=poration_poration&&_scope.appendChild(poration_poration);var scope2=simpleCreateHTML("div","scope2");scope2.appendChild(valid_base),scope2.appendChild(constant),scope2.appendChild(multiplier);var _content2=simpleCreateHTML("div","content");_content2.appendChild(_scope),_content2.appendChild(scope2);var _he2=simpleCreateHTML("div",["branch","branch_"+btype]);return 0!=top.childElementCount&&_he2.appendChild(top),_he2.appendChild(_content2),null!==aliment&&_he2.appendChild(aliment),damage_extras_frg.childElementCount>0&&_he2.appendChild(damage_extras_frg),null!==area_scope&&_he2.appendChild(area_scope),branch.finish=!0,_he2;case"effect":case"next":case"passive":var text_name=null;attr.name&&(text_name=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(attr.name)));var _c=attr.condition;"auto"==_c&&(_c="施放成功後"),"hit"==_c&&(_c="命中成功後"),"next"==btype&&(_c="1"==attr.frequency?"下一招技能":"之後的".concat(attr.frequency,"招技能")),"passive"==btype&&(_c="Passive|,|被動效果"),attr.condition=_c;var condition="none"!=_c?simpleCreateHTML("span","_main_title",processText(branch,"condition")):null,end_condition=null;attr.end_condition&&(end_condition=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(attr.end_condition)));var duration=null;if(attr.duration){var v=processValue(attr.duration);duration=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("in ".concat(v," secs|,|").concat(v,"秒內")))}var isPlace=null;"1"===attr.is_place&&(isPlace=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Is Place|,|設置型")));var _text=void 0!==attr.type?getTargetText(attr.type,"1"===attr.is_place):null,_target_type=null,_area_scope=null;void 0===attr.radius?_target_type=null!==_text?createSkillAttributeScope(null,null,_text):null:(_target_type=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,_text),attr.end_position="self",attr.effective_area="circle",_area_scope=getEffectiveAreaHTML(branch),_target_type.addEventListener("click",function(){_area_scope.classList.toggle("hidden")}),_target_type.classList.add("show_area"));var extras=suffix.filter(function(e){return"extra"==e.name}),extras_frg=document.createDocumentFragment();extras.forEach(function(e){var t=e.branchAttributes;void 0===t.condition&&(t.condition="額外效果");var a=document.createDocumentFragment();t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){var t=e.statValue(),n=e.statValue(safeEval(e.statValue())),r=e.show();r=n<0?darkText(r):r,a.appendChild(createSkillAttributeScope(null,null,processValue(r,{calc:!1,checkHasStack:t})))});var n=document.createDocumentFragment();n.appendChild(simpleCreateHTML("span","_main_title",processText(e,"condition"))),void 0!==t.target&&n.appendChild(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(t.target))),extras_frg.appendChild(createContentLine(n,a)),e.finish=!0});var _scope2=document.createDocumentFragment();null!==condition&&_scope2.appendChild(condition),null!==end_condition&&_scope2.appendChild(end_condition),null!=_target_type&&_scope2.appendChild(_target_type);var _scope3=document.createDocumentFragment();if(attr.caption)_scope3.appendChild(simpleCreateHTML("div","text_scope",processText(branch,"caption")));else{var statList=_main_Grimoire_js__WEBPACK_IMPORTED_MODULE_3__.a.CharacterSystem.StatList();branch.stats.forEach(function(e){var t=e.statValue(),a=e.statValue(safeEval(e.statValue())),n=e.show();n=a<0?darkText(n):n,_scope3.appendChild(createSkillAttributeScope(null,null,processValue(n,{calc:!1,checkHasStack:t})))})}var scope3=simpleCreateHTML("div","scope1");null!==isPlace?(scope3.appendChild(isPlace),null!==duration&&scope3.appendChild(duration)):null!==duration&&_scope2.appendChild(duration);var _top=simpleCreateHTML("div","top");null!==text_name&&_top.appendChild(text_name);var content2=simpleCreateHTML("div","content");0!==scope3.childElementCount&&content2.appendChild(scope3);var _he3=simpleCreateHTML("div",["branch","branch_"+btype]);return 0!=_top.childElementCount&&_he3.appendChild(_top),0!==content2.childElementCount&&_he3.appendChild(content2),_he3.appendChild(createContentLine(_scope2,_scope3)),0!==extras_frg.childElementCount&&_he3.appendChild(extras_frg),null!==_area_scope&&_he3.appendChild(_area_scope),branch.finish=!0,_he3;case"heal":var _text2={hp:"Restore HP|,|恢復HP",mp:"Restore MP|,|恢復MP"}[attr.type],_title=simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(_text2));_text2=getTargetText(attr.target);var target=null!=_text2?createSkillAttributeScope(null,null,_text2):null,_constant=createSkillAttributeScope(null,"0"!=attr.constant?Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Restore|,|恢復量"):Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Base Restore|,|基本恢復量"),processValue(attr.constant)),_duration=null;if(void 0!==attr.duration){var _v=processValue(attr.duration);_duration=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Duration|,|持續時間"),processValue(attr.duration))}var frequency=null;void 0!==attr.frequency&&(frequency=createSkillAttributeScope(null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Frequency|,|作用次數"),processValue(attr.frequency)));var cycle=null;void 0!==attr.cycle&&(cycle=createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("per |,|每")+processValue(attr.cycle,{tail:Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(" sec|,|秒")})));var extra_frg=document.createDocumentFragment();if(void 0!==attr.extra_text){var ta=attr.extra_text.split(","),va=attr.extra_value.split(",").map(function(e){return processValue(e,{toPercentage:!0})}),frg2=document.createDocumentFragment();ta.forEach(function(e,t){frg2.appendChild(createSkillAttributeScope(null,e,va[t]))}),extra_frg.appendChild(createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("extra|,|恢復量加成")),frg2))}var _he4=simpleCreateHTML("div",["branch","branch_"+btype]),_content3=simpleCreateHTML("div","content"),_scope4=simpleCreateHTML("div","scope1");_scope4.appendChild(_title),_scope4.appendChild(target),null!==_duration&&_scope4.appendChild(_duration),null!==frequency&&_scope4.appendChild(frequency),null!==cycle&&_scope4.appendChild(cycle);var _scope5=simpleCreateHTML("div","scope2");return _scope5.appendChild(_constant),_content3.appendChild(_scope4),_content3.appendChild(_scope5),_he4.appendChild(_content3),0!==extra_frg.childElementCount&&_he4.appendChild(extra_frg),branch.finish=!0,_he4;case"text":case"tips":var _text_name=null;attr.name&&(_text_name=simpleCreateHTML("span","_name",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(attr.name)));var main_text=simpleCreateHTML("div","text_scope",processText(branch)),_he5=simpleCreateHTML("div",["branch","branch_"+btype]),_top2=simpleCreateHTML("div","top");null!==_text_name&&_top2.appendChild(_text_name);var _content4=simpleCreateHTML("div","content");return _content4.appendChild(main_text),0!=_top2.childElementCount&&_he5.appendChild(_top2),_he5.appendChild(_content4),branch.finish=!0,_he5;case"list":var lists=[];lists.push(branch);for(var _p=branch.findLocation()+1,cur=branch.parent.branchs[_p];void 0!==cur&&cur.name==btype;)lists.push(cur),cur=branch.parent.branchs[++_p];var ul=simpleCreateHTML("ul","_lists");lists.forEach(function(e){ul.appendChild(simpleCreateHTML("li",null,processText(e))),e.finish=!0});var _he6=simpleCreateHTML("div",["branch","branch_"+btype]),_content5=simpleCreateHTML("div","content");return _content5.appendChild(ul),_he6.appendChild(_content5),branch.finish=!0,_he6;case"reference":var _main_text=null;attr.text&&(_main_text=simpleCreateHTML("div","text_scope",processText(branch)));var url_scope=null;if(attr.url){url_scope=document.createDocumentFragment();var urls=attr.url.split(","),url_texts=attr.url_text.split(",");urls.forEach(function(e,t){url_scope.appendChild(createSkillAttributeScope(null,null,Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)(url_texts[t],{href:e,class:"url_text"})))})}var _he7=simpleCreateHTML("div",["branch","branch_"+btype]);return null!==_main_text&&_he7.appendChild(_main_text),null!==url_scope&&_he7.appendChild(createContentLine(simpleCreateHTML("span","_main_title",Object(_main_module_LangText_js__WEBPACK_IMPORTED_MODULE_4__.b)("Reference url|,|資料參考連結")),url_scope)),branch.finish=!0,_he7}return null}__webpack_exports__.a=function(e){var t=e.currentSkill,a=e,n=e.skillLevel,r=e.characterLevel,i=(new TempSkillEffect).from(t.defaultEffect),_=!1;if(t.effects.forEach(function(e){if(!_){var n,r=e.mainWeapon,l=e.subWeapon,c=e.bodyArmor;return-1==(n={mainWeapon:r,subWeapon:l,bodyArmor:c}).mainWeapon&&-1==n.subWeapon&&-1==n.bodyArmor||-1!=a.mainWeapon&&a.mainWeapon==n.mainWeapon||-1!=a.subWeapon&&a.subWeapon==n.subWeapon||-1!=a.bodyArmor&&a.bodyArmor==n.bodyArmor?(e!=t.defaultEffect&&i.overWrite(e),void(_=!0)):void 0}}),_){var l=document.createDocumentFragment(),c=[_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.MP_COST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.RANGE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.SKILL_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.DAMAGE_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.PORATION_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.IN_COMBO,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.ACTION_TIME,_SkillElements_js__WEBPACK_IMPORTED_MODULE_2__.c.CASTING_TIME],o=document.createElement("div");o.className="skill_attributes",c.forEach(function(e){if(void 0!==i.attributes[e]){var t=getEffectHTML(i,e,{SLv:n,CLv:r});t&&o.appendChild(t)}}),l.appendChild(o);var s=document.createElement("div");if(s.className="skill_branchs",i.checkData()){null===e.stackValues&&(e.stackValues={},i.branchs.forEach(function(t){if("stack"==t.name){var a=t.branchAttributes,n="auto"==a.default?a.min:a.default;e.stackValues[getStackBranchIdKey(t)]=n}}));var u=e.stackValues;i.branchs.forEach(function(e){var t=getBranchHTML(e,{SLv:n,CLv:r,stackValues:u});null!==t&&s.appendChild(t)})}else{var p=document.createElement("div");p.classList.add("no_data"),p.innerHTML="此技能資料尚未齊全。",s.appendChild(p)}return l.appendChild(s),l}var d=document.createElement("div");return d.classList.add("no_data"),d.innerHTML="所選取的裝備無法使用此技能。",d}},function(e,t,a){e.exports=a(17)},function(e,t,a){var n=function(e){"use strict";var t,a=Object.prototype,n=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",_=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,a,n){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),_=new A(n||[]);return i._invoke=function(e,t,a){var n=s;return function(r,i){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===r)throw i;return D()}for(a.method=r,a.arg=i;;){var _=a.delegate;if(_){var l=C(_,a);if(l){if(l===m)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===s)throw n=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=p;var c=o(e,t,a);if("normal"===c.type){if(n=a.done?d:u,c.arg===m)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n=d,a.method="throw",a.arg=c.arg)}}}(e,a,_),i}function o(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s="suspendedStart",u="suspendedYield",p="executing",d="completed",m={};function h(){}function E(){}function f(){}var T={};T[i]=function(){return this};var b=Object.getPrototypeOf,v=b&&b(b(y([])));v&&v!==a&&n.call(v,i)&&(T=v);var O=f.prototype=h.prototype=Object.create(T);function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function M(e){var t;this._invoke=function(a,r){function i(){return new Promise(function(t,i){!function t(a,r,i,_){var l=o(e[a],e,r);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==typeof s&&n.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,i,_)},function(e){t("throw",e,i,_)}):Promise.resolve(s).then(function(e){c.value=e,i(c)},function(e){return t("throw",e,i,_)})}_(l.arg)}(a,r,t,i)})}return t=t?t.then(i,i):i()}}function C(e,a){var n=e.iterator[a.method];if(n===t){if(a.delegate=null,"throw"===a.method){if(e.iterator.return&&(a.method="return",a.arg=t,C(e,a),"throw"===a.method))return m;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=o(n,e.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,m;var i=r.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,m):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function y(e){if(e){var a=e[i];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,_=function a(){for(;++r<e.length;)if(n.call(e,r))return a.value=e[r],a.done=!1,a;return a.value=t,a.done=!0,a};return _.next=_}}return{next:D}}function D(){return{value:t,done:!0}}return E.prototype=O.constructor=f,f.constructor=E,f[l]=E.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},L(M.prototype),M.prototype[_]=function(){return this},e.AsyncIterator=M,e.async=function(t,a,n,r){var i=new M(c(t,a,n,r));return e.isGeneratorFunction(a)?i:i.next().then(function(e){return e.done?e.value:i.next()})},L(O),O[l]="Generator",O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=y,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(g),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function r(n,r){return l.type="throw",l.arg=e,a.next=n,r&&(a.method="next",a.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var _=this.tryEntries[i],l=_.completion;if("root"===_.tryLoc)return r("end");if(_.tryLoc<=this.prev){var c=n.call(_,"catchLoc"),o=n.call(_,"finallyLoc");if(c&&o){if(this.prev<_.catchLoc)return r(_.catchLoc,!0);if(this.prev<_.finallyLoc)return r(_.finallyLoc)}else if(c){if(this.prev<_.catchLoc)return r(_.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<_.finallyLoc)return r(_.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var _=i?i.completion:{};return _.type=e,_.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(_)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),g(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;g(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:y(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),i=a(10),_=a.n(i),l=a(5),c=a(1),o=0,s=1,u=1,p=2,d="預設",m=3,h=4,E=5,f=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],T=["箭矢","盾牌","小刀","魔導具","套","拔刀劍"],b=["輕量化","重量化","一般"],v=6,O=7,L=8,M=9,C=10,P=11,g=12,A=13,y=14,D=15,S=16,k=["瞬發","須詠唱","須蓄力","被動"],I=["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],x=["極慢","慢","稍慢","一般","稍快","快","極快"],j="Skill Tree Category",w=2,B="Skill Tree",R=2;var W=function(e){e.skillTreeCategorys.forEach(function(e){e.skillTrees.forEach(function(e){e.skills.forEach(function(e){var t=e.defaultEffect;t&&t.branchs.forEach(function(e){!function(e){var t=function(e,t){Object.keys(t).forEach(function(a){void 0===e.branchAttributes[a]&&e.appendBranchAttribute(a,t[a])})};switch(e.name){case"damage":t(e,{constant:"0",multiplier:"0",type:"single",base:"auto",frequency:"1",end_position:"target",effective_area:"circle",title:"normal",judgment:"common",damage_type:"physical"});break;case"stack":t(e,{min:"1",default:"auto"});break;case"effect":case"hit":t(e,{type:"self",condition:"auto"});break;case"heal":t(e,{target:"self",frequency:"1",constant:"0"});break;case"next":t(e,{type:"none",frequency:"1"});break;case"poration":t(e,{poration:"auto"});break;case"passive":case"text":case"tips":case"list":case"head":case"extra":case"reference":case"":break;default:console.warn("Unknow Skill Branch Name."),console.log(e)}}(e)})})})})};function U(){this.skillRoot=new c.d(this)}U.prototype={init:function(){var e=this;return new Promise(function(t,a){Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=170573319&single=true&output=csv",{download:!0,complete:function(a){var n,r,i,_,U,K;n=e.skillRoot,r=a.data,i=null,_=[c.f.TYPE,c.e.TYPE,c.a.TYPE,c.c.TYPE,c.b.TYPE],U=function(e,t){if(_.indexOf(e.TYPE)<=_.indexOf(t))return e;for(;e.TYPE!=t;)e=e.parent;return e},K=function(e,t){return e===t?null:e},r.forEach(function(e,t){try{if(0==t)return;var a=e[o];if(""!=a){var r=e[s];switch(r){case j:var W=e[w];i=n.newElement(c.f.TYPE,{no:a,name:W});break;case B:i=U(i,c.f.TYPE);var H=e[R];i=i.newElement(c.e.TYPE,{no:a,name:H});break;default:if(""!=r){i=U(i,c.e.TYPE);var N=e[u];i=i.newElement(c.a.TYPE,{no:a,name:N})}case"":var Y=f.indexOf(e[m]),V=T.indexOf(e[h]),F=b.indexOf(e[E]),G=e[p];if(""==G)return;var q=(i=U(i,c.a.TYPE)).newElement(c.c.TYPE,{mainWeapon:Y,subWeapon:V,bodyArmor:F});G==d&&i.setDefaultEffect(q),i=q.appendAttribute(c.c.MP_COST,K(e[P],"")).appendAttribute(c.c.RANGE,K(e[g],"")).appendAttribute(c.c.SKILL_TYPE,K(k.indexOf(e[A]),-1)).appendAttribute(c.c.IN_COMBO,K(I.indexOf(e[y]),-1)).appendAttribute(c.c.ACTION_TIME,K(x.indexOf(e[D]),-1)).appendAttribute(c.c.CASTING_TIME,K(e[S],""))}}if(_.indexOf(i.TYPE)<_.indexOf(c.c.TYPE))return;var X=e[v];if(""!=X){i=U(i,c.c.TYPE);var Q=e[O];i=i.newElement(c.b.TYPE,{no:X,name:Q})}var z=e[L],$=e[M];""!=z&&(l.a.CharacterSystem.findStatBase(z)?i.appendStat(z,$,e[C]):i.appendBranchAttribute(z,$))}catch(t){console.warn("[Error] When Load Skill Data"),console.log(e)}}),W(e.skillRoot),t()},error:function(e){console.warn("讀取技能資料時發生錯誤"),console.log(e),a()}})})},init_SkillQuery:function(e){this.skillRoot.controller.initSkillQueryHTML(e)}};var K=U,H=a(6);function N(){this.statList=[]}N.prototype={init:function(){},init_statList:function(){var e=this;return new Promise(function(t,a){Papa.parse("./src/CharacterSystem/module/other/BaseStatData.csv",{download:!0,complete:function(a){var n;n=e,a.data.forEach(function(e,t){0!=t&&n.appendStatBase(e[0],e[1],"無"!=e[2])}),t()},error:function(e){console.warn("讀取角色能力資料時發生錯誤"),console.log(e),a()}})})},appendStatBase:function(e,t,a,n){var r=new H.a(e,t,a);return this.statList.push(r),r},StatList:function(){return this.statList},findStatBase:function(e){return this.StatList().find(function(t){return t.baseName==e})}};var Y=N,V=a(0);var F=function(e){!function(e){var t=function(e){var t=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),a=document.querySelector('*[data-main-scope="1"]');a.setAttribute("data-main-scope",0),a.classList.add("hidden");var n=document.querySelectorAll("*[data-main-scope]")[t];n.setAttribute("data-main-scope",1),n.classList.remove("hidden")},a=document.createDocumentFragment();["Skills Information|,|技能資料|,|スキルインフォ"].forEach(function(e){var n=document.createElement("li");n.innerHTML=Object(V.b)(e),n.addEventListener("click",t),a.appendChild(n)});var n=document.createElement("ul");n.appendChild(a),e.appendChild(n)}(e.top_menu),Object(V.a)(document),document.getElementById("LoadingPage").classList.add("hidden")};function G(e){var t=document.createElement("div");t.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(t)}function q(e){return new Promise(function(t,a){var n=document.createElement("div");n.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(n),t()})}function X(){return(X=_()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.SkillSystem=new K,l.a.CharacterSystem=new Y,e.next=4,q("載入角色能力清單...");case 4:return e.next=6,l.a.CharacterSystem.init_statList().catch(function(){return G("...載入失敗。")});case 6:return e.next=8,q("載入技能清單...");case 8:return e.next=10,l.a.SkillSystem.init().catch(function(){return G("...載入失敗。")});case 10:return e.next=13,q("初始化技能資料...");case 13:l.a.SkillSystem.init_SkillQuery(document.querySelector("#SkillQuery > .main")),F({top_menu:document.getElementById("top_menu")});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}if("0"===document.getElementById("SkillQuery").getAttribute("data-ready"))try{!function(){X.apply(this,arguments)}(),document.getElementById("SkillQuery").setAttribute("data-ready","1")}catch(e){G(e),console.log(e)}}]);