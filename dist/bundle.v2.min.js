!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=12)}([function(e,t,a){"use strict";var n=a(2),r=a.n(n);var i=a(11),l=a(4),c=a(3),o=a(1);function s(e){return Object(l.a)("Skill Query/Controller/"+e)}var _=Symbol(),u=Symbol(),p=Symbol(),d=Symbol();function m(e){this.MAIN_NODE=null,this.skillRoot=e,this.currentData={skillRoot:e,mainWeapon:-1,subWeapon:-1,bodyArmor:-1,skillLevel:10,characterLevel:185,currentSkill:null,stackValues:{},stackNames:{},showOriginalFormula:!1,skillRecords:[],branchDevelopmentMode:!1}}m.prototype={initSkillQueryHTML:function(e){var t=this.skillRoot;this.MAIN_NODE=e;var a=[g.TYPE,b.TYPE,T.TYPE,_,u,p,T.CATEGORY_EQUIPMENT,d,L.TYPE],n=document.createDocumentFragment();a.forEach(function(e){var a=this.getSkillElementScope(e);switch(n.appendChild(a),e){case g.TYPE:a.appendChild(this.createSkillQueryScopeHTML(t,Object(c.a)().menu));break;case b.TYPE:t.skillTreeCategorys.forEach(function(e){a.appendChild(this.createSkillQueryScopeHTML(e,Object(c.a)().menu))},this);break;case d:a.classList.add("hidden");case _:case u:case p:a.appendChild(this.createSkillQueryScopeHTML(null,e))}},this),e.appendChild(n),this.currentData.skill_from_where_scope=o.a.element.simpleCreateHTML("div",["show_skill_from_where","hidden"]);var r=this;document.querySelector("footer .switch_branch_development_mode").addEventListener("click",function(e){r.currentData.branchDevelopmentMode=!r.currentData.branchDevelopmentMode,r.updateSkillHTML()})},getSkillElementScope:function(e){var t,a=(t={},r()(t,g.TYPE,"SkillRoot_scope"),r()(t,b.TYPE,"SkillTreeCategory_scope"),r()(t,T.TYPE,"SkillTree_scope"),r()(t,L.TYPE,"Skill_scope"),r()(t,_,"SkillLevel_scope"),r()(t,u,"CharacterLevel_scope"),r()(t,p,"SwitchDisplayMode_scope"),r()(t,T.CATEGORY_EQUIPMENT,"SkillEquipment_scope"),r()(t,d,"SkillRecord_scope"),t),n=this.MAIN_NODE.getElementsByClassName(a[e])[0];return n||(n=document.createElement("div")).classList.add(a[e]),n},getSkillElementNoStr:function(e){for(var t="";e.parent;)t=e.findLocation()+(""!=t?"-":"")+t,e=e.parent;return t},selectSkillElement:function(e){var t=e.split("-"),a=null;return t.forEach(function(e,t){switch(e=parseInt(e,10),t){case 0:a=this.skillRoot.skillTreeCategorys[e];break;case 1:a=a.skillTrees[e];break;case 2:a=a.skills[e];break;case 3:a=a.branchs[e]}},this),a},skillRecord:function(e){this.currentData.skillRecords.push(this.currentData.currentSkill),this.initCurrentSkill(e),this.updateSkillHTML()},popSkillRecord:function(){this.initCurrentSkill(this.currentData.skillRecords.pop()),this.updateSkillHTML()},clearSkillRecord:function(){var e=this.currentData.skillRecords;e.splice(0,e.length)},equipmentCheck:function(e,t){return-1==e.mainWeapon&&-1==e.subWeapon&&-1==e.bodyArmor||(-1!=t.mainWeapon&&t.mainWeapon==e.mainWeapon||(-1!=t.subWeapon&&t.subWeapon==e.subWeapon||-1!=t.bodyArmor&&t.bodyArmor==e.bodyArmor))},setCurrentEquipment:function(e,t){var a=this,n=this.currentData;if(void 0!==n[e]){if(-1!==t){var r=[[5],[0,1,2,3,4,5],[1,2,3,4],[5],[3,5],[0,1,2,3,4,5],[4,5],[1,3,4,5],[1,3,4,5],[0,1,2,3,4,5]];switch(e){case"mainWeapon":if(-1!==r[t].indexOf(n.subWeapon)){var i=this.getSkillElementScope(T.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(c.a)().data_subWeapon,'="-1"]'));i?i.click():n.subWeapon=-1}break;case"subWeapon":if(-1!==n.mainWeapon&&-1!==r[n.mainWeapon].indexOf(t)){var l=this.getSkillElementScope(T.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(c.a)().data_mainWeapon,'="-1"]'));l?l.click():n.mainWeapon=-1}}}n[e]=t,this.getSkillElementScope(T.TYPE).querySelectorAll("table td").forEach(function(e){var t=e.getAttribute(Object(c.a)().data_skillElementNo);null!==t&&(void 0===a.selectSkillElement(t).effects.find(function(e){return a.equipmentCheck(e,n)})?e.classList.add("disable"):e.classList.remove("disable"))})}else console.warn("Unknow equipment field name")},initCurrentSkill:function(e){this.currentData.currentSkill=e,e.checkData()&&(o.a.object.empty(this.currentData.stackValues),this.currentData.stackValues=null);var t=this.getSkillElementScope(d);t.classList.remove("hidden"),this.currentData.skillRecords.length>0?t.querySelector(".back_button").classList.remove("hidden"):t.querySelector(".back_button").classList.add("hidden"),t.querySelector("div.current_skill").innerHTML=e.name},updateSkillHTML:function(){var e=this.currentData.currentSkill;if(e){var t=this.getSkillElementScope(L.TYPE);o.a.element.removeAllChild(t),t.appendChild(this.createSkillQueryScopeHTML(e,L.CATEGORY_MAIN))}},createSkillQueryScopeHTML:function(e,t){var a=this;switch(null!==e?e.TYPE:t){case g.TYPE:switch(t){case Object(c.a)().menu:var n=this,r=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");n.getSkillElementScope(b.TYPE);var a=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),r=n.getSkillElementScope(b.TYPE).querySelectorAll("div._menu"),i=Array.from(r).find(function(e){return!e.classList.contains("hidden")});i&&i.classList.add("hidden"),r[a].classList.remove("hidden"),o.a.element.removeAllChild(n.getSkillElementScope(T.TYPE)),o.a.element.removeAllChild(n.getSkillElementScope(L.TYPE)),o.a.element.removeAllChild(n.getSkillElementScope(T.CATEGORY_EQUIPMENT)),n.getSkillElementScope(d).classList.add("hidden");var l=r[a].querySelector("li.cur");l&&l.click()},m=document.createElement("div");m.className="_"+t;var h=document.createDocumentFragment();e.skillTreeCategorys.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name,t.setAttribute(Object(c.a)().data_skillElementNo,n.getSkillElementNoStr(e)),t.addEventListener("click",r),h.appendChild(t)});var f=document.createElement("ul");return f.appendChild(h),m.appendChild(f),m}case b.TYPE:switch(t){case Object(c.a)().menu:var v=this,E=function(e){var t=this.parentNode.getElementsByClassName("cur")[0];t&&t.classList.remove("cur"),this.classList.add("cur");var a=v.getSkillElementScope(T.TYPE);a.innerHTML="";var n=v.selectSkillElement(this.getAttribute(Object(c.a)().data_skillElementNo));a.appendChild(v.createSkillQueryScopeHTML(n,T.CATEGORY_TABLE));var r=v.createSkillQueryScopeHTML(n,T.CATEGORY_EQUIPMENT),i=v.getSkillElementScope(T.CATEGORY_EQUIPMENT);if(o.a.element.removeAllChild(i),null!==r){i.appendChild(r);var l=v.getSkillElementScope(T.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(c.a)().data_bodyArmor,'="').concat(v.currentData.bodyArmor,'"]'));l&&l.click(),(l=v.getSkillElementScope(T.CATEGORY_EQUIPMENT).querySelector("li[".concat(Object(c.a)().data_mainWeapon,'="').concat(v.currentData.mainWeapon,'"]')))&&l.click()}o.a.element.removeAllChild(v.getSkillElementScope(L.TYPE)),v.getSkillElementScope(d).classList.add("hidden"),v.currentData.currentSkill=null},y=document.createElement("div");y.className="_"+t,y.classList.add("hidden");var C=document.createDocumentFragment();e.skillTrees.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name,t.setAttribute(Object(c.a)().data_skillElementNo,v.getSkillElementNoStr(e)),t.addEventListener("click",E),C.appendChild(t)});var k=document.createElement("ul");return k.appendChild(C),y.appendChild(k),y}case T.TYPE:switch(t){case T.CATEGORY_TABLE:var M=e,A=M.parent.findLocation(),S=M.findLocation(),O=this,P=function(e){var t=O.selectSkillElement(this.getAttribute(Object(c.a)().data_skillElementNo));if(!this.classList.contains("disable")&&O.currentData.currentSkill!==t){var a=this.parentNode.parentNode.getElementsByClassName("cur")[0];a&&a.classList.remove("cur"),this.classList.add("cur"),O.clearSkillRecord(),O.initCurrentSkill(t),O.updateSkillHTML()}},D=function(e){var t=document.createElement("table");return e.ary.forEach(function(e){var a=document.createDocumentFragment();e.forEach(function(e){var t=document.createElement("td");if(e>1&&t.setAttribute("rowspan",e),a.appendChild(t),e<-1)for(++e;0!=e;){++e;var n=document.createElement("td");n.setAttribute("data-empty","1"),a.appendChild(n)}});var n=document.createElement("tr");n.appendChild(a),t.appendChild(n)}),t}(function(e,t){var a=null;switch(e){case 0:switch(t){case 0:a=[[4,2,2,1],[1],[2,2,1],[1],[2,2,-2],[1,1]];break;case 1:a=[[3,2,-3],[1,-2],[1,1,1,1],[2,-4],[1,1,-2]];break;case 2:a=[[2,1,1,1,1],[1,1,1,1],[-5],[1,1,1,-2]];break;case 3:a=[[2,1,1,1,1],[1,1,1,1],[1,1,-3],[1,-4]];break;case 4:a=[[4,1,1,-2],[1,1,1,1],[1,1,-2],[1,1,-2]];break;case 5:a=[[4,2,2,1],[1],[2,1,1],[-2],[1,-3],[1,1,-2]];break;case 6:a=[[2,2,2,2,1],[1],[1,1,-3],[2,-4],[1,1,-2]]}break;case 1:switch(t){case 0:a=[[2,1,1],[-2],[2,1,1],[-2]];break;case 1:case 2:a=[[2,1,1,1],[1,-2],[1,1,-2]];break;case 3:case 4:case 5:a=[[1,1,1,1],[1,1,1,1]]}break;case 2:switch(t){case 0:a=[[-4],[1,1,1,1],[1,1,1,1],[1,1,1,1]];break;case 1:a=[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]];break;case 2:a=[[-2],[-2],[-2],[2,1],[1],[2,1],[1]]}break;case 3:switch(t){case 0:a=[[4,1,1,1,1],[1,1,-2],[2,1,-2],[1,1,1],[-5]];break;case 1:a=[[3,1,1,1,1],[1,1,-2],[1,1,-2],[1]];break;case 2:a=[[3,1,1],[1,1],[1,1]]}break;case 4:switch(t){case 0:case 1:a=[[1,1,1],[1,1,1]]}}return null===a&&(a=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]]),{ary:a}}(A,S)),w=-1;return Array.from(D.getElementsByTagName("td")).forEach(function(e){if("1"!=e.getAttribute("data-empty")){++w;var t=M.skills[w];void 0!==t?"@lock"!=t.name?(e.innerHTML=t.name,e.setAttribute(Object(c.a)().data_skillElementNo,O.getSkillElementNoStr(t)),e.addEventListener("click",P)):e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path opacity=".87" d="M0 0h24v24H0V0z"/></g><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></svg>':e.innerHTML="-"}}),D;case T.CATEGORY_EQUIPMENT:var I=this,x=function(e){for(var t=["mainWeapon","subWeapon","bodyArmor"],a=[this.getAttribute(Object(c.a)().data_mainWeapon),this.getAttribute(Object(c.a)().data_subWeapon),this.getAttribute(Object(c.a)().data_bodyArmor)],n=0;n<a.length;++n){var r=a[n];if(null!==r&&""!==r)return I.setCurrentEquipment(t[n],parseInt(r,10)),this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),void I.updateSkillHTML()}},B=[],R=[],H=[];e.skills.forEach(function(e){e.effects.forEach(function(e){var t=e.mainWeapon,a=e.subWeapon,n=e.bodyArmor;-1==B.indexOf(t)&&B.push(t),-1==R.indexOf(a)&&R.push(a),-1==H.indexOf(n)&&H.push(n)})});var j=document.createDocumentFragment(),N=["mainWeapon","subWeapon","bodyArmor"];return[B,R,H].forEach(function(e,t){if(0!==e.length&&(1!=e.length||-1!=e[0])){var n,r,i,o;switch(e){case B:o=Object(c.a)().data_mainWeapon,i=s("main weapon"),n=["","","","","","","","","",""],r=Object(l.a)("Skill Query/Analysis Skill/Main Weapon List");break;case R:o=Object(c.a)().data_subWeapon,i=s("sub weapon"),n=["","","","","",""],r=Object(l.a)("Skill Query/Analysis Skill/Sub Weapon List");break;case H:o=Object(c.a)().data_bodyArmor,i=s("body armor"),n=["","",""],r=Object(l.a)("Skill Query/Analysis Skill/Body Armor List")}var _=null,u=!1,p=document.createElement("ul");e.forEach(function(e){var i=document.createElement("li");i.setAttribute(o,e),i.addEventListener("click",x),-1!=e?(i.innerHTML='<span class="icon">'.concat(n[e],'</span><span class="value">').concat(r[e],"</span>"),p.appendChild(i),u||(i.classList.add("cur"),a.currentData[N[t]]=e,u=!0)):(i.innerHTML='<span class="icon"></span><span class="value">'.concat(s("equipment: unlimited"),"</span>"),_=i)}),null!==_&&p.appendChild(_);var d=document.createElement("div"),m=document.createElement("div");m.innerHTML=i,d.appendChild(m),d.appendChild(p),j.appendChild(d)}}),0!=j.childElementCount?j:null}case L.TYPE:switch(t){case L.CATEGORY_MAIN:if(e.checkData())return Object(i.a)(this.currentData);var W=document.createElement("div");return W.classList.add("no_data"),W.innerHTML="此技能資料尚未更新。",W}case u:var U=this,K=o.a.element.simpleCreateHTML("span","left",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),Y=o.a.element.simpleCreateHTML("span","right",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),V=o.a.element.simpleCreateHTML("input","mid");V.value=this.currentData.characterLevel;var q=function(e){var t=parseInt(V.value,10);switch(this.getAttribute("data-ctr")){case"-":t-=10;break;case"+":t+=10}t>185?t=185:t<0&&(t=0),V.value=t,U.currentData.characterLevel=t,U.updateSkillHTML()};K.setAttribute("data-ctr","-"),K.addEventListener("click",q),Y.setAttribute("data-ctr","+"),Y.addEventListener("click",q),V.type="number",V.addEventListener("change",q),V.addEventListener("focus",function(e){this.select()});var F=document.createDocumentFragment();return F.appendChild(o.a.element.simpleCreateHTML("div","title",Object(l.a)("Skill Query/Analysis Skill/character level"))),F.appendChild(K),F.appendChild(V),F.appendChild(Y),F;case _:for(var G=this,Q=function(e){var t=G.currentData.currentSkill;this.parentNode.getElementsByClassName("cur")[0].classList.remove("cur"),this.classList.add("cur"),G.currentData.skillLevel=parseInt(this.getAttribute(Object(c.a)().data_skillLevel),10),null!=t&&G.updateSkillHTML()},X=document.createElement("ul"),z=1;z<=10;++z){var $=document.createElement("li");$.innerHTML="Lv. "+z,$.setAttribute(Object(c.a)().data_skillLevel,z),$.addEventListener("click",Q),$.classList.add("global_button_1"),z==this.currentData.skillLevel&&$.classList.add("cur"),X.appendChild($)}return X;case p:var Z=this,J=document.createDocumentFragment(),ee=document.createElement("span");return ee.appendChild(o.a.element.simpleCreateHTML("span","icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18.65 8.35l-2.79 2.79c-.32.32-.1.86.35.86H18c0 3.31-2.69 6-6 6-.79 0-1.56-.15-2.25-.44-.36-.15-.77-.04-1.04.23-.51.51-.33 1.37.34 1.64.91.37 1.91.57 2.95.57 4.42 0 8-3.58 8-8h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01zM6 12c0-3.31 2.69-6 6-6 .79 0 1.56.15 2.25.44.36.15.77.04 1.04-.23.51-.51.33-1.37-.34-1.64C14.04 4.2 13.04 4 12 4c-4.42 0-8 3.58-8 8H2.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79c.31-.31.09-.85-.36-.85H6z"/></svg>')),ee.appendChild(o.a.element.simpleCreateHTML("span","title",s("switch display"))),ee.addEventListener("click",function(e){Z.currentData.showOriginalFormula=!Z.currentData.showOriginalFormula,Z.updateSkillHTML()}),J.appendChild(ee),J;case d:var te=this,ae=document.createDocumentFragment(),ne=o.a.element.simpleCreateHTML("div","back_button");ne.appendChild(o.a.element.simpleCreateHTML("span","icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.71 15.88L10.83 12l3.88-3.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.39.39-1.03 0-1.42z"/></svg>')),ne.appendChild(o.a.element.simpleCreateHTML("span","caption",Object(l.a)("Skill Query/button text/back"))),ne.addEventListener("click",function(e){te.popSkillRecord()});var re=o.a.element.simpleCreateHTML("div","current_skill");return ae.appendChild(ne),ae.appendChild(o.a.element.simpleCreateHTML("div","tip",s("current skill"))),ae.appendChild(re),ae}}};var h=m,f=a(5),v=a(6);function E(){Array.from(arguments).forEach(function(e,t){null==e&&(console.log("argument[".concat(t,"] of Constructor is null")),console.log(arguments))})}function g(){this.skillTreeCategorys=[],this.controller=new h(this)}function b(e,t,a){this.parent=e,this.no=t,this.name=a,this.skillTrees=[]}function T(e,t,a){this.parent=e,this.no=t,this.name=a,this.skills=[]}function L(e,t,a){this.parent=e,this.name=a,this.effects=[],this.defaultEffect=null,this.caption=""}function y(e,t,a,n){this.parent=e,this.branchs=[],this.mainWeapon=t,this.subWeapon=a,this.bodyArmor=n,this.attributes={}}function C(e,t,a){this.parent=e,this.no=t,this.name=a,this.branchAttributes={},this.stats=[]}a.d(t,"d",function(){return g}),a.d(t,"f",function(){return b}),a.d(t,"e",function(){return T}),a.d(t,"a",function(){return L}),a.d(t,"c",function(){return y}),a.d(t,"b",function(){return C}),g.TYPE=Symbol("SkillRoot"),g.prototype={TYPE:g.TYPE,newElement:function(e,t){if(e==b.TYPE){var a=t.name,n=t.no;E(n,a);var r=new b(this,n,a);return this.skillTreeCategorys.push(r),r}return null},findSkillByName:function(e){var t=void 0;return this.skillTreeCategorys.forEach(function(a){t||a.skillTrees.forEach(function(a){if(!t){var n=a.skills.find(function(t){return t.name===e});void 0!==n&&(t=n)}})}),t}},b.TYPE=Symbol("SkillTreeCategory"),b.prototype={TYPE:b.TYPE,newElement:function(e,t){if(e==T.TYPE){var a=t.name,n=t.no;E(n,a);var r=new T(this,n,a);return this.skillTrees.push(r),r}return null},findLocation:function(){return this.parent.skillTreeCategorys.indexOf(this)}},T.TYPE=Symbol("SkillTree"),T.prototype={TYPE:T.TYPE,newElement:function(e,t){if(e==L.TYPE){var a=t.name,n=t.no;E(n,a);var r=new L(this,n,a);return this.skills.push(r),r}return null},findLocation:function(){return this.parent.skillTrees.indexOf(this)}},T.CATEGORY_TABLE=Symbol(),T.CATEGORY_EQUIPMENT=Symbol(),L.TYPE=Symbol("Skill"),L.prototype={TYPE:L.TYPE,newElement:function(e,t){if(e==y.TYPE){var a=t.mainWeapon,n=t.subWeapon,r=t.bodyArmor;E(a,n,r);var i=new y(this,a,n,r);return this.effects.push(i),i}return null},findLocation:function(){return this.parent.skills.indexOf(this)},setDefaultEffect:function(e){return this.defaultEffect=e,this},checkData:function(){return void 0!==this.defaultEffect&&null!==this.defaultEffect}},L.CATEGORY_MAIN=Symbol(),y.TYPE=Symbol("SkillEffect"),y.prototype={TYPE:y.TYPE,newElement:function(e,t){if(e==C.TYPE){var a=t.no,n=t.name;E(a,n);var r=new C(this,a,n);return this.branchs.push(r),r}return null},findLocation:function(){return this.parent.effects.indexOf(this)},appendAttribute:function(e,t){return null!==t&&(this.attributes[e]=t),this}},y.MP_COST=Symbol("mp_cost"),y.RANGE=Symbol("range"),y.SKILL_TYPE=Symbol("skill_type"),y.IN_COMBO=Symbol("in_combo"),y.ACTION_TIME=Symbol("action_type"),y.CASTING_TIME=Symbol("casting_time"),C.TYPE=Symbol("SkillBranch"),C.prototype={TYPE:C.TYPE,appendBranchAttribute:function(e,t){return this.branchAttributes[e]=t,this},findLocation:function(){return this.parent.branchs.indexOf(this)},appendStat:function(e,t,a){var n;switch(a){case"":n=v.a.TYPE_CONSTANT;break;case"%":n=v.a.TYPE_MULTIPLIER;break;case"~":n=v.a.TYPE_TOTAL}var r=f.a.CharacterSystem.findStatBase(e).createSimpleStat(n,t);return this.stats.push(r),r}}},function(e,t,a){"use strict";var n=a(9),r=a.n(n),i=a(7),l=a.n(i),c={element:{remove:function(){Array.from(arguments).forEach(function(e){e&&e.parentNode.removeChild(e)})},removeAllChild:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}},setAttributes:function(e,t){Object.keys(t).forEach(function(a){null!==t[a]&&e.setAttribute(a,t[a])})},simpleCreateHTML:function(e,t,a){var n,r=document.createElement(e);null!=t&&(Array.isArray(t)?(n=r.classList).add.apply(n,l()(t)):r.classList.add(t));return null!=a&&(r.innerHTML=a),r},convertRemToPixels:function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}},object:{empty:function(e){null!==e&&"object"===r()(e)&&Object.keys(e).forEach(function(t){delete e[t]})},isEmpty:function(e){return"object"!==r()(e)||0==Object.keys(e).length}},svg:{create:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.createElementNS("http://www.w3.org/2000/svg","svg");return a=Object.assign({xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 ".concat(e," ").concat(t)},a),c.element.setAttributes(n,a),n},drawCircle:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=document.createElementNS("http://www.w3.org/2000/svg","circle");return n=Object.assign({cx:e,cy:t,r:a},n),c.element.setAttributes(r,n),r},drawPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElementNS("http://www.w3.org/2000/svg","path");return t=Object.assign({d:e},t),c.element.setAttributes(a,t),a},drawSector:function(e,t,a,n,r,i,l){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=document.createElementNS("http://www.w3.org/2000/svg","path");return o=Object.assign({d:c.svg.getSectorD(e,t,a,n,r,i,l),fill:"none"},o),c.element.setAttributes(s,o),s},getSectorD:function(e,t,a,n,r,i,l){var c=Math.PI/180,o=a*Math.cos(i*c)+e,s=-a*Math.sin(i*c)+t,_=a*Math.cos(r*c)+e,u=-a*Math.sin(r*c)+t,p=n*Math.cos(r*c)+e,d=-n*Math.sin(r*c)+t,m=n*Math.cos(i*c)+e,h=-n*Math.sin(i*c)+t;return"M".concat(o," ").concat(s,"A").concat(a," ").concat(a," 0 0 ").concat(1==l?0:1," ").concat(_," ").concat(u,"L").concat(p," ").concat(d,"A").concat(n," ").concat(n," 0 0 ").concat(l," ").concat(m," ").concat(h,"Z")},createAnimate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({attributeName:e,repeatCount:"indefinite"},t);var a=document.createElementNS("http://www.w3.org/2000/svg","animate");return c.element.setAttributes(a,t),a}}};t.a=c},function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";var n={menu:"menu",from:Symbol(),data_skillElementNo:"data-seno",data_mainWeapon:"data-mainw",data_subWeapon:"data-subw",data_bodyArmor:"data-armor",data_branchIndex:"data-bi"};t.a=function(){return n}},function(e,t,a){"use strict";var n={global:{second:"秒",cancel:"取消"},"Skill Query":{"Skill Element":{"skill tree: from":"所屬技能樹"},Controller:{"main weapon":"主手武器","sub weapon":"副手武器","body armor":"身體裝備","equipment: unlimited":"無限制","switch display":"切換顯示","current skill":"當前技能"},"Analysis Skill":{"no data":"此技能資料尚未齊全。","equipment not confirm":"所選取的裝備無法使用此技能。","Main Weapon List":["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],"Sub Weapon List":["箭矢","盾牌","小刀","魔導具","拳套","拔刀劍"],"Body Armor List":["輕量化","重量化","一般"],"mp cost":"MP消耗",range:"射程","skill type":"類型","damage type":"傷害類型","poration type":"慣性類型","in combo":"連擊","action time":"動作時間","casting time":"詠唱時間","charging time":"蓄力時間","skill type: List":["瞬發","須詠唱","須蓄力","被動"],"damage type: List":["物理","魔法"],"poration type: List":["物理","魔法","一般攻擊"],"in combo: List":["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],"action time: List":["極慢","慢","稍慢","一般","稍快","快","極快"],"range: no limit":"無限制","skill formula: STR":"角色STR","skill formula: DEX":"角色DEX","skill formula: INT":"角色INT","skill formula: AGI":"角色AGI","skill formula: VIT":"角色VIT","skill formula: BSTR":"角色基礎STR","skill formula: BDEX":"角色基礎DEX","skill formula: BINT":"角色基礎INT","skill formula: BAGI":"角色基礎AGI","skill formula: BVIT":"角色基礎VIT","skill formula: shield_refining":"盾精煉值","skill formula: dagger_atk":"小刀ATK","character level":"角色等級","skill level":"技能等級",physical:"物理",magic:"魔法","normal attack":"一般攻擊","damage poration type: none":"不受慣性影響","effective poration type: none":"不影響慣性","damage poration: title":"傷害慣性","effective poration: title":"造成慣性","element: neutral":"無屬性","element: fire":"火屬性","element: water":"水屬性","element: earth":"地屬性","element: wind":"風屬性","element: light":"光屬性","element: dark":"暗屬性","element: arrow":"套用箭矢屬性","element: one hand sword":"套用單手劍屬性","target type: self":"自身","target type: party":"全隊伍","target type: party & is place":"區域內的隊伍成員","target type: aura":"光環內的隊伍成員","target type: target":"目標",radius:"半徑","sector: angle":"夾角","effective area: title":"類別","effective area type: circle":"圓形","effective area type: line":"直線型","effective area type: sector":"扇型","move distanve: title":"移動距離","effective area: character position":"角色位置","effective area: target position":"目標位置","branch development controller":{"title: default":"預設","title: not default":"非預設"},branch:{stack:{"base name":"技能層數","min value":"最小值","max value":"最大值"},damage:{"title type: one":"單下傷害","title type: total":"總傷害","title type: each":"每下傷害","title type: normal attack":"一般攻擊傷害提升","valid base: atk":"有效ATK","valid base: matk":"有效MATK","skill constant":"技能常數","skill multiplier":"技能倍率",chance:"機率",aliment:"異常狀態","target type: single":"單體","target type: AOE":"範圍","is place":"設置型","frequency: unit":"次","judgment: common":"共同判定","judgment: separate":"分開判定","cycle: preText":"每",extra:{"base title":"額外效果"}},effect:{"condition: auto":"施放成功後","condition: hit":"命中成功後","condition: next":"下一招技能","condition: next-2":["之後的","招技能"],"condition: passive":"被動效果",duration:"持續時間","duration-2":["","秒內"]},heal:{"title: hp":"HP恢復","title: mp":"MP恢復","frequency: unit":"次"},reference:{"reference url":"資料參考連結"}},"button text":{"to skill":"查看"}},"button text":{back:"上一個技能"}},"stat base":{"type total: preText":"總"}},r={global:{second:" sec",cancel:"cancel"},"Skill Query":{"Skill Element":{"skill tree: from":"Skill Tree"},Controller:{"main weapon":"Main Weapon","sub weapon":"Sub Weapon","body armor":"Body Armor","equipment: unlimited":"unlimited","switch display":"Switch Dispaly","current skill":"Current Skill"},"Analysis Skill":{"no data":"此技能資料尚未齊全。","equipment not confirm":"所選取的裝備無法使用此技能。","Main Weapon List":["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],"Sub Weapon List":["箭矢","盾牌","小刀","魔導具","拳套","拔刀劍"],"Body Armor List":["輕量化","重量化","一般"],"mp cost":"MP消耗",range:"射程","skill type":"類型","damage type":"傷害類型","poration type":"慣性類型","in combo":"連擊","action time":"動作時間","casting time":"詠唱時間","charging time":"蓄力時間","skill type: List":["瞬發","須詠唱","須蓄力","被動"],"damage type: List":["物理","魔法"],"poration type: List":["物理","魔法","一般攻擊"],"in combo: List":["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],"action time: List":["極慢","慢","稍慢","一般","稍快","快","極快"],"range: no limit":"無限制","skill formula: STR":"角色STR","skill formula: DEX":"角色DEX","skill formula: INT":"角色INT","skill formula: AGI":"角色AGI","skill formula: VIT":"角色VIT","skill formula: BSTR":"角色基礎STR","skill formula: BDEX":"角色基礎DEX","skill formula: BINT":"角色基礎INT","skill formula: BAGI":"角色基礎AGI","skill formula: BVIT":"角色基礎VIT","skill formula: shield_refining":"盾精煉值","skill formula: dagger_atk":"小刀ATK","character level":"角色等級","skill level":"技能等級",physical:"物理",magic:"魔法","normal attack":"一般攻擊","damage poration type: none":"不受慣性影響","effective poration type: none":"不影響慣性","damage poration: title":"傷害慣性","effective poration: title":"造成慣性","element: neutral":"無屬性","element: fire":"火屬性","element: water":"水屬性","element: earth":"地屬性","element: wind":"風屬性","element: light":"光屬性","element: dark":"暗屬性","element: arrow":"套用箭矢屬性","element: one hand sword":"套用單手劍屬性","target type: self":"自身","target type: party":"全隊伍","target type: party & is place":"區域內的隊伍成員","target type: aura":"光環內的隊伍成員","target type: target":"目標",radius:"半徑","sector: angle":"夾角","effective area: title":"類別","effective area type: circle":"圓形","effective area type: line":"直線型","effective area type: sector":"扇型","move distanve: title":"移動距離","effective area: character position":"角色位置","effective area: target position":"目標位置",branch:{stack:{"base name":"技能層數","min value":"最小值","max value":"最大值"},damage:{"title type: one":"單下傷害","title type: total":"總傷害","title type: each":"每下傷害","title type: normal attack":"一般攻擊傷害提升","valid base: atk":"有效ATK","valid base: matk":"有效MATK","skill constant":"技能常數","skill multiplier":"技能倍率",chance:"機率",aliment:"異常狀態","target type: single":"單體","target type: AOE":"範圍","is place":"設置型",frequency:"傷害次數","judgment: common":"共同判定","judgment: separate":"分開判定","cycle: preText":"每",extra:{"base title":"額外效果"}},effect:{"condition: auto":"施放成功後","condition: hit":"命中成功後","condition: next":"下一招技能","condition: next-2":["之後的","招技能"],"condition: passive":"被動效果",duration:"持續時間","duration-2":["","秒內"]},heal:{"title: hp":"HP恢復","title: mp":"MP恢復",frequency:"作用次數"},reference:{"reference url":"資料參考連結"}},"button text":{"to skill":"查看"}},"button text":{back:"Last Skill"}},"stat base":{"type total: preText":"總"}},i={};function l(e,t){t=t.split("/");for(var a=0,n=e;a!==t.length;)if(n=n[t[a]],++a,void 0===n)return;return n}function c(e){var t=[r,n,i],a=l(t[1],e);if(void 0===a){var c=!1;return t.forEach(function(t){c||void 0!==(a=l(t,e))&&(c=!0)}),void 0===a?(console.warn("[Unknow Language data] id: ".concat(e)),console.log((new Error).stack),console.log(t),"???"):a}return a}a.d(t,"a",function(){return c})},function(e,t,a){"use strict";t.a={}},function(e,t,a){"use strict";var n=a(4);function r(e){return Object(n.a)("stat base/s")}function i(e,t,a){this.baseName=e,this.caption=t,this.hasMultiplier=a,this.attributes=[]}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.base=e,this.type=t,this.value=a}i.TYPE_CONSTANT=Symbol(),i.TYPE_MULTIPLIER=Symbol(),i.TYPE_TOTAL=Symbol(),i.prototype={appendAttribute:function(e,t){return e&&null!=t&&(this.attributes[e]=t),this},show:function(e,t){switch("number"!=typeof t&&(t=parseInt(t)),e){case i.TYPE_CONSTANT:var a=this.caption;return a+=t<0?"":"+",a+=t,this.hasMultiplier||(a+=void 0===this.attributes.constant_unit?"%":this.attributes.constant_unit),a;case i.TYPE_MULTIPLIER:var n=this.caption;return n+=t<0?"":"+",n+=t,n+="%";case i.TYPE_TOTAL:var l=r()+this.caption;return l+=t<0?"":"+",l+=t,l+="%"}},getShowData:function(e,t){var a="",n="";switch(e){case i.TYPE_CONSTANT:a=this.caption,this.hasMultiplier||(n=void 0===this.attributes.constant_unit?"%":this.attributes.constant_unit);break;case i.TYPE_MULTIPLIER:a=this.caption,n="%";break;case i.TYPE_TOTAL:a=r()+tthis.caption,n="%"}return{title:a,value:t,tail:n}},createSimpleStat:function(e,t){return new l(this,e,t)}},l.prototype={show:function(){return this.base.show(this.type,this.value)},getShowData:function(){return this.base.getShowData(this.type,this.value)},statValue:function(e){return void 0!==e&&(this.value=e),this.value}},t.a=i},function(e,t,a){var n=a(14),r=a(15),i=a(16);e.exports=function(e){return n(e)||r(e)||i()}},function(e,t,a){e.exports=a(13)},function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?e.exports=n=function(e){return a(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},n(t)}e.exports=n},function(e,t){function a(e,t,a,n,r,i,l){try{var c=e[i](l),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(n,r)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var l=e.apply(t,n);function c(e){a(l,r,i,c,o,"next",e)}function o(e){a(l,r,i,c,o,"throw",e)}c(void 0)})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_strings_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3);function Lang(e){return Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("Skill Query/Analysis Skill/"+e)}var GLOBAL_EXTRA_ATTRIBUTE_VALUE={none:"@none"};function branchDevelopmentController(e){this.baseEffect=(new TempSkillEffect).from(e)}function getStackBranchIdKey(e){return"id"+e.branchAttributes.id}function TempSkillEffect(){this.branchs=[],this.attributes={}}function TempSkillBranch(e){this.parent=e,this.branchAttributes={},this.stats=[],this.finish=!1}branchDevelopmentController.prototype={branchDetail:function(e,t){var a="-"!==e.no?this.baseEffect.branchs.find(function(t){return t.no==e.no}):e,n=simpleCreateHTML("div","dev_branchDetail"),r=simpleCreateHTML("div","top");r.appendChild(simpleCreateHTML("span","_no",e.no)),r.appendChild(simpleCreateHTML("span","_name",e.name)),n.appendChild(r),n.appendChild(simpleCreateHTML("div","_title",Lang("branch development controller/title: default")));var i=document.createElement("tbody");Object.keys(a.branchAttributes).forEach(function(t){var n=document.createElement("tr");n.appendChild(simpleCreateHTML("td","_name",t)),n.appendChild(simpleCreateHTML("td","_value",a.branchAttributes[t])),void 0!==e.branchAttributes[t]&&e.branchAttributes[t]!==a.branchAttributes[t]&&n.classList.add("overwrite"),i.appendChild(n)}),a.stats.forEach(function(t){var a=document.createElement("tr");a.appendChild(simpleCreateHTML("td","_name",t.base.baseName)),a.appendChild(simpleCreateHTML("td","_value",t.statValue())),e.stats.find(function(e){return t.base===e.base&&t.type===e.type&&t.statValue()!=e.statValue()})&&a.classList.add("overwrite"),i.appendChild(a)});var l=document.createElement("table");if(l.appendChild(i),n.appendChild(l),!t&&a!=e){var c=document.createElement("tbody");Object.keys(e.branchAttributes).forEach(function(t){var a=document.createElement("tr");a.appendChild(simpleCreateHTML("td","_name",t)),a.appendChild(simpleCreateHTML("td","_value",e.branchAttributes[t])),c.appendChild(a)}),e.stats.forEach(function(e){var t=document.createElement("tr");t.appendChild(simpleCreateHTML("td","_name",e.base.baseName)),t.appendChild(simpleCreateHTML("td","_value",e.statValue())),c.appendChild(t)}),n.appendChild(simpleCreateHTML("div","_title",Lang("branch development controller/title: not default")));var o=document.createElement("table");o.appendChild(c),n.appendChild(o)}return n}},TempSkillEffect.prototype={from:function(e){var t=this;return Object.getOwnPropertySymbols(e.attributes).forEach(function(a){t.appendAttribute(a,e.attributes[a])}),e.branchs.forEach(function(e){t.newBranch().from(e)}),this},newBranch:function(){var e=new TempSkillBranch(this);return this.branchs.push(e),e},overWrite:function(e){var t=this;Object.getOwnPropertySymbols(e.attributes).forEach(function(a){var n=e.attributes[a];n==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&t.attributes[a]?delete t.attributes[a]:t.appendAttribute(a,n)}),e.branchs.forEach(function(e,a){var n=t.branchs.findIndex(function(t){return"-"!==t.no&&t.no==e.no});-1==n?t.newBranch().from(e):t.branchs[n].overWrite(e)})},appendAttribute:function(e,t){return this.attributes[e]=t,this},checkData:function(){return 0!=this.branchs.length}},TempSkillBranch.prototype={from:function(e){var t=this;return this.no=e.no,this.name=e.name,this.branchAttributes={},Object.keys(e.branchAttributes).forEach(function(a){t.appendBranchAttribute(a,e.branchAttributes[a])}),e.stats.forEach(function(e){t.appendStat(e.base.baseName,e.value,"").type=e.type}),this},appendBranchAttribute:function(e,t){var a;return(a=_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.b.prototype.appendBranchAttribute).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))},findLocation:function(){return _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.b.prototype.findLocation.call(this)},appendStat:function(e,t,a){var n;return(n=_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.b.prototype.appendStat).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))},overWrite:function(e){var t=this;if(""!=e.name)this.name!=e.name&&(this.name=e.name,_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.object.empty(this.branchAttributes)),Object.keys(e.branchAttributes).forEach(function(a,n){var r=e.branchAttributes[a];r==GLOBAL_EXTRA_ATTRIBUTE_VALUE.none&&t.branchAttributes[a]?delete t.branchAttributes[a]:t.appendBranchAttribute(a,r)}),e.stats.forEach(function(e){var a=t.stats.find(function(t){return e.base===t.base&&e.type===t.type});void 0===a?t.appendStat(e.base.baseName,e.value,"").type=e.type:a.statValue(e.value)});else{var a=this.parent.branchs;a.splice(a.indexOf(this),1)}}};var GLOBAL_ICON_DATA={Sword:"",Staff:""},MAIN_WEAPON_TEXT_LIST=Lang("Main Weapon List"),SUB_WEAPON_TEXT_LIST=Lang("Sub Weapon List"),BODY_ARMOR_TEXT_LIST=Lang("Body Armor List"),simpleCreateHTML=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.simpleCreateHTML;function createSkillAttributeScope(e,t,a,n){var r=simpleCreateHTML("div","skill_attribute");return null!==e&&r.appendChild(simpleCreateHTML("span","_icon",e)),null!==t&&r.appendChild(simpleCreateHTML("span","_title",t)),null!=a&&r.appendChild(simpleCreateHTML("span","_value",a)),null!=n&&r.appendChild(simpleCreateHTML("span","_tail",n)),r}function getEffectHTML(sef,attr_name,data){var _ICON_DATA,_TITLE_DATA,_TEXT_LIST,safeEval=function safeEval(str){try{return eval(str)}catch(e){return console.warn(e),"?"}},ICON_DATA=(_ICON_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,""),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,["","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,["",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,["","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,["","","","","","",""]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_ICON_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME,""),_ICON_DATA),TITLE_DATA=(_TITLE_DATA={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,Lang("mp cost")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,Lang("range")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,Lang("skill type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,Lang("damage type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,Lang("poration type")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,Lang("in combo")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,Lang("action time")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TITLE_DATA,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME,["",Lang("casting time"),Lang("charging time")]),_TITLE_DATA),TEXT_LIST=(_TEXT_LIST={},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,Lang("skill type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,Lang("damage type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,Lang("poration type: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,Lang("in combo: List")),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_TEXT_LIST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,Lang("action time: List")),_TEXT_LIST),SLv=data.SLv,CLv=data.CLv,title=TITLE_DATA[attr_name],v=sef.attributes[attr_name],tail=null,icon=Array.isArray(ICON_DATA[attr_name])?ICON_DATA[attr_name][v]:ICON_DATA[attr_name];switch(attr_name){case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME:title=TITLE_DATA[attr_name][sef.attributes[_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE]],tail=Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/second");case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST:v=safeEval(v);break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE:v="-"!=v?safeEval(v)+"m":Lang("range: no limit");break;case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO:case _SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME:v=TEXT_LIST[attr_name][v]}var he=document.createElement("div");he.className="skill_attribute";var res='<span class="_icon">'.concat(icon,'</span><span class="_title">').concat(title,'</span><span class="_value">').concat(v,"</span>");return null!==tail&&(res+='<span class="_tail">'.concat(tail,"</span>")),he.innerHTML=res,he}var SUFFIX_LIST=["extra","poration"],EXTRA_FIX_LIST=["stack"];function getBranchHTML(branch,data){if(branch.finish)return null;function safeEval(str,dftv){try{return eval(str)}catch(e){return console.warn(e),void 0===dftv?"?":dftv}}function replaceExtraFormulaValue(e){var t={STR:Lang("skill formula: STR"),DEX:Lang("skill formula: DEX"),INT:Lang("skill formula: INT"),AGI:Lang("skill formula: AGI"),VIT:Lang("skill formula: VIT"),BSTR:Lang("skill formula: BSTR"),BDEX:Lang("skill formula: BDEX"),BINT:Lang("skill formula: BINT"),BAGI:Lang("skill formula: BAGI"),BVIT:Lang("skill formula: BVIT"),shield_refining:Lang("skill formula: shield_refining"),dagger_atk:Lang("skill formula: dagger_atk")};return Object.keys(t).forEach(function(a){e=e.replace(new RegExp(a,"g"),t[a])}),e=(e=e.replace(/\*/g,"×")).replace(/(\d+\.\d+)/,function(){return 100*parseFloat(RegExp.$1)+"%"})}function processText(e,t){var a=e.branchAttributes,n=a[void 0===t?"text":t];if(n=data.showOriginalFormula?n.replace(/\$\{([^\}]+)\}([%]?)/g,function(){return"%"!==(arguments.length<=2?void 0:arguments[2])?processValue(arguments.length<=1?void 0:arguments[1],{light:!0,tail:"",separateText:!0}):processValue(arguments.length<=1?void 0:arguments[1],{light:!0,tail:"%",separateText:!0})}):safeEval("`"+(n=n.replace(/(\$\{[^\}]+\})([%]?)/g,function(){return"%"!==(arguments.length<=2?void 0:arguments[2])?processValue(arguments.length<=1?void 0:arguments[1],{calc:!1,light:!0}):processValue(arguments.length<=1?void 0:arguments[1],{calc:!1,tail:"%",light:!0})}))+"`"),void 0!==a.mark&&a.mark.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.branch&&a.branch.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),void 0!==a.skill){var r=data.skillRoot.controller,i=data.skillRoot;a.skill.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),function(e){var t=i.findSkillByName(e);if(void 0===t)return e;var a=simpleCreateHTML("span","skill_from_where_button");return a.appendChild(simpleCreateHTML("span","skill_name",e)),a.setAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_skillElementNo,r.getSkillElementNoStr(t)),a.outerHTML})})}return void 0!==a.skill_tree&&a.skill_tree.split(/\s*,\s*/).forEach(function(e){n=n.replace(new RegExp(e,"g"),lightText(e))}),n}function processValue(e,t){var a;e=e.split(",,"),t=Object.assign({calc:!0,tail:"",head:"",preText:"",toPercentage:!1,checkHasStack:e[0],light:!1,separateText:!1},t),e.forEach(function(e,n){if(0===n)if(data.showOriginalFormula)e=(e=(e=(e=(e=e.replace(/CLv/g,Lang("character level"))).replace(/SLv/g,Lang("skill level"))).replace(/\*/g,"×")).replace(/stack\[(\d+)\]/g,function(){return stack_name_list[parseInt(RegExp.$1,10)]})).replace(/stack[\[]{0}/g,function(){return stack_name_list[0]}),a=e;else{if(t.calc){var r=safeEval(e);t.toPercentage&&(r*=100),void 0===r||Number.isInteger(r)||(r=r.toFixed(2)),a=r}else a=e;t.toPercentage&&(a+="%")}else e=replaceExtraFormulaValue(e),a+="-"!==e.charAt(0)?"+"+e:e}),a=t.preText+a,(t.separateText||(1!==e.length||!e[0].match(/^[\d\.]+$/))&&data.showOriginalFormula)&&(a='<span class="separate_text">'+a+"</span>"),a=t.head+a,a+=t.tail;var n=document.createElement("span");return t.checkHasStack.includes("stack")?n.classList.add("effect_by_stack"):t.light&&n.classList.add("light"),n.innerHTML=a,n.outerHTML}function processStat(e){var t=e.getShowData(),a=t.value.split(",,"),n=1===a.length&&safeEval(a[0])<0?"":"+",r={tail:t.tail,head:t.title+n};1!==a.length&&(r.separateText=!0);var i=processValue(t.value,r);return""===n&&(i=darkText(i)),createSkillAttributeScope(null,null,i)}function lightText(e){return'<span class="light">'+e+"</span>"}function darkText(e){return'<span class="dark">'+e+"</span>"}function markText(e){return lightText(e)}function getPorationHTML(e){var t=e.branchAttributes,a={physical:Lang("physical"),magic:Lang("magic"),normal_attack:Lang("normal attack"),none:Lang("damage poration type: none")},n=Object.assign({},a,{auto:a[t.damage],none:Lang("effective poration type: none")});return{one:createSkillAttributeScope(null,Lang("damage poration: title"),a[t.damage]),two:createSkillAttributeScope(null,Lang("effective poration: title"),n[t.poration])}}function getDamageElementHTML(e){var t={neutral:Lang("element: neutral"),fire:Lang("element: fire"),water:Lang("element: water"),earth:Lang("element: earth"),wind:Lang("element: wind"),light:Lang("element: light"),dark:Lang("element: dark"),arrow:Lang("element: arrow"),one_hand_sword:Lang("element: one hand sword")},a=simpleCreateHTML("div","skill_attribute");return"arrow"!=e&&a.appendChild(simpleCreateHTML("span",["_icon","element_"+e,"element_ball"])),a.appendChild(simpleCreateHTML("span",["_value","element_value"],t[e])),a}function createContentLine(e,t,a){a=Object.assign({headIcon:!0,extrafrgs:null},a);var n=simpleCreateHTML("div",["content","content_line"]),r=simpleCreateHTML("div","scope1"),i=simpleCreateHTML("div","scope2");return r.appendChild(e),i.appendChild(t),a.headIcon&&n.appendChild(simpleCreateHTML("div","_icon",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9.29 15.88L13.17 12 9.29 8.12c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0l4.59 4.59c.39.39.39 1.02 0 1.41L10.7 17.3c-.39.39-1.02.39-1.41 0-.38-.39-.39-1.03 0-1.42z"/></svg>')),n.appendChild(r),n.appendChild(i),void 0!==a.extrafrgs&&null!==a.extrafrgs&&(Array.isArray(a.extrafrgs)?a.extrafrgs.forEach(function(e){return n.appendChild(e)}):n.appendChild(a.extrafrgs)),n}function getTargetText(e,t){var a={self:Lang("target type: self"),party:Lang(t?"target type: party & is place":"target type: party"),aura:Lang("target type: aura"),target:Lang("target type: target"),none:null}[e];return a}function getEffectiveAreaHTML(e){var t,a,n,r=e.branchAttributes,i="self"===r.end_position,l=simpleCreateHTML("div","scope1"),c=simpleCreateHTML("div","skill_attribute");if(c.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_character"])),c.appendChild(simpleCreateHTML("span","_value",Lang("effective area: character position"))),l.appendChild(c),!i){var o=simpleCreateHTML("div","skill_attribute");o.appendChild(simpleCreateHTML("span",["_icon","element_ball","ball_target"])),o.appendChild(simpleCreateHTML("span","_value",Lang("effective area: target position"))),l.appendChild(o)}["radius","angle","effective_area","move_distance"].forEach(function(e){if(r[e]){var i,c=r[e];switch(e){case"radius":i=Lang("radius"),t=safeEval(c),c=processValue(c,{tail:"m"});break;case"angle":i=Lang("sector: angle"),a=safeEval(c),c=processValue(c,{tail:"°"});break;case"effective_area":n=r[e],i=Lang("effective area: title"),c={circle:Lang("effective area type: circle"),line:Lang("effective area type: line"),sector:Lang("effective area type: sector")}[c];break;case"move_distance":i=Lang("move distanve: title"),c=processValue(c,{tail:"m"})}l.appendChild(createSkillAttributeScope(null,i,c))}});var s,_,u,p,d,m,h=document.createDocumentFragment(),f=function(e){return void 0!==e?10*e:10},v="#ff5fb7",E=void 0===r.move_distance?8:12;switch(n){case"line":case"circle":switch(_=f(i?2*t+2:2*t+E+2),s=f(2*t+2),u=f(t+1),p=s/2,d=i?u:u+f(8),m=p,n){case"circle":var g=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(d,m,f(t),{fill:"#feeaf5"});h.appendChild(g);var b=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(d,m,f(t),{stroke:"#FFD1EA",fill:"none"});b.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{values:"".concat("#FFD1EA",";").concat(v,";").concat(v),keyTimes:"0;0.2;1",dur:"2.5s"})),h.appendChild(b);break;case"line":var T=u+f(E),L=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawPath("M".concat(u," ").concat(p-f(t)," A").concat(f(t)," ").concat(f(t)," 0 0 0 ").concat(u," ").concat(p+f(t)," L").concat(T," ").concat(p+f(t)," A").concat(f(t)," ").concat(f(t)," 0 0 0 ").concat(T," ").concat(m-f(t)," Z"),{fill:"#feeaf5"});h.appendChild(L);var y=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(u,p,f(t),{stroke:"#FFD1EA",fill:"none"});y.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{id:"a1",values:"".concat("#FFD1EA",";").concat(v,";").concat(v),keyTimes:"0;0.2;1",dur:"1s",repeatCount:"1",begin:"0s;a2.end",fill:"freeze"})),y.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("cx",{id:"a2",values:"".concat(u,";").concat(T,";").concat(T),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),h.appendChild(y)}break;case"sector":_=f(E+6),p=(s=f(E)*Math.sin(a*Math.PI/180)+f(2))/2,d=(u=f(4))+f(8),m=p;t=2;var C=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawSector(u,p,f(0),f(E),a/2,360-a/2,1,{fill:"#feeaf5"});h.appendChild(C);var k=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawSector(u,p,f(0),f(1),a/2,360-a/2,1,{stroke:v});k.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("d",{id:"a1",to:_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.getSectorD(u,p,f(E-2),f(E),a/2,360-a/2,1),dur:"0.4s",repeatCount:1,begin:"0s;a2.end",fill:"freeze"})),k.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("stroke",{id:"a2",to:v,dur:"2s",repeatCount:1,begin:"a1.end"})),h.appendChild(k)}var M=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(u,p,f(t<=.5&&i?.25:.5),{fill:v});if("1"===r.is_sprint&&M.appendChild(_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.createAnimate("cx",{values:"".concat(u,";").concat(u+f(E),";").concat(u+f(E)),keyTimes:"0;0.2;1",dur:"1.5s",repeatCount:"1",begin:"a1.end"})),h.appendChild(M),!i){var A=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.drawCircle(d,m,f(t>.5?.5:.25),{fill:"#2196f3"});h.appendChild(A)}var S=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.svg.create(_,s);S.appendChild(h);var O=simpleCreateHTML("div",["effective_area","content","hidden"]),P=document.createElement("div");return P.appendChild(S),O.appendChild(P),O.appendChild(l),O}for(var SLv=data.SLv,CLv=data.CLv,btype=branch.name,suffix=[],attr=branch.branchAttributes,p=branch.findLocation()+1,c=branch.parent.branchs[p];void 0!==c&&-1!=SUFFIX_LIST.indexOf(c.name);)suffix.push(c),c=branch.parent.branchs[++p];var extra_fix=branch.parent.branchs.filter(function(e){return-1!=EXTRA_FIX_LIST.indexOf(e.name)}),stack_branch_list=extra_fix.filter(function(e){return"stack"==e.name&&-1!=(attr.stack_id||"").split(",").indexOf(e.branchAttributes.id)}),stack_value_list=stack_branch_list.map(function(e){return safeEval(data.stackValues[getStackBranchIdKey(e)])}),stack_name_list=stack_branch_list.map(function(e){return data.stackNames[getStackBranchIdKey(e)]||Lang("branch/stack/base name")+e.branchAttributes.id}),stack=stack_value_list.length>1?stack_value_list:stack_value_list[0];switch(btype){case"stack":var stk=branch,left=simpleCreateHTML("span","ctr_button",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),right=simpleCreateHTML("span","ctr_button",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/></svg>'),mid=simpleCreateHTML("input","mid"),unit=void 0!==stk.branchAttributes.unit?simpleCreateHTML("span","unit",stk.branchAttributes.unit):null,ov=data.stackValues[getStackBranchIdKey(branch)];mid.value=ov,null===unit?(mid.style.width="2rem",mid.style.textAlign="center"):mid.style.width=.6*String(ov).length+.2+"rem";var maxv=parseInt(safeEval(stk.branchAttributes.max),10),minv=parseInt(safeEval(stk.branchAttributes.min),10),ctr_listener=function(e){var t=parseInt(mid.getAttribute("data-maxv"),10),a=parseInt(mid.getAttribute("data-minv"),10),n=parseInt(mid.value,10);switch(this.getAttribute("data-ctr")){case"-":--n;break;case"+":++n}n>t?n=t:n<a&&(n=a),n=String(n),mid.value=n,data.stackValues[getStackBranchIdKey(stk)]=n,data.skillRoot.controller.updateSkillHTML()};left.setAttribute("data-ctr","-"),left.addEventListener("click",ctr_listener),right.setAttribute("data-ctr","+"),right.addEventListener("click",ctr_listener),mid.type="number",mid.setAttribute("data-maxv",maxv),mid.setAttribute("data-minv",minv),mid.addEventListener("change",ctr_listener),mid.addEventListener("focus",function(e){this.select()});var scope1=document.createDocumentFragment();void 0!==attr.name&&scope1.appendChild(simpleCreateHTML("span","_main_title",attr.name)),scope1.appendChild(createSkillAttributeScope(null,Lang("branch/stack/min value"),processValue(attr.min))),void 0!==attr.max&&scope1.appendChild(createSkillAttributeScope(null,Lang("branch/stack/max value"),processValue(attr.max)));var main=document.createDocumentFragment();main.appendChild(left),main.appendChild(mid),null!==unit&&main.appendChild(unit),main.appendChild(right);var content=createContentLine(scope1,main,{headIcon:!1}),he=simpleCreateHTML("div",["branch","branch_"+btype]);return he.appendChild(content),branch.finish=!0,he;case"poration":var _he=simpleCreateHTML("div",["branch","branch_"+btype]),_content=simpleCreateHTML("div","content"),_getPorationHTML=getPorationHTML(branch),one=_getPorationHTML.one,two=_getPorationHTML.two;return _content.appendChild(one),_content.appendChild(two),_he.appendChild(_content),branch.finish=!0,_he;case"damage":var damage_name=null;void 0!==attr.name&&(damage_name=simpleCreateHTML("span","_name",attr.name));var text="";switch(attr.title){case"normal":text="1"==attr.frequency?Lang("branch/damage/title type: one"):Lang("branch/damage/title type: total");break;case"each":text=Lang("branch/damage/title type: each");break;case"normal_attack":text=Lang("branch/damage/title type: normal attack")}var title=simpleCreateHTML("span","_main_title",text),valid_base=createSkillAttributeScope(null,null,"physical"==attr.damage_type?Lang("branch/damage/valid base: atk"):Lang("branch/damage/valid base: matk")),damage_type=createSkillAttributeScope(null,null,{physical:Lang("physical"),magic:Lang("magic")}[attr.damage_type]),constant="normal_attack"===attr.title&&"0"===attr.constant?null:createSkillAttributeScope(null,Lang("branch/damage/skill constant"),processValue(attr.constant)),multiplier=createSkillAttributeScope(null,Lang("branch/damage/skill multiplier"),processValue(attr.multiplier),"%"),aliment=null;if(void 0!==attr.aliment_name){var s2=document.createDocumentFragment();s2.appendChild(createSkillAttributeScope(null,null,attr.aliment_name)),s2.appendChild(createSkillAttributeScope(null,Lang("branch/damage/chance"),processValue(attr.aliment_chance||"0")+"%")),aliment=createContentLine(simpleCreateHTML("span","_main_title",Lang("branch/damage/aliment")),s2)}var area_scope=null,target_type=null;"single"==attr.type?target_type=createSkillAttributeScope(null,null,Lang("branch/damage/target type: single")):(target_type=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,Lang("branch/damage/target type: AOE")),area_scope=getEffectiveAreaHTML(branch),target_type.addEventListener("click",function(){area_scope.classList.toggle("hidden")}),target_type.classList.add("show_area"));var damage_element=null;void 0!==attr.element&&(damage_element=getDamageElementHTML(attr.element));var damage_isPlace=null;"1"==attr.is_place&&(damage_isPlace=createSkillAttributeScope(null,null,Lang("branch/damage/is place")));var damage_frequency=null,damage_judgment=null,damage_cycle=null;(parseInt(attr.frequency)>1||"each"==attr.title)&&(damage_frequency=simpleCreateHTML("span","_main_title",processValue(attr.frequency,{tail:Lang("branch/damage/frequency: unit")})),text="common"==attr.judgment?Lang("branch/damage/judgment: common"):Lang("branch/damage/judgment: separate"),damage_judgment=createSkillAttributeScope(null,null,text),"1"==attr.is_place&&void 0!==attr.cycle&&(damage_cycle=createSkillAttributeScope(null,null,Lang("branch/damage/cycle: preText")+processValue(attr.cycle,{tail:Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/second")}))));var poration_branch=suffix.find(function(e){return"poration"==e.name}),poration_damage=null,poration_poration=null;if(void 0!==poration_branch){var _getPorationHTML2=getPorationHTML(poration_branch),_one=_getPorationHTML2.one,_two=_getPorationHTML2.two;poration_damage=_one,poration_poration=_two,poration_branch.finish=!0}var damage_extras=suffix.filter(function(e){return"extra"==e.name}),damage_extras_frg=document.createDocumentFragment();damage_extras.forEach(function(e){var t=e.branchAttributes;void 0===t.condition&&(t.condition=Lang("branch/damage/extra/base title"));var a=document.createDocumentFragment();if(t.aliment_name&&a.appendChild(createSkillAttributeScope(null,null,t.aliment_name)),t.aliment_chance&&a.appendChild(createSkillAttributeScope(null,Lang("branch/damage/chance"),processValue(t.aliment_chance)+"%")),t.constant){var n=safeEval(t.constant),r=n>=0?"+":"",i=Lang("branch/damage/skill constant")+r+n;n<0&&(i=darkText(i)),i=processValue(i,{calc:!1,checkHasStack:t.constant}),a.appendChild(createSkillAttributeScope(null,null,i))}t.element&&a.appendChild(getDamageElementHTML(t.element)),t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){return a.appendChild(processStat(e))}),damage_extras_frg.appendChild(createContentLine(simpleCreateHTML("span","_main_title",processText(e,"condition")),a)),e.finish=!0});var top=simpleCreateHTML("div","top");null!==damage_name&&top.appendChild(damage_name);var frg1=document.createDocumentFragment();frg1.appendChild(damage_type),frg1.appendChild(target_type),null!==damage_isPlace&&frg1.appendChild(damage_isPlace),null!==damage_element&&frg1.appendChild(damage_element),null!==damage_judgment&&frg1.appendChild(damage_judgment),null!==damage_cycle&&frg1.appendChild(damage_cycle),null!==poration_damage&&frg1.appendChild(poration_damage),null!=poration_poration&&frg1.appendChild(poration_poration);var frg2=document.createDocumentFragment();frg2.appendChild(valid_base),null!==constant&&frg2.appendChild(constant),frg2.appendChild(multiplier);var _content2=simpleCreateHTML("div","content"),_scope=simpleCreateHTML("div","scope1"),line_frg1=document.createDocumentFragment();null!==damage_frequency&&line_frg1.appendChild(damage_frequency),line_frg1.appendChild(title);var line=createContentLine(line_frg1,frg2,{headIcon:!1});_scope.appendChild(frg1),0!==_scope.childElementCount&&_content2.appendChild(_scope);var _he2=simpleCreateHTML("div",["branch","branch_"+btype]);return 0!=top.childElementCount&&_he2.appendChild(top),_he2.appendChild(_content2),_he2.appendChild(line),null!==aliment&&_he2.appendChild(aliment),damage_extras_frg.childElementCount>0&&_he2.appendChild(damage_extras_frg),null!==area_scope&&_he2.appendChild(area_scope),branch.finish=!0,_he2;case"effect":case"next":case"passive":var text_name=null;attr.name&&(text_name=simpleCreateHTML("span","_name",attr.name));var _c=attr.condition;if("auto"==_c&&(_c=Lang("branch/effect/condition: auto")),"hit"==_c&&(_c=Lang("branch/effect/condition: hit")),"next"==btype)if("1"==attr.frequency)_c=Lang("branch/effect/condition: next");else{var _t=Lang("branch/effect/condition: next-2");_c="".concat(_t[0]).concat(attr.frequency).concat(_t[1])}"passive"==btype&&(_c=Lang("branch/effect/condition: passive")),attr.condition=_c;var condition="none"!=_c?simpleCreateHTML("span","_main_title",processText(branch,"condition")):null,end_condition=null;attr.end_condition&&(end_condition=simpleCreateHTML("span","_main_title",attr.end_condition));var duration=null;if(attr.duration){var v=processValue(attr.duration);if("1"===attr.is_place)duration=createSkillAttributeScope(null,Lang("branch/effect/duration"),processValue(attr.duration),Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/second"));else{var _t2=Lang("branch/effect/duration-2");duration=simpleCreateHTML("span","_main_title","".concat(_t2[0]).concat(v).concat(_t2[1]))}}var isPlace=null;"1"===attr.is_place&&(isPlace=createSkillAttributeScope(null,null,Lang("branch/damage/is place")));var _text=void 0!==attr.type?getTargetText(attr.type,"1"===attr.is_place):null,_target_type=null,_area_scope=null;void 0===attr.radius?_target_type=null!==_text?createSkillAttributeScope(null,null,_text):null:(_target_type=createSkillAttributeScope('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',null,_text),attr.end_position="self",attr.effective_area="circle",_area_scope=getEffectiveAreaHTML(branch),_target_type.addEventListener("click",function(){_area_scope.classList.toggle("hidden")}),_target_type.classList.add("show_area"));var extras=suffix.filter(function(e){return"extra"==e.name}),extras_frg=document.createDocumentFragment();extras.forEach(function(e){var t=e.branchAttributes;void 0===t.condition&&(t.condition=Lang("branch/damage/extra/base title"));var a=document.createDocumentFragment();t.caption&&a.appendChild(simpleCreateHTML("div","text_scope",processText(e,"caption"))),e.stats.forEach(function(e){return a.appendChild(processStat(e))});var n=document.createDocumentFragment();n.appendChild(simpleCreateHTML("span","_main_title",processText(e,"condition"))),void 0!==t.target&&n.appendChild(simpleCreateHTML("span","_main_title",t.target)),extras_frg.appendChild(createContentLine(n,a)),e.finish=!0});var _scope2=document.createDocumentFragment();null!==condition&&_scope2.appendChild(condition);var _frg=document.createDocumentFragment();null!==isPlace&&_frg.appendChild(isPlace),null!==end_condition&&_frg.appendChild(end_condition),null!==duration&&_frg.appendChild(duration),null!=_target_type&&_frg.appendChild(_target_type);var scope2=document.createDocumentFragment();attr.caption?scope2.appendChild(simpleCreateHTML("div","text_scope",processText(branch,"caption"))):branch.stats.forEach(function(e){return scope2.appendChild(processStat(e))});var _top=simpleCreateHTML("div","top");null!==text_name&&_top.appendChild(text_name);var _he3=simpleCreateHTML("div",["branch","branch_"+btype]);0!=_top.childElementCount&&_he3.appendChild(_top);var content_top=simpleCreateHTML("div","content");if(null!==isPlace){var s1=simpleCreateHTML("div","scope1");s1.appendChild(_frg),content_top.appendChild(s1)}else _scope2.appendChild(_frg);var _content3=createContentLine(_scope2,scope2,{headIcon:!1});return 0!==content_top.childElementCount&&_he3.appendChild(content_top),_he3.appendChild(_content3),0!==extras_frg.childElementCount&&_he3.appendChild(extras_frg),null!==_area_scope&&_he3.appendChild(_area_scope),branch.finish=!0,_he3;case"heal":var heal_name=null;attr.name&&(heal_name=simpleCreateHTML("span","_name",attr.name));var _text2=getTargetText(attr.target),target=null!=_text2?createSkillAttributeScope(null,null,_text2):null,_constant="0"!=attr.constant?createSkillAttributeScope(null,null,processValue(attr.constant)):null,_duration=null;if(void 0!==attr.duration){var _v=processValue(attr.duration);_duration=createSkillAttributeScope(null,Lang("branch/effect/duration"),processValue(attr.duration),Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/second"))}var frequency=null;void 0!==attr.frequency&&(frequency=simpleCreateHTML("span","_main_title",processValue(attr.frequency,{tail:Lang("branch/heal/frequency: unit")})));var cycle=null;void 0!==attr.cycle&&(cycle=createSkillAttributeScope(null,null,Lang("branch/damage/cycle: preText")+processValue(attr.cycle,{tail:Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/second")})));var extra_frg=document.createDocumentFragment();if(void 0!==attr.extra_text){var ta=attr.extra_text.split(","),va=attr.extra_value.split(",").map(function(e){return processValue(e,{toPercentage:!0})});ta.forEach(function(e,t){extra_frg.appendChild(createSkillAttributeScope(null,e,va[t]))})}var _top2=simpleCreateHTML("div","top");null!==heal_name&&_top2.appendChild(heal_name);var _he4=simpleCreateHTML("div",["branch","branch_"+btype]);0!=_top2.childElementCount&&_he4.appendChild(_top2);var _content4=simpleCreateHTML("div","content"),_scope3=simpleCreateHTML("div","scope1");_scope3.appendChild(target),null!==_duration&&_scope3.appendChild(_duration),null!==cycle&&_scope3.appendChild(cycle),_content4.appendChild(_scope3),_he4.appendChild(_content4);var _frg2=document.createDocumentFragment();_frg2.appendChild(simpleCreateHTML("span","_main_title",{hp:Lang("branch/heal/title: hp"),mp:Lang("branch/heal/title: mp")}[attr.type])),null!==frequency&&_frg2.appendChild(frequency);var _frg3=document.createDocumentFragment();return null!==_constant&&_frg3.appendChild(_constant),0!==extra_frg.childElementCount&&_frg3.appendChild(extra_frg),_he4.appendChild(createContentLine(_frg2,_frg3,{headIcon:!1})),branch.finish=!0,_he4;case"text":case"tips":var _text_name=null;attr.name&&(_text_name=simpleCreateHTML("span","_name",attr.name));var main_text=simpleCreateHTML("div","text_scope",processText(branch)),_he5=simpleCreateHTML("div",["branch","branch_"+btype]),_top3=simpleCreateHTML("div","top");null!==_text_name&&_top3.appendChild(_text_name);var _content5=simpleCreateHTML("div","content");return _content5.appendChild(main_text),0!=_top3.childElementCount&&_he5.appendChild(_top3),_he5.appendChild(_content5),branch.finish=!0,_he5;case"list":var lists=[];lists.push(branch);for(var _p=branch.findLocation()+1,cur=branch.parent.branchs[_p];void 0!==cur&&cur.name==btype;)lists.push(cur),cur=branch.parent.branchs[++_p];var ul=simpleCreateHTML("ul","_lists");lists.forEach(function(e){ul.appendChild(simpleCreateHTML("li",null,processText(e))),e.finish=!0});var _he6=simpleCreateHTML("div",["branch","branch_"+btype]),_content6=simpleCreateHTML("div","content");return _content6.appendChild(ul),_he6.appendChild(_content6),branch.finish=!0,_he6;case"reference":var _main_text=null;attr.text&&(_main_text=simpleCreateHTML("div","text_scope",processText(branch)));var url_scope=null;if(attr.url){url_scope=document.createDocumentFragment();var urls=attr.url.split(","),url_texts=attr.url_text.split(",");urls.forEach(function(e,t){url_scope.appendChild(createSkillAttributeScope(null,null,'<a href="'.concat(e,'" target="_blank" class="url_text">').concat(url_texts[t],"</a>")))})}var _he7=simpleCreateHTML("div",["branch","branch_"+btype]);return null!==_main_text&&_he7.appendChild(_main_text),null!==url_scope&&_he7.appendChild(createContentLine(simpleCreateHTML("span","_main_title",Lang("branch/reference/reference url")),url_scope,{headIcon:!1})),branch.finish=!0,_he7}return null}function beforeExport(e,t){var a=t.skillRoot.controller,n=function(e){var t=a.currentData.skill_from_where_scope;_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.removeAllChild(t),t.classList.remove("hidden");var n=this.querySelector("div.temp");n||(n=simpleCreateHTML("div","temp"),this.appendChild(n)),n.appendChild(t);var r=_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.element.convertRemToPixels(1),i=this.getBoundingClientRect(),l=t.getBoundingClientRect(),c=i.left,o=i.top,s=l.width,_=window.innerWidth,u=l.height,p=window.innerHeight;c+l.width>_-r?t.style.left=(_-1*s-c)/r-.5+"rem":c<l.width?t.style.left=-1*c/r+.5+"rem":t.style.left="0",t.style.top=o>p/2?-1*u/r-.5+"rem":i.height/r+.5+"rem";var d=a.selectSkillElement(this.getAttribute(Object(_strings_js__WEBPACK_IMPORTED_MODULE_4__.a)().data_skillElementNo));t.appendChild(createSkillAttributeScope(null,Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("Skill Query/Skill Element/skill tree: from"),d.parent.name));var m=simpleCreateHTML("div","button_scope"),h=simpleCreateHTML("span","global_button_1",Object(_main_module_LanguageSystem_js__WEBPACK_IMPORTED_MODULE_2__.a)("global/cancel"));h.addEventListener("click",function(e){this.parentNode.parentNode.classList.add("hidden"),e.stopPropagation()});var f=simpleCreateHTML("span","global_button_1",Lang("button text/to skill"));f.addEventListener("click",function(e){this.parentNode.parentNode.classList.add("hidden"),a.skillRecord(d),e.stopPropagation()}),m.appendChild(h),m.appendChild(f),t.appendChild(m)};function r(e){this.parentNode.querySelector("div.scope1").classList.toggle("hidden"),this.querySelector(".open").classList.toggle("hidden"),this.querySelector(".close").classList.toggle("hidden")}e.querySelectorAll("span.skill_from_where_button").forEach(function(e){return e.addEventListener("click",n)}),e.querySelectorAll("div.content > div.scope1").forEach(function(e){if(!e.parentNode.classList.contains("content_line")&&0!==e.childElementCount){var t=simpleCreateHTML("span","hidden_toggle_button",'<span class="close hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg></span><span class="open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.12 14.71L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"/></svg></span>');t.addEventListener("click",r),e.parentNode.insertBefore(t,e.parentNode.firstChild),t.click()}})}__webpack_exports__.a=function(e){var t,a=e.currentSkill,n=e.skillLevel,r=e.characterLevel,i=(new TempSkillEffect).from(a.defaultEffect),l=!1;if(a.effects.forEach(function(n){if(!l)return e.skillRoot.controller.equipmentCheck(n,e)?(n!=a.defaultEffect&&i.overWrite(n),t=n,void(l=!0)):void 0}),l){var c=document.createDocumentFragment(),o=[_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.MP_COST,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.RANGE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.SKILL_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.DAMAGE_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.PORATION_TYPE,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.IN_COMBO,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.ACTION_TIME,_SkillElements_js__WEBPACK_IMPORTED_MODULE_1__.c.CASTING_TIME],s=document.createElement("div");s.className="skill_attributes",o.forEach(function(e){if(void 0!==i.attributes[e]){var t=getEffectHTML(i,e,{SLv:n,CLv:r});t&&s.appendChild(t)}}),c.appendChild(s);var _=document.createElement("div");if(_.className="skill_branchs",i.checkData()){null===e.stackValues&&(e.stackValues={},_main_module_cyteria_js__WEBPACK_IMPORTED_MODULE_3__.a.object.empty(e.stackNames),i.branchs.forEach(function(t){if("stack"==t.name){var a=t.branchAttributes,n="auto"==a.default?a.min:a.default;e.stackValues[getStackBranchIdKey(t)]=n,e.stackNames[getStackBranchIdKey(t)]=t.branchAttributes.name}}));var u=e.stackValues,p=e.stackNames,d=e.showOriginalFormula,m=e.skillRoot,h=null;e.branchDevelopmentMode&&(h=new branchDevelopmentController(a.defaultEffect)),i.branchs.forEach(function(l){var c=getBranchHTML(l,{SLv:n,CLv:r,stackNames:p,stackValues:u,showOriginalFormula:d,skillRoot:m});if(null!==c){if(e.branchDevelopmentMode){var o=t===a.defaultEffect,s=t.branchs.find(function(e){return l.no==e.no});_.appendChild(h.branchDetail(!o&&s?s:l,o)),"list"==l.name&&function(){for(var e=l.findLocation()+1,a=i.branchs[e];a&&"list"==a.name;)s=t.branchs.find(function(e){return a.no==e.no}),_.appendChild(h.branchDetail(!o&&s?s:a,o)),++e,a=i.branchs[e]}()}_.appendChild(c)}})}else{var f=document.createElement("div");f.classList.add("no_data"),f.innerHTML=Lang("no data"),_.appendChild(f)}return c.appendChild(_),beforeExport(c,e),c}var v=document.createElement("div");return v.classList.add("no_data"),v.innerHTML=Lang("equipment not confirm"),v}},function(e,t,a){e.exports=a(17)},function(e,t,a){var n=function(e){"use strict";var t,a=Object.prototype,n=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function o(e,t,a,n){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),l=new A(n||[]);return i._invoke=function(e,t,a){var n=_;return function(r,i){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===r)throw i;return O()}for(a.method=r,a.arg=i;;){var l=a.delegate;if(l){var c=C(l,a);if(c){if(c===m)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===_)throw n=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=p;var o=s(e,t,a);if("normal"===o.type){if(n=a.done?d:u,o.arg===m)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n=d,a.method="throw",a.arg=o.arg)}}}(e,a,l),i}function s(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=o;var _="suspendedStart",u="suspendedYield",p="executing",d="completed",m={};function h(){}function f(){}function v(){}var E={};E[i]=function(){return this};var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==a&&n.call(b,i)&&(E=b);var T=v.prototype=h.prototype=Object.create(E);function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function y(e){var t;this._invoke=function(a,r){function i(){return new Promise(function(t,i){!function t(a,r,i,l){var c=s(e[a],e,r);if("throw"!==c.type){var o=c.arg,_=o.value;return _&&"object"==typeof _&&n.call(_,"__await")?Promise.resolve(_.__await).then(function(e){t("next",e,i,l)},function(e){t("throw",e,i,l)}):Promise.resolve(_).then(function(e){o.value=e,i(o)},function(e){return t("throw",e,i,l)})}l(c.arg)}(a,r,t,i)})}return t=t?t.then(i,i):i()}}function C(e,a){var n=e.iterator[a.method];if(n===t){if(a.delegate=null,"throw"===a.method){if(e.iterator.return&&(a.method="return",a.arg=t,C(e,a),"throw"===a.method))return m;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=s(n,e.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,m;var i=r.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,m):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function S(e){if(e){var a=e[i];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,l=function a(){for(;++r<e.length;)if(n.call(e,r))return a.value=e[r],a.done=!1,a;return a.value=t,a.done=!0,a};return l.next=l}}return{next:O}}function O(){return{value:t,done:!0}}return f.prototype=T.constructor=v,v.constructor=f,v[c]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},L(y.prototype),y.prototype[l]=function(){return this},e.AsyncIterator=y,e.async=function(t,a,n,r){var i=new y(o(t,a,n,r));return e.isGeneratorFunction(a)?i:i.next().then(function(e){return e.done?e.value:i.next()})},L(T),T[c]="Generator",T[i]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=S,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function r(n,r){return c.type="throw",c.arg=e,a.next=n,r&&(a.method="next",a.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],c=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var o=n.call(l,"catchLoc"),s=n.call(l,"finallyLoc");if(o&&s){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),M(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;M(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:S(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),i=a(10),l=a.n(i),c=a(5),o=a(0),s=0,_=1,u=1,p=2,d="預設",m=3,h=4,f=5,v=["單手劍","雙手劍","弓","弩","法杖","魔導具","拳套","旋風槍","拔刀劍","雙劍"],E=["箭矢","盾牌","小刀","魔導具","拳套","拔刀劍"],g=["輕量化","重量化","一般"],b=6,T=7,L=8,y=9,C=10,k=11,M=12,A=13,S=14,O=15,P=16,D=["瞬發","須詠唱","須蓄力","被動"],w=["可以放入連擊","無法放入連擊","不可放入連擊的第一招"],I=["極慢","慢","稍慢","一般","稍快","快","極快"],x="Skill Tree Category",B=2,R="Skill Tree",H=2;var j=function(e){e.skillTreeCategorys.forEach(function(e){e.skillTrees.forEach(function(e){e.skills.forEach(function(e){var t=e.defaultEffect;if(t){if(void 0!==e.effects.find(function(e){return 0===e.mainWeapon}))void 0===e.effects.find(function(e){return 9===e.mainWeapon})&&e.newElement(o.c.TYPE,{mainWeapon:9,subWeapon:-1,bodyArmor:-1});t.branchs.forEach(function(e){!function(e){var t=function(e,t){Object.keys(t).forEach(function(a){void 0===e.branchAttributes[a]&&e.appendBranchAttribute(a,t[a])})};switch(e.name){case"damage":t(e,{constant:"0",multiplier:"0",type:"single",base:"auto",frequency:"1",end_position:"target",effective_area:"circle",title:"normal",judgment:"common",damage_type:"physical"});break;case"stack":t(e,{min:"1",default:"auto"});break;case"effect":case"hit":t(e,{type:"self",condition:"auto"});break;case"heal":t(e,{target:"self",frequency:"1",constant:"0"});break;case"next":t(e,{type:"none",frequency:"1"});break;case"poration":t(e,{poration:"auto"});break;case"passive":case"text":case"tips":case"list":case"head":case"extra":case"reference":case"":break;default:console.warn("Unknow Skill Branch Name."),console.log(e)}}(e)})}})})})};function N(){this.skillRoot=new o.d(this)}N.prototype={init:function(){var e=this;return new Promise(function(t,a){Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_XhF85gZ5sd9AtOMSM6JY4OuQwFlD6kToQynQ4bMq_fiaUNr26c7dbrIs6WeWnscKe1rau1npWYe7/pub?gid=170573319&single=true&output=csv",{download:!0,complete:function(a){var n,r,i,l,N,W;n=e.skillRoot,r=a.data,i=null,l=[o.f.TYPE,o.e.TYPE,o.a.TYPE,o.c.TYPE,o.b.TYPE],N=function(e,t){if(l.indexOf(e.TYPE)<=l.indexOf(t))return e;for(;e.TYPE!=t;)e=e.parent;return e},W=function(e,t){return e===t?null:e},r.forEach(function(e,t){try{if(0==t)return;var a=e[s];if(""!=a){var r=e[_];switch(r){case x:var j=e[B];i=n.newElement(o.f.TYPE,{no:a,name:j});break;case R:i=N(i,o.f.TYPE);var U=e[H];i=i.newElement(o.e.TYPE,{no:a,name:U});break;default:if(""!=r){i=N(i,o.e.TYPE);var K=e[u];i=i.newElement(o.a.TYPE,{no:a,name:K})}case"":var Y=v.indexOf(e[m]),V=E.indexOf(e[h]),q=g.indexOf(e[f]),F=e[p];if(""==F)return;var G=(i=N(i,o.a.TYPE)).newElement(o.c.TYPE,{mainWeapon:Y,subWeapon:V,bodyArmor:q});F==d&&i.setDefaultEffect(G),i=G.appendAttribute(o.c.MP_COST,W(e[k],"")).appendAttribute(o.c.RANGE,W(e[M],"")).appendAttribute(o.c.SKILL_TYPE,W(D.indexOf(e[A]),-1)).appendAttribute(o.c.IN_COMBO,W(w.indexOf(e[S]),-1)).appendAttribute(o.c.ACTION_TIME,W(I.indexOf(e[O]),-1)).appendAttribute(o.c.CASTING_TIME,W(e[P],""))}}if(l.indexOf(i.TYPE)<l.indexOf(o.c.TYPE))return;var Q=e[b];if(""!=Q){i=N(i,o.c.TYPE);var X=e[T];i=i.newElement(o.b.TYPE,{no:Q,name:X})}var z=e[L],$=e[y];""!=z&&(c.a.CharacterSystem.findStatBase(z)?i.appendStat(z,$,e[C]):i.appendBranchAttribute(z,$))}catch(t){console.warn("[Error] When Load Skill Data"),console.log(e)}}),j(e.skillRoot),t()},error:function(e){console.warn("讀取技能資料時發生錯誤"),console.log(e),a()}})})},init_SkillQuery:function(e){this.skillRoot.controller.initSkillQueryHTML(e)}};var W=N,U=a(6);function K(){this.statList=[]}K.prototype={init:function(){},init_statList:function(){var e=this;return new Promise(function(t,a){Papa.parse("./src/CharacterSystem/module/other/BaseStatData.csv",{download:!0,complete:function(a){var n;n=e,a.data.forEach(function(e,t){if(0!=t){var a=""===e[3]?null:"@none"==e[3]?"":e[3];n.appendStatBase(e[0],e[1],"無"!=e[2]).appendAttribute("constant_unit",a)}}),t()},error:function(e){console.warn("讀取角色能力資料時發生錯誤"),console.log(e),a()}})})},appendStatBase:function(e,t,a,n){var r=new U.a(e,t,a);return this.statList.push(r),r},StatList:function(){return this.statList},findStatBase:function(e){return this.StatList().find(function(t){return t.baseName==e})}};var Y=K,V=a(7),q=a.n(V);var F="data-langtext";function G(e){var t=function(e){var t=Array.from(this.parentNode.getElementsByTagName("li")).indexOf(this),a=document.querySelector('*[data-main-scope="1"]');a.setAttribute("data-main-scope",0),a.classList.add("hidden");var n=document.querySelectorAll("*[data-main-scope]")[t];n.setAttribute("data-main-scope",1),n.classList.remove("hidden")},a=document.createDocumentFragment();["Skills Information|,|技能資料|,|スキルインフォ"].forEach(function(e){var n=document.createElement("li");n.innerHTML=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return"";var n=document.createElement("a");return n.setAttribute(F,e),a.href&&(n.href=a.href),a.class&&(Array.isArray(a.class)?(t=n.classList).add.apply(t,q()(a.class)):n.classList.add(a.class)),n.outerHTML}(e),n.addEventListener("click",t),a.appendChild(n)});var n=document.createElement("ul");n.appendChild(a),e.appendChild(n)}var Q=function(e){G(e.top_menu),function e(t){var a=t.querySelectorAll("a[".concat(F,"], input[").concat(F,"]"));0!==a.length&&Array.from(a).forEach(function(t){var a,n;t.innerHTML=(a=t.getAttribute(F),(n=a.split("|,|"))[1]||n[0]),e(t)})}(document),document.getElementById("LoadingPage").classList.add("hidden")};function X(e){var t=document.createElement("div");t.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(t)}function z(e){return new Promise(function(t,a){var n=document.createElement("div");n.innerHTML=e,document.querySelector("div#LoadingPage > div.msg").appendChild(n),t()})}function $(){return($=l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.a.SkillSystem=new W,c.a.CharacterSystem=new Y,e.next=4,z("載入角色能力清單...");case 4:return e.next=6,c.a.CharacterSystem.init_statList().catch(function(){return X("...載入失敗。")});case 6:return e.next=8,z("載入技能清單...");case 8:return e.next=10,c.a.SkillSystem.init().catch(function(){return X("...載入失敗。")});case 10:return e.next=13,z("初始化技能資料...");case 13:c.a.SkillSystem.init_SkillQuery(document.querySelector("#SkillQuery > .main")),Q({top_menu:document.getElementById("top_menu")});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}if("0"===document.getElementById("SkillQuery").getAttribute("data-ready"))try{!function(){$.apply(this,arguments)}(),document.getElementById("SkillQuery").setAttribute("data-ready","1")}catch(e){X(e),console.log(e)}}]);